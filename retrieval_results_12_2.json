[
  {
    "index": 1,
    "original_query": "Generate an HTML page using vtk.js to visualize the rotor dataset.\n\n- Load the dataset from: http://127.0.0.1:5000/dataset/rotor.vti\n- Set the active scalar array to \"Pressure\".\n- Apply a slice along the Y axis at 95% depth of the dataset (convert percentage to slice index).\n- Use a blue → white → red color map for pressure values, spanning from the minimum to maximum scalar range.\n- Set opacity to fully opaque (no transparency variation).\n- Add an orientation marker with XYZ axes in the bottom-right corner.\n- No interactive GUI controls are required.\n",
    "splited_queries": [
      {
        "description": "Data Loading — Load the dataset from 'http://127.0.0.1:5000/dataset/rotor.vti' using vtkXMLImageDataReader."
      },
      {
        "description": "Data Processing — Set the active scalar array to 'Pressure' and compute the slice index at 95% depth along the Y-axis using the dataset's dimensions, then apply a vtkImageSlice filter to extract the slice."
      },
      {
        "description": "Visualization Setup — Configure a color transfer function with a blue-to-white-to-red gradient spanning the full range of 'Pressure' scalar values and assign it to the vtkImageMapper for rendering."
      },
      {
        "description": "Opacity Control — Set the opacity of the slice to fully opaque (1.0) with no variation across the scalar range."
      },
      {
        "description": "UI Components — Add an orientation marker with XYZ axes in the bottom-right corner of the render window using vtkOrientationMarkerWidget."
      },
      {
        "description": "Rendering — Initialize the render window, renderer, and interactor to display the sliced volume with the configured color map and orientation marker."
      }
    ],
    "final_prompt": "\n    Generate only the HTML code without any additional text or markdown formatting.\n    User Requirements:\n    Generate an HTML page using vtk.js to visualize the rotor dataset.\n\n- Load the dataset from: http://127.0.0.1:5000/dataset/rotor.vti\n- Set the active scalar array to \"Pressure\".\n- Apply a slice along the Y axis at 95% depth of the dataset (convert percentage to slice index).\n- Use a blue → white → red color map for pressure values, spanning from the minimum to maximum scalar range.\n- Set opacity to fully opaque (no transparency variation).\n- Add an orientation marker with XYZ axes in the bottom-right corner.\n- No interactive GUI controls are required.\n\n\n    Relevant VTK.js Examples:\n    示例 1:\n描述: Loads 3D volume data, writes it to a binary XML format using `vtkXMLImageDataWriter`, reads it back with `vtkXMLImageDataReader`, and visualizes it\nVTK.js 模块: ['vtk.IO.XML.vtkXMLImageDataReader.newInstance', 'vtk.Common.DataModel.vtkPiecewiseFunction.newInstance', 'vtk.IO.Core.vtkHttpDataSetReader.newInstance', 'vtk.IO.XML.vtkXMLImageDataWriter.newInstance', 'vtk.IO.XML.vtkXMLWriter.FormatTypes.BINARY', 'vtk.Rendering.Core.vtkColorTransferFunction.newInstance', 'vtk.Rendering.Core.vtkVolume.newInstance', 'vtk.Rendering.Core.vtkVolumeMapper.newInstance', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js XMLImageDataWriter</title>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n\n    <script type=\"text/javascript\" src=\"https://unpkg.com/@babel/polyfill@7.0.0/dist/polyfill.js\"></script>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const dataPath = 'http://kitware.github.io/vtk-js/data/volume/headsq.vti';\n        const fullScreenRenderer = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance();\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        const reader = vtk.IO.Core.vtkHttpDataSetReader.newInstance({ fetchGzip: true });\n\n        const writer = vtk.IO.XML.vtkXMLImageDataWriter.newInstance();\n        writer.setFormat(vtk.IO.XML.vtkXMLWriter.FormatTypes.BINARY);\n        writer.setInputConnection(reader.getOutputPort());\n\n        const writerReader = vtk.IO.XML.vtkXMLImageDataReader.newInstance();\n\n        reader\n            .setUrl(dataPath, { loadData: true })\n            .then(() => {\n                const fileContents = writer.write(reader.getOutputData());\n\n                // Try to read it back.\n                const textEncoder = new TextEncoder();\n                writerReader.parseAsArrayBuffer(textEncoder.encode(fileContents));\n                renderer.resetCamera();\n                renderWindow.render();\n\n                const blob = new Blob([fileContents], { type: 'text/plain' });\n                const a = window.document.createElement('a');\n                a.href = window.URL.createObjectURL(blob, { type: 'text/plain' });\n                a.download = 'headsq.vti';\n                a.text = 'Download';\n                a.style.position = 'absolute';\n                a.style.left = '50%';\n                a.style.bottom = '10px';\n                document.body.appendChild(a);\n                a.style.background = 'white';\n                a.style.padding = '5px';\n            });\n\n        const actor = vtk.Rendering.Core.vtkVolume.newInstance();\n        const mapper = vtk.Rendering.Core.vtkVolumeMapper.newInstance();\n        mapper.setSampleDistance(1.1);\n        actor.setMapper(mapper);\n\n        mapper.setInputConnection(writerReader.getOutputPort());\n\n        // create color and opacity transfer functions\n        const ctfun = vtk.Rendering.Core.vtkColorTransferFunction.newInstance();\n        ctfun.addRGBPoint(200.0, 1.0, 1.0, 1.0);\n        ctfun.addRGBPoint(2000.0, 0.0, 0.0, 0.0);\n        const ofun = vtk.Common.DataModel.vtkPiecewiseFunction.newInstance();\n        ofun.addPoint(200.0, 0.0);\n        ofun.addPoint(1200.0, 0.2);\n        ofun.addPoint(4000.0, 0.4);\n        actor.getProperty().setRGBTransferFunction(0, ctfun);\n        actor.getProperty().setScalarOpacity(0, ofun);\n        actor.getProperty().setScalarOpacityUnitDistance(0, 4.5);\n        // actor.getProperty().setInterpolationTypeToNearest();\n        // actor.getProperty().setInterpolationTypeToFastLinear();\n        actor.getProperty().setInterpolationTypeToLinear();\n\n        renderer.addActor(actor);\n\n        window.writer = writer;\n        window.writerReader = writerReader;\n        window.mapper = mapper;\n        window.actor = actor;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n\n    </script>\n\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 2:\n描述: Loads a 3D volume and displays three orthogonal image slices (I, J, K planes) at the 30th layer using `vtkHttpDataSetReader` and `vtkImageSlice`.\n\nVTK.js 模块: ['vtk.Rendering.Core.vtkImageSlice', 'vtk.IO.Core.vtkHttpDataSetReader', 'vtk.Rendering.Core.vtkImageMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkHttpDataSetReader = vtk.IO.Core.vtkHttpDataSetReader;\n        const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n        const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n        const dataPath = 'http://kitware.github.io/vtk-js/data/volume/headsq.vti';\n\n        const fullScreenRenderWindow = vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n        const imageActorI = vtkImageSlice.newInstance();\n        const imageActorJ = vtkImageSlice.newInstance();\n        const imageActorK = vtkImageSlice.newInstance();\n\n        renderer.addActor(imageActorK);\n        renderer.addActor(imageActorJ);\n        renderer.addActor(imageActorI);\n\n        const reader = vtkHttpDataSetReader.newInstance({\n            fetchGzip: true,\n        });\n        reader\n            .setUrl(dataPath, { loadData: true })\n            .then(() => {\n                const data = reader.getOutputData();\n                const dataRange = data.getPointData().getScalars().getRange();\n                const extent = data.getExtent();\n\n                const imageMapperK = vtkImageMapper.newInstance();\n                imageMapperK.setInputData(data);\n                imageMapperK.setKSlice(30);\n                imageActorK.setMapper(imageMapperK);\n\n                const imageMapperJ = vtkImageMapper.newInstance();\n                imageMapperJ.setInputData(data);\n                imageMapperJ.setJSlice(30);\n                imageActorJ.setMapper(imageMapperJ);\n\n                const imageMapperI = vtkImageMapper.newInstance();\n                imageMapperI.setInputData(data);\n                imageMapperI.setISlice(30);\n                imageActorI.setMapper(imageMapperI);\n\n                renderer.resetCamera();\n                renderWindow.render();\n            });\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 3:\n描述: Displays a synthetic 2D image generated by `vtkRTAnalyticSource` using `vtkImageMapper` and `vtkImageSlice`.\nVTK.js 模块: ['vtk.Rendering.Core.vtkImageMapper', 'vtk.Common.DataModel.vtkImageData', 'vtk.Filters.Sources.vtkRTAnalyticSource', 'vtk.Rendering.Core.vtkImageSlice', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n        const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n        const vtkImageData = vtk.Common.DataModel.vtkImageData;\n\n        // create render window\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        const vtkImgSource = vtk.Filters.Sources.vtkRTAnalyticSource;\n        const imgSource = vtkImgSource.newInstance();\n        imgSource.update();\n        const img = imgSource.getOutputData();\n\n        // set mapper and actor\n        const mapper = vtkImageMapper.newInstance();\n        mapper.setInputData(img);\n\n        const actor = vtkImageSlice.newInstance();\n        actor.setMapper(mapper);\n\n        // adding actor to render\n        renderer.addActor(actor);\n        renderer.resetCamera();\n        renderWindow.render();\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 4:\n描述: Loads a 3D volume (`headsq.vti`) and displays three orthogonal slices (I, J, K) with interactive controls for position and color properties.\n\nVTK.js 模块: ['vtk.IO.Core.vtkHttpDataSetReader', 'vtk.Rendering.Core.vtkImageMapper', 'vtk.Rendering.Core.vtkImageSlice', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js Isosurface Visualization</title>\n    <link rel=\"stylesheet\" href=\"https://kit.fontawesome.com/419a5ebb56.css\" crossorigin=\"anonymous\">\n    <style>\n        #renderer {\n            width: 100%;\n            height: 600px;\n            background-color: #333;\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <!-- Set vtk.js favicon -->\n    <script type=\"module\" src=\"https://unpkg.com/vtk.js/favicon.js\"></script>\n\n    <!-- Load WebGL and WebGPU rendering modules -->\n    <script type=\"module\" src=\"https://unpkg.com/vtk.js/Sources/Rendering/Profiles/Volume.js\"></script>\n\n    <!-- Force DataAccessHelper to access various data sources -->\n    <script type=\"module\"\n        src=\"https://unpkg.com/vtk.js/Sources/IO/Core/DataAccessHelper/HtmlDataAccessHelper.js\"></script>\n    <script type=\"module\"\n        src=\"https://unpkg.com/vtk.js/Sources/IO/Core/DataAccessHelper/HttpDataAccessHelper.js\"></script>\n    <script type=\"module\"\n        src=\"https://unpkg.com/vtk.js/Sources/IO/Core/DataAccessHelper/JSZipDataAccessHelper.js\"></script>\n\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkHttpDataSetReader = vtk.IO.Core.vtkHttpDataSetReader;\n        const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n        const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n        const path = 'http://kitware.github.io/vtk-js/data'\n\n        // Reference HTML template\n        const controlPanel = `<table>\n    <tr>\n        <td>Slice I</td>\n        <td>\n            <input class='sliceI' type=\"range\" min=\"0\" max=\"2.0\" step=\"1\" value=\"1\" />\n        </td>\n    </tr>\n    <tr>\n        <td>Slice J</td>\n        <td>\n            <input class='sliceJ' type=\"range\" min=\"0\" max=\"2.0\" step=\"1\" value=\"1\" />\n        </td>\n    </tr>\n    <tr>\n        <td>Slice K</td>\n        <td>\n            <input class='sliceK' type=\"range\" min=\"0\" max=\"100\" step=\"1\" value=\"1\" />\n        </td>\n    </tr>\n    <tr>\n        <td>Color level</td>\n        <td>\n            <input class='colorLevel' type=\"range\" min=\"-3926\" max=\"3926\" step=\"1\" value=\"1\" />\n        </td>\n    </tr>\n    <tr>\n        <td>ColorWindow</td>\n        <td>\n            <input class='colorWindow' type=\"range\" min=\"0\" max=\"3926\" step=\"1\" value=\"1\" />\n        </td>\n    </tr>\n</table>\n`;\n        const fullScreenRenderWindow = vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n        fullScreenRenderWindow.addController(controlPanel);\n\n        const imageActorI = vtkImageSlice.newInstance();\n        const imageActorJ = vtkImageSlice.newInstance();\n        const imageActorK = vtkImageSlice.newInstance();\n\n        renderer.addActor(imageActorK);\n        renderer.addActor(imageActorJ);\n        renderer.addActor(imageActorI);\n\n        function updateColorLevel(e) {\n            const colorLevel = Number(\n                (e ? e.target : document.querySelector('.colorLevel')).value\n            );\n            imageActorI.getProperty().setColorLevel(colorLevel);\n            imageActorJ.getProperty().setColorLevel(colorLevel);\n            imageActorK.getProperty().setColorLevel(colorLevel);\n            renderWindow.render();\n        }\n\n        function updateColorWindow(e) {\n            const colorLevel = Number(\n                (e ? e.target : document.querySelector('.colorWindow')).value\n            );\n            imageActorI.getProperty().setColorWindow(colorLevel);\n            imageActorJ.getProperty().setColorWindow(colorLevel);\n            imageActorK.getProperty().setColorWindow(colorLevel);\n            renderWindow.render();\n        }\n\n        const reader = vtkHttpDataSetReader.newInstance({\n            fetchGzip: true,\n        });\n        reader\n            .setUrl(`${path}/data/volume/headsq.vti`, { loadData: true })\n            .then(() => {\n                const data = reader.getOutputData();\n                const dataRange = data.getPointData().getScalars().getRange();\n                const extent = data.getExtent();\n\n                const imageMapperK = vtkImageMapper.newInstance();\n                imageMapperK.setInputData(data);\n                imageMapperK.setKSlice(30);\n                imageActorK.setMapper(imageMapperK);\n\n                const imageMapperJ = vtkImageMapper.newInstance();\n                imageMapperJ.setInputData(data);\n                imageMapperJ.setJSlice(30);\n                imageActorJ.setMapper(imageMapperJ);\n\n                const imageMapperI = vtkImageMapper.newInstance();\n                imageMapperI.setInputData(data);\n                imageMapperI.setISlice(30);\n                imageActorI.setMapper(imageMapperI);\n\n                renderer.resetCamera();\n                renderer.resetCameraClippingRange();\n                renderWindow.render();\n\n                ['.sliceI', '.sliceJ', '.sliceK'].forEach((selector, idx) => {\n                    const el = document.querySelector(selector);\n                    el.setAttribute('min', extent[idx * 2 + 0]);\n                    el.setAttribute('max', extent[idx * 2 + 1]);\n                    el.setAttribute('value', 30);\n                });\n\n                ['.colorLevel', '.colorWindow'].forEach((selector) => {\n                    document.querySelector(selector).setAttribute('max', dataRange[1]);\n                    document.querySelector(selector).setAttribute('value', dataRange[1]);\n                });\n                document\n                    .querySelector('.colorLevel')\n                    .setAttribute('value', (dataRange[0] + dataRange[1]) / 2);\n                updateColorLevel();\n                updateColorWindow();\n            });\n\n        document.querySelector('.sliceI').addEventListener('input', (e) => {\n            imageActorI.getMapper().setISlice(Number(e.target.value));\n            renderWindow.render();\n        });\n\n        document.querySelector('.sliceJ').addEventListener('input', (e) => {\n            imageActorJ.getMapper().setJSlice(Number(e.target.value));\n            renderWindow.render();\n        });\n\n        document.querySelector('.sliceK').addEventListener('input', (e) => {\n            imageActorK.getMapper().setKSlice(Number(e.target.value));\n            renderWindow.render();\n        });\n\n        document\n            .querySelector('.colorLevel')\n            .addEventListener('input', updateColorLevel);\n        document\n            .querySelector('.colorWindow')\n            .addEventListener('input', updateColorWindow);\n\n        window.fullScreen = fullScreenRenderWindow;\n        window.imageActorI = imageActorI;\n        window.imageActorJ = imageActorJ;\n        window.imageActorK = imageActorK;\n\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 5:\n描述: Displays a 2D image volume with an outlined labelmap. Specific regions (high/low values) are highlighted in red/green with transparent outlines.\n\nVTK.js 模块: ['vtk.Common.Core.vtkDataArray', 'vtk.Common.DataModel.vtkDataSet.FieldAssociations', 'vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes', 'vtk.Common.DataModel.vtkImageData', 'vtk.Common.DataModel.vtkPiecewiseFunction', 'vtk.Filters.General.vtkCalculator', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkColorTransferFunction', 'vtk.Rendering.Core.vtkImageMapper', 'vtk.Rendering.Core.vtkImageSlice', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js ImageLabelOutline</title>\n    <style>\n        #renderer {\n            width: 100%;\n            height: 600px;\n            background-color: #333;\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        // Use the vtk namespace to reference each class\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n        const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n        const vtkImageData = vtk.Common.DataModel.vtkImageData;\n        const vtkDataArray = vtk.Common.Core.vtkDataArray;\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n\n        // Use the vtk namespace to reference constants\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldAssociations;\n\n        const fullScreenRenderWindow = vtkFullScreenRenderWindow.newInstance({\n            background: [0.5, 0.5, 0.5],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n        const BACKGROUND = 0;\n        const LOW_VALUE = 80;\n        const HIGH_VALUE = 160;\n\n        const FIRST_SEGMENT = 1;\n        const SECOND_SEGMENT = 5;\n\n        /**\n         * Creates a labelmap image with the same dimensions as the background volume.\n         * @param {vtkImageData} backgroundImageData - The background volume data.\n         * @returns {Object} An object containing the labelmap actor, mapper, image data, color transfer function, and opacity function.\n         */\n        function createLabelmap(backgroundImageData) {\n            // Create a labelmap image the same dimensions as our background volume.\n            const labelMapData = vtkImageData.newInstance(\n                backgroundImageData.get('spacing', 'origin', 'direction')\n            );\n\n            labelMapData.computeTransforms();\n\n            const dataArray = vtkDataArray.newInstance({\n                numberOfComponents: 1,\n                values: new Uint8Array(backgroundImageData.getNumberOfPoints()),\n            });\n            labelMapData.getPointData().setScalars(dataArray);\n\n            labelMapData.setDimensions(...backgroundImageData.getDimensions());\n            labelMapData.setSpacing(...backgroundImageData.getSpacing());\n            labelMapData.setOrigin(...backgroundImageData.getOrigin());\n            labelMapData.setDirection(...backgroundImageData.getDirection());\n            const mapper = vtkImageMapper.newInstance();\n            mapper.setInputData(labelMapData);\n\n            const actor = vtkImageSlice.newInstance();\n\n            actor.setMapper(mapper);\n\n            const labelMap = {\n                actor,\n                mapper,\n                imageData: labelMapData,\n                cfun: vtkColorTransferFunction.newInstance(),\n                ofun: vtkPiecewiseFunction.newInstance(),\n            };\n\n            // Labelmap pipeline\n            labelMap.mapper.setInputData(labelMapData);\n            labelMap.actor.setMapper(labelMap.mapper);\n\n            // Set up labelMap color and opacity mapping\n            labelMap.cfun.addRGBPoint(0, 0, 0, 0); // label \"1\" will be red\n            labelMap.cfun.addRGBPoint(FIRST_SEGMENT, 1, 0, 0); // label \"1\" will be red\n            labelMap.cfun.addRGBPoint(SECOND_SEGMENT, 0, 1, 0); // label \"5\" will be green\n            labelMap.ofun.addPoint(0, 0);\n            labelMap.ofun.addPoint(FIRST_SEGMENT, 0.1); // Red will have an opacity of 0.1.\n            labelMap.ofun.addPoint(SECOND_SEGMENT, 0.1); // Green will have an opacity of 0.1.\n\n            labelMap.actor.getProperty().setRGBTransferFunction(0, labelMap.cfun);\n            labelMap.actor.getProperty().setScalarOpacity(0, labelMap.ofun);\n            labelMap.actor.getProperty().setInterpolationTypeToNearest();\n\n            labelMap.actor.getProperty().setUseLabelOutline(true);\n            // Label outline thickness is for first segment -> 2 (positioned at array index 0), second segment -> 4\n            // (positioned at array index 4)\n            labelMap.actor.getProperty().setLabelOutlineThickness([2, 1, 1, 1, 4]);\n            labelMap.actor.getProperty().setLabelOutlineOpacity(1.0);\n\n            // This is very important to make sure the labelmap is rendered\n            // correctly\n            labelMap.actor.getProperty().setUseLookupTableScalarRange(true);\n\n            const dims = labelMap.imageData.getDimensions();\n            const values = labelMap.imageData.getPointData().getScalars().getData();\n\n            const backgroundValues = backgroundImageData\n                .getPointData()\n                .getScalars()\n                .getData();\n            const size = dims[0] * dims[1] * dims[2];\n\n            for (let i = 0; i < size; i++) {\n                if (backgroundValues[i] === LOW_VALUE) {\n                    values[i] = FIRST_SEGMENT;\n                } else if (backgroundValues[i] === HIGH_VALUE) {\n                    values[i] = SECOND_SEGMENT;\n                }\n            }\n\n            labelMap.imageData.getPointData().getScalars().setData(values);\n\n            return labelMap;\n        }\n\n        // Create a one slice vtkImageData that has four quadrants of different values\n        const imageData = vtkImageData.newInstance();\n        const dims = [10, 10, 1];\n        imageData.setSpacing(1, 1, 1);\n        imageData.setOrigin(0.1, 0.1, 0.1);\n        imageData.setDirection(1, 0, 0, 0, 1, 0, 0, 0, 1);\n        imageData.setExtent(0, dims[0] - 1, 0, dims[1] - 1, 0, dims[2] - 1);\n\n        imageData.computeTransforms();\n\n        const values = new Uint8Array(dims[0] * dims[1] * dims[2]);\n\n        let i = 0;\n        for (let y = 0; y < dims[1]; y++) {\n            for (let x = 0; x < dims[0]; x++, i++) {\n                if ((x < 3 && y < 3) || (x > 7 && y > 7)) {\n                    values[i] = BACKGROUND;\n                } else if (x > 4 && x < 6 && y > 4 && y < 7) {\n                    values[i] = LOW_VALUE;\n                } else {\n                    values[i] = HIGH_VALUE;\n                }\n            }\n        }\n\n        const dataArray = vtkDataArray.newInstance({\n            numberOfComponents: 1,\n            values,\n        });\n        imageData.getPointData().setScalars(dataArray);\n        imageData.modified();\n\n        const data = imageData;\n        const labelMap = createLabelmap(data);\n\n        const actor = vtkImageSlice.newInstance();\n        const mapper = vtkImageMapper.newInstance();\n        mapper.setInputData(data);\n        actor.setMapper(mapper);\n        actor.getProperty().setInterpolationTypeToNearest();\n\n        renderer.addActor(actor);\n        renderer.addActor(labelMap.actor);\n        renderer.resetCamera();\n        renderer.resetCameraClippingRange();\n        renderWindow.render();\n\n        window.fullScreen = fullScreenRenderWindow;\n\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 6:\n描述: Loads a 3D volume dataset and renders it using `vtkVolumeActor` and `vtkVolumeMapper` with extensive customization for appearance and quality.\n\nVTK.js 模块: ['vtk.Common.DataModel.vtkPiecewiseFunction', 'vtk.IO.Core.vtkHttpDataSetReader.newInstance', 'vtk.Rendering.Core.vtkColorTransferFunction', 'vtk.Rendering.Core.vtkVolume', 'vtk.Rendering.Core.vtkVolumeMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n</head>\n\n<body>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        //using volume actor and mapper for rendering\n        const vtkVolumeActor = vtk.Rendering.Core.vtkVolume;\n        const vtkVolumeMapper = vtk.Rendering.Core.vtkVolumeMapper;\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n\n        //init the render window\n        const fullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n        //set the data path and the reader\n        const dataPath = 'http://kitware.github.io/vtk-js/data/volume/headsq.vti';\n        const reader = vtk.IO.Core.vtkHttpDataSetReader.newInstance({ fetchGzip: true });\n\n        //load data from dataPath and render the results by actor and mapper\n        reader.setUrl(dataPath, { loadData: true })\n            .then(() => {\n                const data = reader.getOutputData(0);\n                //create the mapper and set its property\n                const mapper = vtkVolumeMapper.newInstance();\n                console.log(data.toJSON())\n                mapper.setInputData(data);\n                mapper.setSampleDistance(0.7);\n                mapper.setVolumetricScatteringBlending(0);\n                mapper.setLocalAmbientOcclusion(0);\n                mapper.setLAOKernelSize(10);\n                mapper.setLAOKernelRadius(5);\n                mapper.setComputeNormalFromOpacity(true);\n\n                //create actor and set its properties, including gradient opacity, scalar opacity, shade, ambient, diffuse, specular etc.\n                const actor = vtkVolumeActor.newInstance();\n                const ofun = vtkPiecewiseFunction.newInstance();\n                ofun.addPoint(0.0, 0.1);\n                ofun.addPoint(255.0, 1.0);\n                actor.getProperty().setScalarOpacity(0, ofun);\n                actor.getProperty().setInterpolationTypeToLinear();\n                actor.getProperty().setUseGradientOpacity(0, true);\n                actor.getProperty().setGradientOpacityMinimumValue(0, 2);\n                actor.getProperty().setGradientOpacityMinimumOpacity(0, 0.0);\n                actor.getProperty().setGradientOpacityMaximumValue(0, 20);\n                actor.getProperty().setGradientOpacityMaximumOpacity(0, 1.0);\n                actor.getProperty().setScalarOpacityUnitDistance(0, 2.955);\n                actor.getProperty().setShade(true);\n                actor.getProperty().setAmbient(0.3);\n                actor.getProperty().setDiffuse(1);\n                actor.getProperty().setSpecular(1);\n\n                //assign mapper to actor and assign mapper to render\n                actor.setMapper(mapper);\n                renderer.addVolume(actor);\n                renderer.resetCamera();\n                renderWindow.render();\n            });\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 7:\n描述: Renders a 3D medical volume (`headsq.vti`) with a clipping plane, using `vtkVolumeMapper` and `vtkVolumeActor` for customized appearance.\n\nVTK.js 模块: ['vtk.Common.DataModel.vtkPiecewiseFunction', 'vtk.Common.DataModel.vtkPlane', 'vtk.IO.Core.vtkHttpDataSetReader.newInstance', 'vtk.Rendering.Core.vtkVolume', 'vtk.Rendering.Core.vtkVolumeMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n</head>\n\n<body>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        //using volume actor and mapper for rendering\n        const vtkVolumeActor = vtk.Rendering.Core.vtkVolume;\n        const vtkVolumeMapper = vtk.Rendering.Core.vtkVolumeMapper;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n        const vtkPlane = vtk.Common.DataModel.vtkPlane;\n\n        //init the render window\n        const fullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n        //create clip plan\n        const clipPlane = vtkPlane.newInstance();\n        const clipPlaneNormal = [0, 0, 1]\n\n        //set the data path and the reader\n        const dataPath = 'http://kitware.github.io/vtk-js/data/volume/headsq.vti';\n        const reader = vtk.IO.Core.vtkHttpDataSetReader.newInstance({ fetchGzip: true });\n\n        //load data from dataPath and render the results by actor and mapper\n        reader.setUrl(dataPath, { loadData: true })\n            .then(() => {\n                const data = reader.getOutputData(0);\n                \n                //compute the range of the data set and set clip plan accordingly\n                const extent = data.getExtent();\n                const spacing = data.getSpacing();\n                const sizeX = extent[1] * spacing[0];\n                const sizeY = extent[3] * spacing[1];\n\n                clipPlanePosition = sizeX / 2;\n\n                const clipPlaneOrigin = [\n                    clipPlanePosition * clipPlaneNormal[0],\n                    clipPlanePosition * clipPlaneNormal[1],\n                    clipPlanePosition * clipPlaneNormal[2],\n                ];\n\n                clipPlane.setNormal(clipPlaneNormal);\n                clipPlane.setOrigin(clipPlaneOrigin);\n\n                //create the mapper and set its property\n                const mapper = vtkVolumeMapper.newInstance();\n                mapper.addClippingPlane(clipPlane);\n                mapper.setInputData(data);\n                mapper.setSampleDistance(1);\n                mapper.setVolumetricScatteringBlending(0);\n                mapper.setLocalAmbientOcclusion(0);\n                mapper.setLAOKernelSize(10);\n                mapper.setLAOKernelRadius(5);\n                mapper.setComputeNormalFromOpacity(true);\n\n                //create actor and set its properties, including gradient opacity, scalar opacity, shade, ambient, diffuse, specular etc.\n                const actor = vtkVolumeActor.newInstance();\n                const ofun = vtkPiecewiseFunction.newInstance();\n                ofun.addPoint(0.0, 0.1);\n                ofun.addPoint(255.0, 1.0);\n                actor.getProperty().setScalarOpacity(0, ofun);\n                actor.getProperty().setInterpolationTypeToLinear();\n                actor.getProperty().setUseGradientOpacity(0, true);\n                actor.getProperty().setGradientOpacityMinimumValue(0, 2);\n                actor.getProperty().setGradientOpacityMinimumOpacity(0, 0.0);\n                actor.getProperty().setGradientOpacityMaximumValue(0, 20);\n                actor.getProperty().setGradientOpacityMaximumOpacity(0, 1.0);\n                actor.getProperty().setScalarOpacityUnitDistance(0, 2.955);\n                actor.getProperty().setShade(true);\n                actor.getProperty().setAmbient(0.3);\n                actor.getProperty().setDiffuse(1);\n                actor.getProperty().setSpecular(1);\n\n                //assign mapper to actor and assign mapper to render\n                actor.setMapper(mapper);\n                renderer.addVolume(actor);\n                renderer.resetCamera();\n                renderWindow.render();\n            });\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 8:\n描述: Loads 3D polydata, writes it to a string using `vtkXMLPolyDataWriter`, reads it back with `vtkXMLPolyDataReader`, and renders it, allowing download of the generated VTP file.\nVTK.js 模块: ['vtk.IO.Core.vtkHttpDataSetReader', 'vtk.IO.XML.vtkXMLPolyDataReader', 'vtk.IO.XML.vtkXMLPolyDataWriter', 'vtk.IO.XML.vtkXMLWriter', 'vtk.Rendering.Core.vtkActor.newInstance', 'vtk.Rendering.Core.vtkMapper.newInstance', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js XMLImagePolyDataWriter</title>\n    <!-- <link rel=\"stylesheet\" href=\"https://kit.fontawesome.com/419a5ebb56.css\" crossorigin=\"anonymous\"> -->\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n\n    <script type=\"text/javascript\" src=\"https://unpkg.com/@babel/polyfill@7.0.0/dist/polyfill.js\"></script>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const mapper = vtk.Rendering.Core.vtkMapper.newInstance();\n        const actor = vtk.Rendering.Core.vtkActor.newInstance();\n        const fullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const httpDataSetReader = vtk.IO.Core.vtkHttpDataSetReader;\n        const xmlPolyDataWriter = vtk.IO.XML.vtkXMLPolyDataWriter;\n        const xmlPolyDataReader = vtk.IO.XML.vtkXMLPolyDataReader;\n        const xmlWriter = vtk.IO.XML.vtkXMLWriter;\n        // Create instances using namespace paths\n        const fullScreenRenderer = fullScreenRenderWindow.newInstance();\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n        const reader = httpDataSetReader.newInstance({ fetchGzip: true });\n\n        const writer = xmlPolyDataWriter.newInstance();\n        writer.setFormat(xmlWriter.FormatTypes.BINARY);\n        writer.setInputConnection(reader.getOutputPort());\n\n        const writerReader = xmlPolyDataReader.newInstance();\n\n        reader.setUrl(`http://kitware.github.io/vtk-js/data/cow.vtp`, { loadData: true }).then(() => {\n            const fileContents = writer.write(reader.getOutputData());\n\n            // Try to read it back.\n            const textEncoder = new TextEncoder();\n            writerReader.parseAsArrayBuffer(textEncoder.encode(fileContents));\n            renderer.resetCamera();\n            renderWindow.render();\n\n            const blob = new Blob([fileContents], { type: 'text/plain' });\n            const a = window.document.createElement('a');\n            a.href = window.URL.createObjectURL(blob, { type: 'text/plain' });\n            a.download = 'cow.vtp';\n            a.text = 'Download';\n            a.style.position = 'absolute';\n            a.style.left = '50%';\n            a.style.bottom = '10px';\n            document.body.appendChild(a);\n            a.style.background = 'white';\n            a.style.padding = '5px';\n        });\n\n        actor.setMapper(mapper);\n\n        mapper.setInputConnection(writerReader.getOutputPort());\n\n        renderer.addActor(actor);\n\n        window.writer = writer;\n        window.writerReader = writerReader;\n        window.mapper = mapper;\n        window.actor = actor;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n\n\n    </script>\n\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 9:\n描述: Loads a 3D volumetric dataset (`headsq.vti`) and extracts an isosurface using `vtkImageMarchingCubes`, with a real-time adjustable iso-value.\n\nVTK.js 模块: ['vtk.Filters.General.vtkImageMarchingCubes.newInstance', 'vtk.IO.Core.vtkHttpDataSetReader.newInstance', 'vtk.Rendering.Core.vtkActor.newInstance', 'vtk.Rendering.Core.vtkMapper.newInstance', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js GCodeReader</title>\n</head>\n\n<body>\n\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const dataPath = 'http://kitware.github.io/vtk-js/data/volume/headsq.vti';\n\n        const fullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n        \n        const controlPanel = `<table>\n        <tr>\n            <td>Iso value</td>\n            <td>\n            <input class='isoValue' type=\"range\" min=\"0.0\" max=\"1.0\" step=\"0.05\" value=\"0.0\" />\n            </td>\n        </tr>\n        </table>`;\n\n        fullScreenRenderWindow.addController(controlPanel);\n\n        const actor = vtk.Rendering.Core.vtkActor.newInstance();\n        const mapper = vtk.Rendering.Core.vtkMapper.newInstance();\n        const marchingCube = vtk.Filters.General.vtkImageMarchingCubes.newInstance({\n            contourValue: 0.0,\n            computeNormals: true,\n            mergePoints: true,\n        });\n\n        actor.setMapper(mapper);\n        mapper.setInputConnection(marchingCube.getOutputPort());\n\n        function updateIsoValue(e) {\n            const isoValue = Number(e.target.value);\n            marchingCube.setContourValue(isoValue);\n            renderWindow.render();\n        }\n\n        const reader = vtk.IO.Core.vtkHttpDataSetReader.newInstance({ fetchGzip: true });\n        marchingCube.setInputConnection(reader.getOutputPort());\n\n        reader\n        .setUrl(dataPath, { loadData: true })\n        .then(() => {\n            const data = reader.getOutputData();\n            const dataRange = data.getPointData().getScalars().getRange();\n            const firstIsoValue = (dataRange[0] + dataRange[1]) / 3;\n\n            const el = document.querySelector('.isoValue');\n            el.setAttribute('min', dataRange[0]);\n            el.setAttribute('max', dataRange[1]);\n            el.setAttribute('value', firstIsoValue);\n            el.addEventListener('input', updateIsoValue);\n\n            marchingCube.setContourValue(firstIsoValue);\n            renderer.addActor(actor);\n            renderer.getActiveCamera().set({ position: [1, 1, 0], viewUp: [0, 0, -1] });\n            renderer.resetCamera();\n            renderWindow.render();\n        });\n\n        window.fullScreen = fullScreenRenderWindow;\n        window.actor = actor;\n        window.mapper = mapper;\n        window.marchingCube = marchingCube;\n\n    </script>\n\n\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 10:\n描述: Loads and visualizes a 3D polygonal data file (`test_cone.vtp`) using `vtkXMLPolyDataReader` and `vtkMapper`.\n\nVTK.js 模块: ['vtk.IO.XML.vtkXMLPolyDataReader', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js loading poly data, need to start by live server</title>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkXMLPolyDataReader = vtk.IO.XML.vtkXMLPolyDataReader;\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n\n        // crete the render window\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // load the vtp data locally\n        const reader = vtkXMLPolyDataReader.newInstance();\n        // set url and load the data\n        reader.setUrl('../datasets/test_cone.vtp').then(() => {\n            reader.loadData().then(() => {\n                // assign data to actor\n                const mapper = vtkMapper.newInstance();\n                console.log(reader.getOutputData(0))\n                mapper.setInputData(reader.getOutputData(0));\n                const actor = vtkActor.newInstance();\n                actor.setMapper(mapper);\n\n                //  adding actor to render and render the data\n                renderer.addActor(actor);\n                renderer.resetCamera();\n                renderWindow.render();\n            });\n        });\n    </script>\n</body>\n\n</html>\n\n\n--------------------------------------------------------------------------------------------------------------\n示例 11:\n描述: Creates a 3D visualization where a plane is rendered using a `vtkStickMapper`. The plane's geometry is generated with a `vtkPlaneSource`, and `vtkCalculator` processes the data to generate custom point attributes ('orientation', 'temperature', 'pressure') which `vtkStickMapper` uses to control the orientation and scaling of the sticks. The visualization is displayed in a full-screen renderer with a dark background. Additionally, UI controls allow adjusting the X and Y resolution of the plane, which dynamically updates the visualization.\n\nVTK.js 模块: ['vtk.Common.DataModel.vtkDataSet.FieldAssociations', 'vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes', 'vtk.Filters.General.vtkCalculator', 'vtk.Filters.Sources.vtkPlaneSource', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkStickMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js StickMapper</title>\n    <link rel=\"stylesheet\" href=\"https://kit.fontawesome.com/419a5ebb56.css\" crossorigin=\"anonymous\">\n    <style>\n        #renderer {\n            width: 100%;\n            height: 600px;\n            background-color: #333;\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js/Sources/Rendering/Profiles/Geometry\"></script>\n    <script src=\"https://unpkg.com/vtk.js/Sources/Rendering/Profiles/Molecule\"></script>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n\n    <script>\n        // Use vtk namespace to reference classes\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPlaneSource = vtk.Filters.Sources.vtkPlaneSource;\n        const vtkStickMapper = vtk.Rendering.Core.vtkStickMapper;\n\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldAssociations;\n\n        const controlPanel = `<table>\n  <tr>\n    <td>X Resolution</td>\n    <td>\n      <input class='xResolution' type=\"range\" min=\"1\" max=\"25\" step=\"1\" value=\"10\" />\n    </td>\n  </tr>\n  <tr>\n    <td>Y Resolution</td>\n    <td>\n      <input class='yResolution' type=\"range\" min=\"1\" max=\"25\" step=\"1\" value=\"10\" />\n    </td>\n  </tr>\n</table>`;\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // ----------------------------------------------------------------------------\n        // Example code\n        // ----------------------------------------------------------------------------\n\n        const planeSource = vtkPlaneSource.newInstance();\n        const simpleFilter = vtkCalculator.newInstance();\n        const mapper = vtkStickMapper.newInstance();\n        const actor = vtkActor.newInstance();\n\n        simpleFilter.setFormula({\n            getArrays: (inputDataSets) => ({\n                input: [{ location: FieldDataTypes.COORDINATE }], // Require point coordinates as input\n                output: [\n                    // Generate two output arrays:\n                    {\n                        location: FieldDataTypes.POINT, // This array will be point-data ...\n                        name: 'orientation', // ... with the given name ...\n                        dataType: 'Float32Array', // ... of this type ...\n                        numberOfComponents: 3, // ... with this many components ...\n                    },\n                    {\n                        location: FieldDataTypes.POINT, // This array will be field data ...\n                        name: 'temperature', // ... with the given name ...\n                        dataType: 'Float32Array', // ... of this type ...\n                        attribute: AttributeTypes.SCALARS, // ... and will be marked as the default scalars.\n                        numberOfComponents: 1, // ... with this many components ...\n                    },\n                    {\n                        location: FieldDataTypes.POINT, // This array will be field data ...\n                        name: 'pressure', // ... with the given name ...\n                        dataType: 'Float32Array', // ... of this type ...\n                        numberOfComponents: 2, // ... with this many components ...\n                    },\n                ],\n            }),\n            evaluate: (arraysIn, arraysOut) => {\n                // Convert in the input arrays of vtkDataArrays into variables\n                // referencing the underlying JavaScript typed-data arrays:\n                const [coords] = arraysIn.map((d) => d.getData());\n                const [orient, temp, press] = arraysOut.map((d) => d.getData());\n\n                // Since we are passed coords as a 3-component array,\n                // loop over all the points and compute the point-data output:\n                for (let i = 0, sz = coords.length / 3; i < sz; ++i) {\n                    orient[i * 3] =\n                        (coords[3 * i] - 0.5) * (coords[3 * i] - 0.5) +\n                        (coords[3 * i + 1] - 0.5) * (coords[3 * i + 1] - 0.5);\n                    orient[i * 3 + 1] =\n                        (coords[3 * i] - 0.5) * (coords[3 * i] - 0.5) +\n                        (coords[3 * i + 1] - 0.5) * (coords[3 * i + 1] - 0.5);\n                    orient[i * 3 + 2] = 1.0;\n\n                    temp[i] = coords[3 * i + 1];\n\n                    press[i * 2] =\n                        (coords[3 * i] * coords[3 * i] +\n                            coords[3 * i + 1] * coords[3 * i + 1]) *\n                        0.05 +\n                        0.05;\n                    press[i * 2 + 1] =\n                        (coords[3 * i] * coords[3 * i] +\n                            coords[3 * i + 1] * coords[3 * i + 1]) *\n                        0.01 +\n                        0.01;\n                }\n                // Mark the output vtkDataArray as modified\n                arraysOut.forEach((x) => x.modified());\n            },\n        });\n\n        // The generated 'temperature' array will become the default scalars, so the plane mapper will color by 'temperature':\n        simpleFilter.setInputConnection(planeSource.getOutputPort());\n\n        mapper.setInputConnection(simpleFilter.getOutputPort());\n\n        mapper.setOrientationArray('orientation');\n        mapper.setScaleArray('pressure');\n\n        actor.setMapper(mapper);\n\n        renderer.addActor(actor);\n        renderer.resetCamera();\n        renderWindow.render();\n\n        // -----------------------------------------------------------\n        // UI control handling\n        // -----------------------------------------------------------\n\n        fullScreenRenderer.addController(controlPanel);\n        ['xResolution', 'yResolution'].forEach((propertyName) => {\n            document.querySelector(`.${propertyName}`).addEventListener('input', (e) => {\n                const value = Number(e.target.value);\n                planeSource.set({ [propertyName]: value });\n                renderWindow.render();\n            });\n        });\n\n        // -----------------------------------------------------------\n        // Make some variables global so that you can inspect and\n        // modify objects in your browser's developer console:\n        // -----------------------------------------------------------\n\n        window.planeSource = planeSource;\n        window.mapper = mapper;\n        window.actor = actor;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 12:\n描述: Visualizes a 3D vector field using `vtkImageStreamline` for streamlines, `vtkOutlineFilter` for data bounds, and seed points, with interactive resolution controls.\n\nVTK.js 模块: ['vtk.Common.Core.vtkDataArray', 'vtk.Common.DataModel.vtkImageData', 'vtk.Filters.General.vtkImageStreamline', 'vtk.Filters.General.vtkOutlineFilter', 'vtk.Filters.Sources.vtkPlaneSource', 'vtk.Rendering.Core.Property', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkMapper', 'vtk.Rendering.Core.vtkProperty.Representation', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance', 'vtk.macro']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js ImageOutlineFilter</title>\n    <!-- <link rel=\"stylesheet\" href=\"https://kit.fontawesome.com/419a5ebb56.css\" crossorigin=\"anonymous\"> -->\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n\n    <script type=\"text/javascript\" src=\"https://unpkg.com/@babel/polyfill@7.0.0/dist/polyfill.js\"></script>\n\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n\n    <script>\n        const vtkOutlineFilter = vtk.Filters.General.vtkOutlineFilter;\n        const vtkPlaneSource = vtk.Filters.Sources.vtkPlaneSource;\n        const vtkImageStreamline = vtk.Filters.General.vtkImageStreamline;\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        console.log(vtk.Rendering.Core.Property);\n\n        const Representation = vtk.Rendering.Core.vtkProperty.Representation;\n        // const Representation = Constants.representation;\n        const vtkDataArray = vtk.Common.Core.vtkDataArray;\n        const vtkImageData = vtk.Common.DataModel.vtkImageData;\n        const macro = vtk.macro;\n\n        // Load control panel HTML\n        const controlPanel = `<table>\n  <tr>\n    <td>X Resolution</td>\n    <td>\n      <input class='xResolution' type=\"range\" min=\"1\" max=\"25\" step=\"1\" value=\"10\" />\n    </td>\n  </tr>\n  <tr>\n    <td>Y Resolution</td>\n    <td>\n      <input class='yResolution' type=\"range\" min=\"1\" max=\"25\" step=\"1\" value=\"10\" />\n    </td>\n  </tr>\n</table>\n`\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // ----------------------------------------------------------------------------\n        // Example code\n        // ----------------------------------------------------------------------------\n\n        function addRepresentation(name, filter, props = {}) {\n            const mapper = vtkMapper.newInstance();\n            mapper.setInputConnection(filter.getOutputPort());\n\n            const actor = vtkActor.newInstance();\n            actor.setMapper(mapper);\n            actor.getProperty().set(props);\n            renderer.addActor(actor);\n\n            window[`${name}Actor`] = actor;\n            window[`${name}Mapper`] = mapper;\n        }\n\n        // ----------------------------------------------------------------------------\n\n        const vecSource = macro.newInstance((publicAPI, model) => {\n            macro.obj(publicAPI, model); // make it an object\n            macro.algo(publicAPI, model, 0, 1); // mixin algorithm code 1 in, 1 out\n            publicAPI.requestData = (inData, outData) => {\n                // implement requestData\n                if (!outData[0]) {\n                    const id = vtkImageData.newInstance();\n                    id.setSpacing(0.1, 0.1, 0.1);\n                    id.setExtent(0, 9, 0, 9, 0, 9);\n                    const dims = [10, 10, 10];\n\n                    const newArray = new Float32Array(3 * dims[0] * dims[1] * dims[2]);\n\n                    let i = 0;\n                    for (let z = 0; z <= 9; z++) {\n                        for (let y = 0; y <= 9; y++) {\n                            for (let x = 0; x <= 9; x++) {\n                                newArray[i++] = 0.1 * x;\n                                const v = 0.1 * y;\n                                newArray[i++] = v * v;\n                                newArray[i++] = 0;\n                            }\n                        }\n                    }\n\n                    const da = vtkDataArray.newInstance({\n                        numberOfComponents: 3,\n                        values: newArray,\n                    });\n                    da.setName('vectors');\n\n                    const cpd = id.getPointData();\n                    cpd.setVectors(da);\n\n                    // Update output\n                    outData[0] = id;\n                }\n            };\n        })();\n\n        const planeSource = vtkPlaneSource.newInstance();\n        planeSource.setOrigin(0.05, 0.05, 0.05);\n        planeSource.setPoint1(0.05, 0.85, 0.05);\n        planeSource.setPoint2(0.05, 0.05, 0.85);\n\n        const sline = vtkImageStreamline.newInstance();\n        sline.setIntegrationStep(0.01);\n        sline.setInputConnection(vecSource.getOutputPort());\n        sline.setInputConnection(planeSource.getOutputPort(), 1);\n\n        const outlineFilter = vtkOutlineFilter.newInstance();\n        outlineFilter.setInputConnection(vecSource.getOutputPort());\n\n        addRepresentation('streamLine', sline, {\n            diffuseColor: [0, 1, 1],\n            lineWidth: 5,\n        });\n        addRepresentation('outline', outlineFilter, {\n            diffuseColor: [1, 0, 0],\n            lineWidth: 3,\n        });\n        addRepresentation('seed', planeSource, {\n            representation: Representation.POINTS,\n            pointSize: 10,\n        });\n\n        // -----------------------------------------------------------\n\n        renderer.resetCamera();\n        renderWindow.render();\n\n        // ----------------------------------------------------------------------------\n        // UI control handling\n        // ----------------------------------------------------------------------------\n\n        fullScreenRenderer.addController(controlPanel);\n\n        ['xResolution', 'yResolution'].forEach((propertyName) => {\n            document.querySelector(`.${propertyName}`).addEventListener('input', (e) => {\n                const value = Number(e.target.value);\n                planeSource.set({ [propertyName]: value });\n                renderWindow.render();\n            });\n        });\n\n        // -----------------------------------------------------------\n        // Make some variables global so that you can inspect and\n        // modify objects in your browser's developer console:\n        // -----------------------------------------------------------\n\n        window.planeSource = planeSource;\n        window.sline = sline;\n        window.outlineFilter = outlineFilter;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n\n\n    </script>\n\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 13:\n描述: Displays multiple interactive 3D objects (cone, sphere, cube, cylinder) in separate, independently styled renderers with animation and layout adjustments.\n\nVTK.js 模块: ['vtk.Filters.Sources.vtkConeSource', 'vtk.Filters.Sources.vtkCubeSource', 'vtk.Filters.Sources.vtkCylinderSource', 'vtk.Filters.Sources.vtkSphereSource', 'vtk.Interaction.Style.vtkInteractorStyleTrackballCamera', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkMapper', 'vtk.Rendering.Core.vtkRenderWindow', 'vtk.Rendering.Core.vtkRenderWindowInteractor', 'vtk.Rendering.Core.vtkRenderer', 'vtk.js', 'vtk.js已经通过某种方式被加载到全局变量vtk中']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js Many Renderers</title>\n    <!-- <link rel=\"stylesheet\" href=\"https://kit.fontawesome.com/419a5ebb56.css\" crossorigin=\"anonymous\"> -->\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n\n    <script type=\"text/javascript\" src=\"https://unpkg.com/@babel/polyfill@7.0.0/dist/polyfill.js\"></script>\n\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n\n    <script>\n        // Assuming vtk.js has been loaded into global variable vtk by some means\n        // For example, by including vtk.js in HTML via <script> tag, or through module loader\n\n        // Use vtk namespace to reference classes\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkConeSource = vtk.Filters.Sources.vtkConeSource;\n        const vtkSphereSource = vtk.Filters.Sources.vtkSphereSource;\n        const vtkCubeSource = vtk.Filters.Sources.vtkCubeSource;\n        const vtkCylinderSource = vtk.Filters.Sources.vtkCylinderSource;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkRenderWindow = vtk.Rendering.Core.vtkRenderWindow;\n        const vtkRenderWindowInteractor = vtk.Rendering.Core.vtkRenderWindowInteractor;\n        const vtkRenderer = vtk.Rendering.Core.vtkRenderer;\n        const vtkInteractorStyleTrackballCamera = vtk.Interaction.Style.vtkInteractorStyleTrackballCamera;\n\n        // ----------------------------------------------------------------------------\n        // Meshes\n\n        //  ------------------------------------------------------------\n        // Meshes\n        // ----------------------------------------------------------------------------\n\n        const meshes = [];\n\n        function addMesh(name, source) {\n            const mapper = vtkMapper.newInstance();\n            mapper.setInputData(source.getOutputData());\n            meshes.push({ name, mapper });\n        }\n\n        addMesh('Cone', vtkConeSource.newInstance());\n        addMesh('Sphere', vtkSphereSource.newInstance());\n        addMesh('Cube', vtkCubeSource.newInstance());\n        addMesh('Cylinder', vtkCylinderSource.newInstance());\n\n        // ----------------------------------------------------------------------------\n        // Properties\n        // ----------------------------------------------------------------------------\n\n        const properties = [\n            {\n                name: '- Red',\n                properties: { color: [1, 0.6, 0.6] },\n            },\n            {\n                name: 'Edge - Red',\n                properties: { edgeVisibility: true, color: [1, 0.6, 0.6] },\n            },\n            {\n                name: '- Blue',\n                properties: { color: [0.6, 0.6, 1] },\n            },\n            {\n                name: 'Edge - Green',\n                properties: { edgeVisibility: true, color: [0.6, 1, 0.6] },\n            },\n            {\n                name: '- Green',\n                properties: { color: [0.6, 1, 0.6] },\n            },\n            {\n                name: 'Edge - Blue',\n                properties: { edgeVisibility: true, color: [0.6, 0.6, 1] },\n            },\n        ];\n\n        // ----------------------------------------------------------------------------\n        // Background colors\n        // ----------------------------------------------------------------------------\n\n        const colors = [\n            [0.2, 0.2, 0.2],\n            [0.4, 0.2, 0.3],\n            [0.2, 0.4, 0.3],\n            [0.6, 0.6, 0.6],\n            [0.2, 0.4, 0.4],\n            [0.3, 0.4, 0.2],\n            [0.3, 0.2, 0.4],\n        ];\n\n        // ----------------------------------------------------------------------------\n        // Single RenderWindow in fullscreen\n        // ----------------------------------------------------------------------------\n\n        const RENDERERS = {};\n\n        const renderWindow = vtkRenderWindow.newInstance();\n        const renderWindowView = renderWindow.newAPISpecificView();\n        renderWindow.addView(renderWindowView);\n\n        const rootContainer = document.createElement('div');\n        rootContainer.style.position = 'fixed';\n        rootContainer.style.zIndex = -1;\n        rootContainer.style.left = 0;\n        rootContainer.style.top = 0;\n        rootContainer.style.pointerEvents = 'none';\n        document.body.appendChild(rootContainer);\n\n        renderWindowView.setContainer(rootContainer);\n\n        const interactor = vtkRenderWindowInteractor.newInstance();\n        interactor.setView(renderWindowView);\n        interactor.initialize();\n        interactor.setInteractorStyle(vtkInteractorStyleTrackballCamera.newInstance());\n\n        function updateViewPort(element, renderer) {\n            const { innerHeight, innerWidth } = window;\n            const { x, y, width, height } = element.getBoundingClientRect();\n            const viewport = [\n                x / innerWidth,\n                1 - (y + height) / innerHeight,\n                (x + width) / innerWidth,\n                1 - y / innerHeight,\n            ];\n            renderer.setViewport(...viewport);\n        }\n\n        function recomputeViewports() {\n            const rendererElems = document.querySelectorAll('.renderer');\n            for (let i = 0; i < rendererElems.length; i++) {\n                const elem = rendererElems[i];\n                const { id } = elem;\n                const renderer = RENDERERS[id];\n                updateViewPort(elem, renderer);\n            }\n            renderWindow.render();\n        }\n\n        function resize() {\n            rootContainer.style.width = `${window.innerWidth}px`;\n            renderWindowView.setSize(window.innerWidth, window.innerHeight);\n            recomputeViewports();\n        }\n\n        new ResizeObserver(resize).observe(document.body);\n        document.addEventListener('scroll', recomputeViewports);\n\n        // ----------------------------------------------------------------------------\n        // Renderers\n        // ----------------------------------------------------------------------------\n\n        let meshIndex = 0;\n        let propertyIndex = 0;\n        let bgIndex = 0;\n        let rendererId = 1;\n\n        function applyStyle(element) {\n            element.classList.add('renderer');\n            element.style.width = '200px';\n            element.style.height = '200px';\n            element.style.margin = '20px';\n            element.style.border = 'solid 1px #333';\n            element.style.display = 'inline-block';\n            element.style.boxSizing = 'border';\n            element.style.textAlign = 'center';\n            element.style.color = 'white';\n            return element;\n        }\n\n        let captureCurrentRenderer = false;\n\n        function setCaptureCurrentRenderer(yn) {\n            captureCurrentRenderer = yn;\n            if (yn && interactor.getCurrentRenderer()) {\n                // fix the current renderer to, well, the current renderer\n                interactor.setCurrentRenderer(interactor.getCurrentRenderer());\n            } else {\n                // remove the fixed current renderer\n                interactor.setCurrentRenderer(null);\n            }\n        }\n\n        function bindInteractor(renderer, el) {\n            // only change the interactor's container if needed\n            if (interactor.getContainer() !== el) {\n                if (interactor.getContainer()) {\n                    interactor.unbindEvents();\n                }\n                if (captureCurrentRenderer) {\n                    interactor.setCurrentRenderer(renderer);\n                }\n                if (el) {\n                    interactor.bindEvents(el);\n                }\n            }\n        }\n\n        function addRenderer() {\n            const mesh = meshes[meshIndex];\n            const prop = properties[propertyIndex];\n            const background = colors[bgIndex];\n            meshIndex = (meshIndex + 1) % meshes.length;\n            propertyIndex = (propertyIndex + 1) % properties.length;\n            bgIndex = (bgIndex + 1) % colors.length;\n\n            const container = applyStyle(document.createElement('div'));\n            container.id = rendererId++;\n            document.body.appendChild(container);\n\n            const actor = vtkActor.newInstance();\n            actor.setMapper(mesh.mapper);\n            actor.getProperty().set(prop.properties);\n            actor.getProperty().setDiffuse(0.9);\n            actor.getProperty().setSpecular(0.2);\n            actor.getProperty().setSpecularPower(30);\n            actor.getProperty().setSpecularColor(1.0, 1.0, 1.0);\n            const renderer = vtkRenderer.newInstance({ background });\n            container.innerHTML = `${mesh.name} ${prop.name}`;\n\n            container.addEventListener('pointerenter', () =>\n                bindInteractor(renderer, container)\n            );\n            container.addEventListener('pointerleave', () => bindInteractor(null, null));\n\n            renderer.addActor(actor);\n            renderWindow.addRenderer(renderer);\n            updateViewPort(container, renderer);\n            renderer.resetCamera();\n\n            // Keep track of renderer\n            RENDERERS[container.id] = renderer;\n        }\n\n        // ----------------------------------------------------------------------------\n        // Fill up page\n        // ----------------------------------------------------------------------------\n\n        const checkbox = document.createElement('input');\n        checkbox.type = 'checkbox';\n        checkbox.name = 'singleRendererCapture';\n        const label = document.createElement('label');\n        label.for = checkbox.name;\n        label.innerText = 'Enable single renderer capture';\n\n        checkbox.addEventListener('input', (ev) => {\n            setCaptureCurrentRenderer(ev.target.checked);\n        });\n\n        document.body.appendChild(checkbox);\n        document.body.appendChild(label);\n        document.body.appendChild(document.createElement('br'));\n\n        for (let i = 0; i < 64; i++) {\n            addRenderer();\n        }\n        resize();\n\n        function updateCamera(renderer) {\n            const camera = renderer.getActiveCamera();\n            camera.azimuth(0.5);\n            renderer.resetCameraClippingRange();\n        }\n\n        function animate() {\n            Object.values(RENDERERS).forEach(updateCamera);\n            renderWindow.render();\n            window.requestAnimationFrame(animate);\n        }\n\n        window.requestAnimationFrame(animate);\n\n        // ----------------------------------------------------------------------------\n        // Globals\n        // ----------------------------------------------------------------------------\n\n        window.rw = renderWindow;\n        window.glrw = renderWindowView;\n        window.renderers = RENDERERS;\n\n\n\n    </script>\n\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 14:\n描述: Loads and visualizes 3D elevation data from a CSV, applying a texture image, using `vtkElevationReader` and `vtkMapper`.\n\nVTK.js 模块: ['vtk.IO.Misc.vtkElevationReader.newInstance', 'vtk.Rendering.Core.vtkActor.newInstance', 'vtk.Rendering.Core.vtkMapper.newInstance', 'vtk.Rendering.Core.vtkTexture.newInstance', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js ElevationReader</title>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n\n    <script type=\"text/javascript\" src=\"https://unpkg.com/@babel/polyfill@7.0.0/dist/polyfill.js\"></script>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n\n\n        const imagePath = 'http://kitware.github.io/vtk-js/data/elevation/dem.jpg';\n        // const imagePath = './dem.jpg'\n        const dataPath = 'http://kitware.github.io/vtk-js/data/elevation/dem.csv';\n        const fullScreenRenderer = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n        const reader = vtk.IO.Misc.vtkElevationReader.newInstance({\n            xSpacing: 0.01568,\n            ySpacing: 0.01568,\n            zScaling: 0.06666,\n        });\n        const mapper = vtk.Rendering.Core.vtkMapper.newInstance();\n        const actor = vtk.Rendering.Core.vtkActor.newInstance();\n\n        mapper.setInputConnection(reader.getOutputPort());\n        actor.setMapper(mapper);\n\n        renderer.addActor(actor);\n        renderer.resetCamera();\n        renderWindow.render();\n\n        // Download and apply Texture\n        const img = new Image();\n        img.src = imagePath;\n        //Add crossorigin=\"anonymous\" to avoid CORS errors\n        img.crossOrigin = \"anonymous\"\n        img.onload = function textureLoaded() {\n            const texture = vtk.Rendering.Core.vtkTexture.newInstance();\n            texture.setInterpolate(true);\n            texture.setImage(img);\n            actor.addTexture(texture);\n            renderWindow.render();\n        };\n\n        // Download elevation and render when ready\n        reader.setUrl(dataPath).then(() => {\n            renderer.resetCamera();\n            renderWindow.render();\n        });\n\n        window.reader = reader;\n        window.mapper = mapper;\n        window.actor = actor;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n\n    </script>\n\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 15:\n描述: Loads a medical image dataset (MHA) and renders it as a 3D volume using `vtkVolumeMapper` with custom color and opacity transfer functions.\n\nVTK.js 模块: ['vtk.Common.DataModel.vtkITKHelper', 'vtk.Common.DataModel.vtkPiecewiseFunction', 'vtk.IO.Core.DataAccessHelper.vtkLiteHttpDataAccessHelper', 'vtk.Rendering.Core.vtkColorTransferFunction', 'vtk.Rendering.Core.vtkVolume', 'vtk.Rendering.Core.vtkVolumeMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js Isosurface Visualization</title>\n    <link rel=\"stylesheet\" href=\"https://kit.fontawesome.com/419a5ebb56.css\" crossorigin=\"anonymous\">\n    <style>\n        #renderer {\n            width: 100%;\n            height: 600px;\n            background-color: #333;\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script src=\"https://unpkg.com/vtk.js/Sources/IO/Core/DataAccessHelper/LiteHttpDataAccessHelper.js\"></script>\n    <script>\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n        const vtkVolume = vtk.Rendering.Core.vtkVolume;\n        const vtkVolumeMapper = vtk.Rendering.Core.vtkVolumeMapper;\n        const vtkITKHelper = vtk.Common.DataModel.vtkITKHelper;\n        // const vtkLiteHttpDataAccessHelper = vtk.IO.Core.DataAccessHelper.vtkLiteHttpDataAccessHelper;\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        const actor = vtkVolume.newInstance();\n        const mapper = vtkVolumeMapper.newInstance();\n        mapper.setSampleDistance(0.7);\n        actor.setMapper(mapper);\n\n        const ctfun = vtkColorTransferFunction.newInstance();\n        ctfun.addRGBPoint(200.0, 0.4, 0.5, 0.0);\n        ctfun.addRGBPoint(2000.0, 1.0, 1.0, 1.0);\n        const ofun = vtkPiecewiseFunction.newInstance();\n        ofun.addPoint(200.0, 0.0);\n        ofun.addPoint(120.0, 0.3);\n        ofun.addPoint(300.0, 0.6);\n        actor.getProperty().setRGBTransferFunction(0, ctfun);\n        actor.getProperty().setScalarOpacity(0, ofun);\n        actor.getProperty().setScalarOpacityUnitDistance(0, 4.5);\n        actor.getProperty().setInterpolationTypeToLinear();\n        actor.getProperty().setUseGradientOpacity(0, true);\n        actor.getProperty().setGradientOpacityMinimumValue(0, 15);\n        actor.getProperty().setGradientOpacityMinimumOpacity(0, 0.0);\n        actor.getProperty().setGradientOpacityMaximumValue(0, 100);\n        actor.getProperty().setGradientOpacityMaximumOpacity(0, 1.0);\n        actor.getProperty().setShade(true);\n        actor.getProperty().setAmbient(0.2);\n        actor.getProperty().setDiffuse(0.7);\n        actor.getProperty().setSpecular(0.3);\n        actor.getProperty().setSpecularPower(8.0);\n\n        // ----------------------------------------------------------------------------\n        // Example code\n        // ----------------------------------------------------------------------------\n\n        async function update() {\n            const volumeArrayBuffer = await LiteHttpDataAccessHelper.fetchBinary(\n                `https://data.kitware.com/api/v1/file/5d2a36ff877dfcc902fae6d9/download`\n            );\n\n            // Load the itk-wasm ESM module dynamically for the example.\n            // This can also go in the HTML <head>.\n            // Or `npm install @itk-wasm/image-io` and import it directly.\n            const { readImage } = await import(\n    // eslint-disable-next-line import/no-unresolved, import/extensions\n    /* webpackIgnore: true */ 'https://cdn.jsdelivr.net/npm/@itk-wasm/image-io@1.1.0/dist/bundle/index-worker-embedded.min.js'\n            );\n\n            const { image: itkImage, webWorker } = await readImage({\n                data: new Uint8Array(volumeArrayBuffer),\n                path: 'knee.mha',\n            });\n            // Optionally terminate the web worker when it is no longer needed\n            webWorker.terminate();\n\n            const vtkImage = vtkITKHelper.convertItkToVtkImage(itkImage);\n\n            mapper.setInputData(vtkImage);\n            renderer.addVolume(actor);\n            renderer.resetCamera();\n            renderer.getActiveCamera().zoom(1.5);\n            renderer.getActiveCamera().elevation(70);\n            renderer.updateLightsGeometryToFollowCamera();\n            renderWindow.render();\n        }\n        update();\n\n        // -----------------------------------------------------------\n        // Make some variables global so that you can inspect and\n        // modify objects in your browser's developer console:\n        // -----------------------------------------------------------\n\n        window.mapper = mapper;\n        window.actor = actor;\n        window.ctfun = ctfun;\n        window.ofun = ofun;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 16:\n描述: Visualizes a 3D sphere generated by `vtkSphereSource` and rendered with `vtkSphereMapper`.\n\nVTK.js 模块: ['vtk.Filters.Sources.vtkSphereSource', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkSphereMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n</head>\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkSphereSource = vtk.Filters.Sources.vtkSphereSource;\n        const vtkSphereMapper = vtk.Rendering.Core.vtkSphereMapper;\n        //if we just use the vtkMapper, the results are volume rendering results\n        \n        //creating rendering window\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n        const mapper = vtkSphereMapper.newInstance();\n        const actor = vtkActor.newInstance();\n        \n        //creating sphereSource properties\n        //default parameter will be used if we do not configure sphere sources    \n        const sphereSource = vtkSphereSource.newInstance();\n\n        // adding parameters to mapper\n        // actor.setRadius(0.1);\n        mapper.setInputConnection(sphereSource.getOutputPort());\n\n        // adding sphere mapper to render window\n        actor.setMapper(mapper);\n        renderer.addActor(actor);\n        renderer.resetCamera();\n        renderWindow.render();\n    </script>\n</body>\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 17:\n描述: This code visualizes a 3D plane colored by a mathematical function, using `vtkCalculator` for scalar values and `vtkMapper` for coloring.\n\nVTK.js 模块: ['vtk.Common.Core.vtkPoints', 'vtk.Common.DataModel.vtkDataSet.FieldDataTypes', 'vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes', 'vtk.Common.DataModel.vtkPolyData', 'vtk.Filters.General.vtkCalculator', 'vtk.Filters.Sources.vtkPlaneSource', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        // using vtk namespace\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPlaneSource = vtk.Filters.Sources.vtkPlaneSource;\n        const vtkPolyData = vtk.Common.DataModel.vtkPolyData;\n        const vtkPoints = vtk.Common.Core.vtkPoints;\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldDataTypes;\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // setting vtkCalculator and set formula\n\n        const simpleFilter = vtkCalculator.newInstance();\n\n        simpleFilter.setFormulaSimple(\n            FieldDataTypes.POINT, // Generate an output array defined over points.\n            [], // We don't request any point-data arrays because point coordinates are made available by default.\n            'outputArray', // Name the output array \n            (x) => (x[0] - 0.5) * (x[0] - 0.5) + (x[1] - 0.5) * (x[1] - 0.5) + 0.125\n        ); \n\n        //using plane source to generate a poly data which can be rendered by vtkActor\n        const planeSource = vtkPlaneSource.newInstance({\n            xResolution: 25,\n            yResolution: 25,\n        });\n\n        const sourceData = planeSource.getOutputData();\n\n        simpleFilter.setInputData(sourceData);\n        const planeActor = vtkActor.newInstance();\n        const planeMapper = vtkMapper.newInstance();\n        planeMapper.setInputData(simpleFilter.getOutputData());\n        planeMapper.setColorByArrayName('outputArray'); \n\n        planeMapper.setScalarModeToUsePointFieldData();   \n        planeActor.setMapper(planeMapper);\n        planeActor.getProperty().setEdgeVisibility(true);\n\n        renderer.addActor(planeActor);\n        renderer.resetCamera();\n        renderWindow.render();\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 18:\n描述: Generates a plane and uses `vtkCalculator` to create custom point data ('orientation', 'temperature', 'pressure'), which `vtkStickMapper` could use for rendering (currently not fully connected).\n\nVTK.js 模块: ['vtk.Common.DataModel.vtkDataSet.FieldAssociations', 'vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes', 'vtk.Filters.General.vtkCalculator', 'vtk.Filters.Sources.vtkPlaneSource', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkStickMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n\n    <script>\n        // Use vtk namespace to reference classes\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPlaneSource = vtk.Filters.Sources.vtkPlaneSource;\n        const vtkStickMapper = vtk.Rendering.Core.vtkStickMapper;\n\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldAssociations;\n\n        const controlPanel = `<table>\n  <tr>\n    <td>X Resolution</td>\n    <td>\n      <input class='xResolution' type=\"range\" min=\"1\" max=\"25\" step=\"1\" value=\"10\" />\n    </td>\n  </tr>\n  <tr>\n    <td>Y Resolution</td>\n    <td>\n      <input class='yResolution' type=\"range\" min=\"1\" max=\"25\" step=\"1\" value=\"10\" />\n    </td>\n  </tr>\n</table>`;\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // ----------------------------------------------------------------------------\n        // Example code\n        // ----------------------------------------------------------------------------\n\n        const planeSource = vtkPlaneSource.newInstance({\n            xResolution: 25,\n            yResolution: 25,\n        });\n\n\n        console.log(planeSource.getOutputData().toJSON());\n\n        const simpleFilter = vtkCalculator.newInstance();\n        const mapper = vtkStickMapper.newInstance();\n        const actor = vtkActor.newInstance();\n\n        simpleFilter.setFormula({\n            getArrays: (inputDataSets) => ({\n                input: [{ location: FieldDataTypes.COORDINATE }], // Require point coordinates as input\n                output: [\n                    // Generate two output arrays:\n                    {\n                        location: FieldDataTypes.POINT, // This array will be point-data ...\n                        name: 'orientation', // ... with the given name ...\n                        dataType: 'Float32Array', // ... of this type ...\n                        numberOfComponents: 3, // ... with this many components ...\n                    },\n                    {\n                        location: FieldDataTypes.POINT, // This array will be field data ...\n                        name: 'temperature', // ... with the given name ...\n                        dataType: 'Float32Array', // ... of this type ...\n                        attribute: AttributeTypes.SCALARS, // ... and will be marked as the default scalars.\n                        numberOfComponents: 1, // ... with this many components ...\n                    },\n                    {\n                        location: FieldDataTypes.POINT, // This array will be field data ...\n                        name: 'pressure', // ... with the given name ...\n                        dataType: 'Float32Array', // ... of this type ...\n                        numberOfComponents: 2, // ... with this many components ...\n                    },\n                ],\n            }),\n            evaluate: (arraysIn, arraysOut) => {\n                // Convert in the input arrays of vtkDataArrays into variables\n                // referencing the underlying JavaScript typed-data arrays:\n                // array in is null here?\n                console.log(\"arraysIn:\", arraysIn());\n                const [coords] = arraysIn.map((d) => d.getData());\n                const [orient, temp, press] = arraysOut.map((d) => d.getData());\n\n                // Since we are passed coords as a 3-component array,\n                // loop over all the points and compute the point-data output:\n                for (let i = 0, sz = coords.length / 3; i < sz; ++i) {\n                    orient[i * 3] =\n                        (coords[3 * i] - 0.5) * (coords[3 * i] - 0.5) +\n                        (coords[3 * i + 1] - 0.5) * (coords[3 * i + 1] - 0.5);\n                    orient[i * 3 + 1] =\n                        (coords[3 * i] - 0.5) * (coords[3 * i] - 0.5) +\n                        (coords[3 * i + 1] - 0.5) * (coords[3 * i + 1] - 0.5);\n                    orient[i * 3 + 2] = 1.0;\n\n                    temp[i] = coords[3 * i + 1];\n\n                    press[i * 2] =\n                        (coords[3 * i] * coords[3 * i] +\n                            coords[3 * i + 1] * coords[3 * i + 1]) *\n                        0.05 +\n                        0.05;\n                    press[i * 2 + 1] =\n                        (coords[3 * i] * coords[3 * i] +\n                            coords[3 * i + 1] * coords[3 * i + 1]) *\n                        0.01 +\n                        0.01;\n                }\n                // Mark the output vtkDataArray as modified\n                arraysOut.forEach((x) => x.modified());\n            },\n        });\n\n        // The generated 'temperature' array will become the default scalars\n        // so the plane mapper will color by 'temperature':\n        simpleFilter.setInputData(planeSource.getOutputData());\n        simpleFilter.update();\n        concole.log(simpleFilter.getOutputData());\n\n        //mapper.setInputConnection(simpleFilter.getOutputPort());\n\n        //mapper.setOrientationArray('orientation');\n        //mapper.setScaleArray('pressure');\n\n        //actor.setMapper(mapper);\n\n       // renderer.addActor(actor);\n       // renderer.resetCamera();\n        //renderWindow.render();\n\n        // -----------------------------------------------------------\n        // UI control handling\n        // -----------------------------------------------------------\n\n        // fullScreenRenderer.addController(controlPanel);\n        // ['xResolution', 'yResolution'].forEach((propertyName) => {\n        //     document.querySelector(`.${propertyName}`).addEventListener('input', (e) => {\n        //         const value = Number(e.target.value);\n        //         console.log(\"propertyName\",propertyName);\n        //         console.log(\"value\",value);\n        //         planeSource.set({ [propertyName]: value });\n        //         renderWindow.render();\n        //     });\n        // });\n\n        // -----------------------------------------------------------\n        // Make some variables global so that you can inspect and\n        // modify objects in your browser's developer console:\n        // -----------------------------------------------------------\n\n        window.planeSource = planeSource;\n        window.mapper = mapper;\n        window.actor = actor;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 19:\n描述: Loads and visualizes a 3D model (VTP format) from a remote URL using `vtkHttpDataSetReader` with gzip support.\n\nVTK.js 模块: ['vtk.IO.Core.DataAccessHelper.HttpDataAccessHelper', 'vtk.IO.Core.vtkHttpDataSetReader', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow', 'vtk.Rendering.OpenGL.Profiles.Geometry']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js IO-HttpDataSetReader</title>\n</head>\n\n<body>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const data_path = 'http://kitware.github.io/vtk-js/data/cow.vtp'\n        const vtkHttpDataSetReader = vtk.IO.Core.vtkHttpDataSetReader;\n        // const vtkGeometry = vtk.Rendering.OpenGL.Profiles.Geometry\n\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkActor = vtk.Rendering.Core.vtkActor\n        const vtkMapper = vtk.Rendering.Core.vtkMapper\n\n        // Force the loading of HttpDataAccessHelper to support gzip decompression\n        const vtkHttpDataAccessHelper = vtk.IO.Core.DataAccessHelper.HttpDataAccessHelper\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance();\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // ----------------------------------------------------------------------------\n        // Example code\n        // ----------------------------------------------------------------------------\n        // Server is not sending the .gz and with the compress header\n        // Need to fetch the true file name and uncompress it locally\n        // ----------------------------------------------------------------------------\n\n        const reader = vtkHttpDataSetReader.newInstance({ fetchGzip: true });\n        reader.setUrl(data_path).then(() => {\n            reader.loadData().then(() => {\n                renderer.resetCamera();\n                renderWindow.render();\n            });\n        });\n\n        const mapper = vtkMapper.newInstance();\n        mapper.setInputConnection(reader.getOutputPort());\n\n        const actor = vtkActor.newInstance();\n        actor.setMapper(mapper);\n\n        renderer.addActor(actor);\n\n        // -----------------------------------------------------------\n        // Make some variables global so that you can inspect and\n        // modify objects in your browser's developer console:\n        // -----------------------------------------------------------\n\n        // global.source = reader;\n        // global.mapper = mapper;\n        // global.actor = actor;\n        // global.renderer = renderer;\n        // global.renderWindow = renderWindow;\n\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 20:\n描述: Visualizes a 3D sphere by generating a scalar field with `vtkSampleFunction` and extracting an isosurface using `vtkImageMarchingCubes`.\nVTK.js 模块: ['vtk.Common.DataModel.vtkSphere', 'vtk.Filters.General.vtkImageMarchingCubes', 'vtk.Imaging.Hybrid.vtkSampleFunction', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n</head>\n\n<body>\n    <script src=\"https://unpkg.com/vtk.js@32.6.0/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkImageMarchingCubes = vtk.Filters.General.vtkImageMarchingCubes;\n\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        const mCubes = vtkImageMarchingCubes.newInstance({ contourValue: 0.1 });\n        \n        //using the sphere function and sample function to create the source code\n        const vtkSphere = vtk.Common.DataModel.vtkSphere;\n        const vtkSampleFunction = vtk.Imaging.Hybrid.vtkSampleFunction;\n        const sphere = vtkSphere.newInstance({ center: [0.0, 0.0, 0.0], radius: 0.5 });\n        const sample = vtkSampleFunction.newInstance({\n            implicitFunction: sphere,\n            sampleDimensions: [50, 50, 50],\n            modelBounds: [-0.5, 0.5, -0.5, 0.5, -0.5, 0.5],\n        });\n\n        //connecting actor with render\n        const actor = vtkActor.newInstance();\n        renderer.addActor(actor);\n        \n        //connecting mapper with actor\n        const mapper = vtkMapper.newInstance();\n        actor.setMapper(mapper);\n\n        // Connect the pipeline proper\n        mCubes.setInputConnection(sample.getOutputPort());\n        mapper.setInputConnection(mCubes.getOutputPort());\n\n        renderer.resetCamera();\n        renderWindow.render();\n\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 21:\n描述: Creates a 3D visualization by sampling an implicit boolean function and extracting contour lines with `vtkImageMarchingSquares`.\n\nVTK.js 模块: ['vtk.Common.DataModel.vtkImplicitBoolean', 'vtk.Common.DataModel.vtkPlane', 'vtk.Filters.General.vtkImageMarchingSquares', 'vtk.Filters.Sources.vtkSphereSource', 'vtk.Imaging.Hybrid.vtkSampleFunction', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"UTF-8\">\n</head>\n\n<body>\n  <div id=\"renderer\"></div>\n  <script src=\"https://unpkg.com/vtk.js\"></script>\n  <script>\n    const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n    const vtkActor = vtk.Rendering.Core.vtkActor;\n    const vtkSphereSource = vtk.Filters.Sources.vtkSphereSource;\n    const vtkMapper = vtk.Rendering.Core.vtkMapper;\n    const vtkImageMarchingSquares = vtk.Filters.General.vtkImageMarchingSquares;\n\n    const vtkPlane = vtk.Common.DataModel.vtkPlane;\n    const vtkImplicitBoolean = vtk.Common.DataModel.vtkImplicitBoolean;\n    const vtkSampleFunction = vtk.Imaging.Hybrid.vtkSampleFunction;\n\n    //const sphere = vtkSphereSource.newInstance({ center: [-2.5, 0.0, 0.0], radius: 0.5 });\n\n    const plane = vtkPlane.newInstance({ origin: [0, 0, 0], normal: [0, 1, 0] });\n\n    const { Operation } = vtkImplicitBoolean;\n\n    const impBool = vtkImplicitBoolean.newInstance({\n      operation: Operation.UNION,\n      functions: [plane],\n    });\n\n    const sample = vtkSampleFunction.newInstance({\n      implicitFunction: impBool,\n      sampleDimensions: [5, 3, 3],\n      modelBounds: [-5.0, 5.0, -1.0, 1.0, -1.0, 1.0],\n    });\n\n    ms = vtkImageMarchingSquares.newInstance();\n    //connect the sphere filter with the marchingsqures\n    ms.setInputConnection(sample.getOutputPort())\n\n    const mapper = vtkMapper.newInstance();\n    mapper.setInputConnection(ms.getOutputPort());\n\n    const actor = vtkActor.newInstance();\n    actor.setMapper(mapper);\n\n\n    // adding actor into the scene\n    const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n    const renderer = fullScreenRenderer.getRenderer();\n    const renderWindow = fullScreenRenderer.getRenderWindow();\n\n    // Add actor to renderer\n    renderer.addActor(actor);\n\n    // Reset camera and start rendering\n    renderer.resetCamera();\n    renderWindow.render();\n\n  </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 22:\n描述: Visualizes a 3D plane with glyphs (e.g., cones) whose scale and orientation are based on scalar and vector data, using `vtkGlyph3DMapper` and `vtkCalculator`.\n\nVTK.js 模块: ['vtk.Common.DataModel.vtkDataSet.FieldAssociations', 'vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes', 'vtk.Filters.General.vtkCalculator', 'vtk.Filters.Sources.vtkConeSource', 'vtk.Filters.Sources.vtkPlaneSource', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkGlyph3DMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtkjs- Rendering-GlyphMapper</title>\n</head>\n\n\n\n<body>\n\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n\n    <script>\n        // Assuming vtk object is properly imported and available in global environment, proceed with corresponding assignments\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPlaneSource = vtk.Filters.Sources.vtkPlaneSource;\n        const vtkConeSource = vtk.Filters.Sources.vtkConeSource;\n        const vtkGlyph3DMapper = vtk.Rendering.Core.vtkGlyph3DMapper;\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldAssociations;\n        const controlPanel = `<table>\n  <tr>\n    <td>X Resolution</td>\n    <td>\n      <input class='xResolution' type=\"range\" min=\"1\" max=\"25\" step=\"1\" value=\"10\" />\n    </td>\n  </tr>\n  <tr>\n    <td>Y Resolution</td>\n    <td>\n      <input class='yResolution' type=\"range\" min=\"1\" max=\"25\" step=\"1\" value=\"10\" />\n    </td>\n  </tr>\n</table>\n`\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // ----------------------------------------------------------------------------\n        // Example code\n        // ----------------------------------------------------------------------------\n\n        const planeSource = vtkPlaneSource.newInstance();\n        const simpleFilter = vtkCalculator.newInstance();\n        const mapper = vtkGlyph3DMapper.newInstance();\n        const actor = vtkActor.newInstance();\n\n        simpleFilter.setFormula({\n            getArrays: (inputDataSets) => ({\n                input: [{ location: FieldDataTypes.COORDINATE }], // Require point coordinates as input\n                output: [\n                    // Generate two output arrays:\n                    {\n                        location: FieldDataTypes.POINT, // This array will be point-data...\n                        name: 'pressure', //... with the given name...\n                        dataType: 'Float32Array', //... of this type...\n                        numberOfComponents: 3, //... with this many components...\n                    },\n                    {\n                        location: FieldDataTypes.POINT, // This array will be field data...\n                        name: 'temperature', //... with the given name...\n                        dataType: 'Float32Array', //... of this type...\n                        attribute: AttributeTypes.SCALARS, //... and will be marked as the default scalars.\n                        numberOfComponents: 1, //... with this many components...\n                    },\n                ],\n            }),\n            evaluate: (arraysIn, arraysOut) => {\n                // Convert in the input arrays of vtkDataArrays into variables\n                // referencing the underlying JavaScript typed-data arrays:\n                const [coords] = arraysIn.map((d) => d.getData());\n                const [press, temp] = arraysOut.map((d) => d.getData());\n\n                // Since we are passed coords as a 3-component array,\n                // loop over all the points and compute the point-data output:\n                for (let i = 0, sz = coords.length / 3; i < sz; ++i) {\n                    press[i * 3] = (coords[3 * i] - 0.5) * (coords[3 * i] - 0.5);\n                    press[i * 3 + 1] =\n                        ((coords[3 * i + 1] - 0.5) * (coords[3 * i + 1] - 0.5) + 0.125) * 0.1;\n                    press[i * 3 + 2] =\n                        ((coords[3 * i] - 0.5) * (coords[3 * i] - 0.5) +\n                            (coords[3 * i + 1] - 0.5) * (coords[3 * i + 1] - 0.5) +\n                            0.125) *\n                        0.1;\n                    temp[i] = coords[3 * i + 1] * 0.1;\n                }\n\n                // Mark the output vtkDataArray as modified\n                arraysOut.forEach((x) => x.modified());\n            },\n        });\n\n\n        // console.log(\"planeSource\", planeSource.getOutputPort)\n        // The generated 'temperature' array will become the default scalars, so the plane mapper will color by 'temperature':\n        simpleFilter.setInputConnection(planeSource.getOutputPort());\n\n        mapper.setInputConnection(simpleFilter.getOutputPort(), 0);\n\n        const coneSource = vtkConeSource.newInstance();\n        coneSource.setResolution(12);\n        mapper.setInputConnection(coneSource.getOutputPort(), 1);\n        mapper.setOrientationArray('pressure');\n        mapper.setScalarRange(0.0, 0.1);\n\n        actor.setMapper(mapper);\n\n        renderer.addActor(actor);\n        renderer.resetCamera();\n        renderWindow.render();\n\n        // -----------------------------------------------------------\n        // UI control handling\n        // -----------------------------------------------------------\n\n        fullScreenRenderer.addController(controlPanel);\n        ['xResolution', 'yResolution'].forEach((propertyName) => {\n            document.querySelector(`.${propertyName}`).addEventListener('input', (e) => {\n                const value = Number(e.target.value);\n                planeSource.set({ [propertyName]: value });\n                renderWindow.render();\n            });\n        });\n\n        // -----------------------------------------------------------\n        // Make some variables global so that you can inspect and\n        // modify objects in your browser's developer console:\n        // -----------------------------------------------------------\n\n        window.planeSource = planeSource;\n        window.mapper = mapper;\n        window.actor = actor;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n    </script>\n\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 23:\n描述: Loads and renders a 3D OBJ model with its associated MTL materials using `vtkOBJReader` and `vtkMTLReader`, allowing mesh part visibility toggling.\n\nVTK.js 模块: ['vtk.IO.Misc.vtkMTLReader', 'vtk.IO.Misc.vtkOBJReader', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js OBJReader</title>\n</head>\n\n<body>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkMTLReader = vtk.IO.Misc.vtkMTLReader;\n        const vtkOBJReader = vtk.IO.Misc.vtkOBJReader;\n        const OBJPath = 'http://kitware.github.io/vtk-js/data/obj/space-shuttle-orbiter/space-shuttle-orbiter.obj';\n        const MTLPath = 'http://kitware.github.io/vtk-js/data/obj/space-shuttle-orbiter/space-shuttle-orbiter.mtl';\n        const fileName = 'space-shuttle-orbiter';\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({\n            background: [0.5, 0.5, 0.5],\n        });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        const resetCamera = renderer.resetCamera;\n        const render = renderWindow.render;\n\n        // ----------------------------------------------------------------------------\n        // Example code\n        // ----------------------------------------------------------------------------\n\n        const reader = vtkOBJReader.newInstance({ splitMode: 'usemtl' });\n\n        const materialsReader = vtkMTLReader.newInstance();\n        const scene = [];\n\n        function onClick(event) {\n            const el = event.target;\n            const index = Number(el.dataset.index);\n            const actor = scene[index].actor;\n            const visibility = actor.getVisibility();\n\n            actor.setVisibility(!visibility);\n            if (visibility) {\n                el.classList.remove('visible');\n            } else {\n                el.classList.add('visible');\n            }\n            render();\n        }\n\n        materialsReader\n            .setUrl(MTLPath)\n            .then(() => {\n                reader\n                    .setUrl(OBJPath)\n                    .then(() => {\n                        const size = reader.getNumberOfOutputPorts();\n                        for (let i = 0; i < size; i++) {\n                            const polydata = reader.getOutputData(i);\n                            const name = polydata.get('name').name;\n                            const mapper = vtkMapper.newInstance();\n                            const actor = vtkActor.newInstance();\n\n                            actor.setMapper(mapper);\n                            mapper.setInputData(polydata);\n                            //TODO, there are tainted canvases issues after using materials\n                            //materialsReader.applyMaterialToActor(name, actor);\n                            renderer.addActor(actor);\n\n                            scene.push({ name, polydata, mapper, actor });\n                        }\n                        resetCamera();\n                        render();\n\n                        // Build control ui\n                        const htmlBuffer = [\n                            '<style>.visible { font-weight: bold; } .click { cursor: pointer; min-width: 150px;}</style>',\n                        ];\n                        scene.forEach((item, idx) => {\n                            htmlBuffer.push(\n                                `<div class=\"click visible\" data-index=\"${idx}\">${item.name}</div>`\n                            );\n                        });\n\n                        fullScreenRenderer.addController(htmlBuffer.join('\\n'));\n                        const nodes = document.querySelectorAll('.click');\n                        for (let i = 0; i < nodes.length; i++) {\n                            const el = nodes[i];\n                            el.onclick = onClick;\n                        }\n                    });\n            });\n\n        // -----------------------------------------------------------\n        // Make some variables global so that you can inspect and\n        // modify objects in your browser's developer console:\n        // -----------------------------------------------------------\n\n        window.reader = reader;\n        window.materialsReader = materialsReader;\n        window.scene = scene;\n        window.fullScreenRenderer = fullScreenRenderer;\n    </script>\n</body>\n\n</html>\n\n            ",
    "status": "success"
  },
  {
    "index": 2,
    "original_query": "Generate an HTML page using vtk.js to visualize the Deepwater dataset with isosurface rendering.\n\nLoad the dataset from: http://127.0.0.1:5000/dataset/deepwater.vti\n\nCompute velocity magnitude from arrays v02 and v03; if not available, use prs as the scalar\n\nGenerate an isosurface at the mid-value of the scalar range\n\nUse a blue → white → red color map spanning the scalar range (min to max)\n\nSet the isosurface to fully opaque with smooth shading\n\nAdd an XYZ orientation marker in the bottom-right corner",
    "splited_queries": [
      {
        "description": "Data Loading — Load the dataset from 'http://127.0.0.1:5000/dataset/deepwater.vti' using vtkXMLImageDataReader."
      },
      {
        "description": "Data Processing — Compute the velocity magnitude from arrays 'v02' and 'v03' using vtkCalculator; if these arrays are not available, use 'prs' as the scalar field."
      },
      {
        "description": "Isosurface Generation — Generate an isosurface at the mid-value of the scalar range using vtkImageMarchingCubes."
      },
      {
        "description": "Color Mapping — Apply a blue → white → red color map spanning the full scalar range (min to max) using vtkColorTransferFunction and vtkMapper."
      },
      {
        "description": "Surface Rendering — Set the isosurface to fully opaque with smooth shading using vtkMapper and appropriate property settings."
      },
      {
        "description": "UI Components — Add an XYZ orientation marker in the bottom-right corner of the render window using vtkOrientationMarkerWidget."
      },
      {
        "description": "Rendering — Configure the render window, renderer, and interactor to display the isosurface with the orientation marker."
      }
    ],
    "final_prompt": "\n    Generate only the HTML code without any additional text or markdown formatting.\n    User Requirements:\n    Generate an HTML page using vtk.js to visualize the Deepwater dataset with isosurface rendering.\n\nLoad the dataset from: http://127.0.0.1:5000/dataset/deepwater.vti\n\nCompute velocity magnitude from arrays v02 and v03; if not available, use prs as the scalar\n\nGenerate an isosurface at the mid-value of the scalar range\n\nUse a blue → white → red color map spanning the scalar range (min to max)\n\nSet the isosurface to fully opaque with smooth shading\n\nAdd an XYZ orientation marker in the bottom-right corner\n\n    Relevant VTK.js Examples:\n    示例 1:\n描述: Loads a 3D volumetric dataset (`headsq.vti`) and extracts an isosurface using `vtkImageMarchingCubes`, with a real-time adjustable iso-value.\n\nVTK.js 模块: ['vtk.Filters.General.vtkImageMarchingCubes.newInstance', 'vtk.IO.Core.vtkHttpDataSetReader.newInstance', 'vtk.Rendering.Core.vtkActor.newInstance', 'vtk.Rendering.Core.vtkMapper.newInstance', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js GCodeReader</title>\n</head>\n\n<body>\n\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const dataPath = 'http://kitware.github.io/vtk-js/data/volume/headsq.vti';\n\n        const fullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n        \n        const controlPanel = `<table>\n        <tr>\n            <td>Iso value</td>\n            <td>\n            <input class='isoValue' type=\"range\" min=\"0.0\" max=\"1.0\" step=\"0.05\" value=\"0.0\" />\n            </td>\n        </tr>\n        </table>`;\n\n        fullScreenRenderWindow.addController(controlPanel);\n\n        const actor = vtk.Rendering.Core.vtkActor.newInstance();\n        const mapper = vtk.Rendering.Core.vtkMapper.newInstance();\n        const marchingCube = vtk.Filters.General.vtkImageMarchingCubes.newInstance({\n            contourValue: 0.0,\n            computeNormals: true,\n            mergePoints: true,\n        });\n\n        actor.setMapper(mapper);\n        mapper.setInputConnection(marchingCube.getOutputPort());\n\n        function updateIsoValue(e) {\n            const isoValue = Number(e.target.value);\n            marchingCube.setContourValue(isoValue);\n            renderWindow.render();\n        }\n\n        const reader = vtk.IO.Core.vtkHttpDataSetReader.newInstance({ fetchGzip: true });\n        marchingCube.setInputConnection(reader.getOutputPort());\n\n        reader\n        .setUrl(dataPath, { loadData: true })\n        .then(() => {\n            const data = reader.getOutputData();\n            const dataRange = data.getPointData().getScalars().getRange();\n            const firstIsoValue = (dataRange[0] + dataRange[1]) / 3;\n\n            const el = document.querySelector('.isoValue');\n            el.setAttribute('min', dataRange[0]);\n            el.setAttribute('max', dataRange[1]);\n            el.setAttribute('value', firstIsoValue);\n            el.addEventListener('input', updateIsoValue);\n\n            marchingCube.setContourValue(firstIsoValue);\n            renderer.addActor(actor);\n            renderer.getActiveCamera().set({ position: [1, 1, 0], viewUp: [0, 0, -1] });\n            renderer.resetCamera();\n            renderWindow.render();\n        });\n\n        window.fullScreen = fullScreenRenderWindow;\n        window.actor = actor;\n        window.mapper = mapper;\n        window.marchingCube = marchingCube;\n\n    </script>\n\n\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 2:\n描述: Visualizes a 3D sphere by generating a scalar field with `vtkSampleFunction` and extracting an isosurface using `vtkImageMarchingCubes`.\nVTK.js 模块: ['vtk.Filters.General.vtkImageMarchingCubes', 'vtk.Common.DataModel.vtkSphere', 'vtk.Imaging.Hybrid.vtkSampleFunction', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n</head>\n\n<body>\n    <script src=\"https://unpkg.com/vtk.js@32.6.0/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkImageMarchingCubes = vtk.Filters.General.vtkImageMarchingCubes;\n\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        const mCubes = vtkImageMarchingCubes.newInstance({ contourValue: 0.1 });\n        \n        //using the sphere function and sample function to create the source code\n        const vtkSphere = vtk.Common.DataModel.vtkSphere;\n        const vtkSampleFunction = vtk.Imaging.Hybrid.vtkSampleFunction;\n        const sphere = vtkSphere.newInstance({ center: [0.0, 0.0, 0.0], radius: 0.5 });\n        const sample = vtkSampleFunction.newInstance({\n            implicitFunction: sphere,\n            sampleDimensions: [50, 50, 50],\n            modelBounds: [-0.5, 0.5, -0.5, 0.5, -0.5, 0.5],\n        });\n\n        //connecting actor with render\n        const actor = vtkActor.newInstance();\n        renderer.addActor(actor);\n        \n        //connecting mapper with actor\n        const mapper = vtkMapper.newInstance();\n        actor.setMapper(mapper);\n\n        // Connect the pipeline proper\n        mCubes.setInputConnection(sample.getOutputPort());\n        mapper.setInputConnection(mCubes.getOutputPort());\n\n        renderer.resetCamera();\n        renderWindow.render();\n\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 3:\n描述: Loads 3D volume data, writes it to a binary XML format using `vtkXMLImageDataWriter`, reads it back with `vtkXMLImageDataReader`, and visualizes it\nVTK.js 模块: ['vtk.IO.XML.vtkXMLImageDataReader.newInstance', 'vtk.Common.DataModel.vtkPiecewiseFunction.newInstance', 'vtk.IO.Core.vtkHttpDataSetReader.newInstance', 'vtk.IO.XML.vtkXMLImageDataWriter.newInstance', 'vtk.IO.XML.vtkXMLWriter.FormatTypes.BINARY', 'vtk.Rendering.Core.vtkColorTransferFunction.newInstance', 'vtk.Rendering.Core.vtkVolume.newInstance', 'vtk.Rendering.Core.vtkVolumeMapper.newInstance', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js XMLImageDataWriter</title>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n\n    <script type=\"text/javascript\" src=\"https://unpkg.com/@babel/polyfill@7.0.0/dist/polyfill.js\"></script>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const dataPath = 'http://kitware.github.io/vtk-js/data/volume/headsq.vti';\n        const fullScreenRenderer = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance();\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        const reader = vtk.IO.Core.vtkHttpDataSetReader.newInstance({ fetchGzip: true });\n\n        const writer = vtk.IO.XML.vtkXMLImageDataWriter.newInstance();\n        writer.setFormat(vtk.IO.XML.vtkXMLWriter.FormatTypes.BINARY);\n        writer.setInputConnection(reader.getOutputPort());\n\n        const writerReader = vtk.IO.XML.vtkXMLImageDataReader.newInstance();\n\n        reader\n            .setUrl(dataPath, { loadData: true })\n            .then(() => {\n                const fileContents = writer.write(reader.getOutputData());\n\n                // Try to read it back.\n                const textEncoder = new TextEncoder();\n                writerReader.parseAsArrayBuffer(textEncoder.encode(fileContents));\n                renderer.resetCamera();\n                renderWindow.render();\n\n                const blob = new Blob([fileContents], { type: 'text/plain' });\n                const a = window.document.createElement('a');\n                a.href = window.URL.createObjectURL(blob, { type: 'text/plain' });\n                a.download = 'headsq.vti';\n                a.text = 'Download';\n                a.style.position = 'absolute';\n                a.style.left = '50%';\n                a.style.bottom = '10px';\n                document.body.appendChild(a);\n                a.style.background = 'white';\n                a.style.padding = '5px';\n            });\n\n        const actor = vtk.Rendering.Core.vtkVolume.newInstance();\n        const mapper = vtk.Rendering.Core.vtkVolumeMapper.newInstance();\n        mapper.setSampleDistance(1.1);\n        actor.setMapper(mapper);\n\n        mapper.setInputConnection(writerReader.getOutputPort());\n\n        // create color and opacity transfer functions\n        const ctfun = vtk.Rendering.Core.vtkColorTransferFunction.newInstance();\n        ctfun.addRGBPoint(200.0, 1.0, 1.0, 1.0);\n        ctfun.addRGBPoint(2000.0, 0.0, 0.0, 0.0);\n        const ofun = vtk.Common.DataModel.vtkPiecewiseFunction.newInstance();\n        ofun.addPoint(200.0, 0.0);\n        ofun.addPoint(1200.0, 0.2);\n        ofun.addPoint(4000.0, 0.4);\n        actor.getProperty().setRGBTransferFunction(0, ctfun);\n        actor.getProperty().setScalarOpacity(0, ofun);\n        actor.getProperty().setScalarOpacityUnitDistance(0, 4.5);\n        // actor.getProperty().setInterpolationTypeToNearest();\n        // actor.getProperty().setInterpolationTypeToFastLinear();\n        actor.getProperty().setInterpolationTypeToLinear();\n\n        renderer.addActor(actor);\n\n        window.writer = writer;\n        window.writerReader = writerReader;\n        window.mapper = mapper;\n        window.actor = actor;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n\n    </script>\n\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 4:\n描述: This code visualizes a 3D plane colored by a mathematical function, using `vtkCalculator` for scalar values and `vtkMapper` for coloring.\n\nVTK.js 模块: ['vtk.Rendering.Core.vtkMapper', 'vtk.Common.Core.vtkPoints', 'vtk.Common.DataModel.vtkDataSet.FieldDataTypes', 'vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes', 'vtk.Common.DataModel.vtkPolyData', 'vtk.Filters.General.vtkCalculator', 'vtk.Filters.Sources.vtkPlaneSource', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        // using vtk namespace\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPlaneSource = vtk.Filters.Sources.vtkPlaneSource;\n        const vtkPolyData = vtk.Common.DataModel.vtkPolyData;\n        const vtkPoints = vtk.Common.Core.vtkPoints;\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldDataTypes;\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // setting vtkCalculator and set formula\n\n        const simpleFilter = vtkCalculator.newInstance();\n\n        simpleFilter.setFormulaSimple(\n            FieldDataTypes.POINT, // Generate an output array defined over points.\n            [], // We don't request any point-data arrays because point coordinates are made available by default.\n            'outputArray', // Name the output array \n            (x) => (x[0] - 0.5) * (x[0] - 0.5) + (x[1] - 0.5) * (x[1] - 0.5) + 0.125\n        ); \n\n        //using plane source to generate a poly data which can be rendered by vtkActor\n        const planeSource = vtkPlaneSource.newInstance({\n            xResolution: 25,\n            yResolution: 25,\n        });\n\n        const sourceData = planeSource.getOutputData();\n\n        simpleFilter.setInputData(sourceData);\n        const planeActor = vtkActor.newInstance();\n        const planeMapper = vtkMapper.newInstance();\n        planeMapper.setInputData(simpleFilter.getOutputData());\n        planeMapper.setColorByArrayName('outputArray'); \n\n        planeMapper.setScalarModeToUsePointFieldData();   \n        planeActor.setMapper(planeMapper);\n        planeActor.getProperty().setEdgeVisibility(true);\n\n        renderer.addActor(planeActor);\n        renderer.resetCamera();\n        renderWindow.render();\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 5:\n描述: Loads a 3D volume dataset and renders it using `vtkVolumeActor` and `vtkVolumeMapper` with extensive customization for appearance and quality.\n\nVTK.js 模块: ['vtk.Rendering.Core.vtkVolumeMapper', 'vtk.Common.DataModel.vtkPiecewiseFunction', 'vtk.IO.Core.vtkHttpDataSetReader.newInstance', 'vtk.Rendering.Core.vtkColorTransferFunction', 'vtk.Rendering.Core.vtkVolume', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n</head>\n\n<body>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        //using volume actor and mapper for rendering\n        const vtkVolumeActor = vtk.Rendering.Core.vtkVolume;\n        const vtkVolumeMapper = vtk.Rendering.Core.vtkVolumeMapper;\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n\n        //init the render window\n        const fullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n        //set the data path and the reader\n        const dataPath = 'http://kitware.github.io/vtk-js/data/volume/headsq.vti';\n        const reader = vtk.IO.Core.vtkHttpDataSetReader.newInstance({ fetchGzip: true });\n\n        //load data from dataPath and render the results by actor and mapper\n        reader.setUrl(dataPath, { loadData: true })\n            .then(() => {\n                const data = reader.getOutputData(0);\n                //create the mapper and set its property\n                const mapper = vtkVolumeMapper.newInstance();\n                console.log(data.toJSON())\n                mapper.setInputData(data);\n                mapper.setSampleDistance(0.7);\n                mapper.setVolumetricScatteringBlending(0);\n                mapper.setLocalAmbientOcclusion(0);\n                mapper.setLAOKernelSize(10);\n                mapper.setLAOKernelRadius(5);\n                mapper.setComputeNormalFromOpacity(true);\n\n                //create actor and set its properties, including gradient opacity, scalar opacity, shade, ambient, diffuse, specular etc.\n                const actor = vtkVolumeActor.newInstance();\n                const ofun = vtkPiecewiseFunction.newInstance();\n                ofun.addPoint(0.0, 0.1);\n                ofun.addPoint(255.0, 1.0);\n                actor.getProperty().setScalarOpacity(0, ofun);\n                actor.getProperty().setInterpolationTypeToLinear();\n                actor.getProperty().setUseGradientOpacity(0, true);\n                actor.getProperty().setGradientOpacityMinimumValue(0, 2);\n                actor.getProperty().setGradientOpacityMinimumOpacity(0, 0.0);\n                actor.getProperty().setGradientOpacityMaximumValue(0, 20);\n                actor.getProperty().setGradientOpacityMaximumOpacity(0, 1.0);\n                actor.getProperty().setScalarOpacityUnitDistance(0, 2.955);\n                actor.getProperty().setShade(true);\n                actor.getProperty().setAmbient(0.3);\n                actor.getProperty().setDiffuse(1);\n                actor.getProperty().setSpecular(1);\n\n                //assign mapper to actor and assign mapper to render\n                actor.setMapper(mapper);\n                renderer.addVolume(actor);\n                renderer.resetCamera();\n                renderWindow.render();\n            });\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 6:\n描述: Renders a 3D medical volume (`headsq.vti`) with a clipping plane, using `vtkVolumeMapper` and `vtkVolumeActor` for customized appearance.\n\nVTK.js 模块: ['vtk.Rendering.Core.vtkVolumeMapper', 'vtk.Common.DataModel.vtkPiecewiseFunction', 'vtk.Common.DataModel.vtkPlane', 'vtk.IO.Core.vtkHttpDataSetReader.newInstance', 'vtk.Rendering.Core.vtkVolume', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n</head>\n\n<body>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        //using volume actor and mapper for rendering\n        const vtkVolumeActor = vtk.Rendering.Core.vtkVolume;\n        const vtkVolumeMapper = vtk.Rendering.Core.vtkVolumeMapper;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n        const vtkPlane = vtk.Common.DataModel.vtkPlane;\n\n        //init the render window\n        const fullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n        //create clip plan\n        const clipPlane = vtkPlane.newInstance();\n        const clipPlaneNormal = [0, 0, 1]\n\n        //set the data path and the reader\n        const dataPath = 'http://kitware.github.io/vtk-js/data/volume/headsq.vti';\n        const reader = vtk.IO.Core.vtkHttpDataSetReader.newInstance({ fetchGzip: true });\n\n        //load data from dataPath and render the results by actor and mapper\n        reader.setUrl(dataPath, { loadData: true })\n            .then(() => {\n                const data = reader.getOutputData(0);\n                \n                //compute the range of the data set and set clip plan accordingly\n                const extent = data.getExtent();\n                const spacing = data.getSpacing();\n                const sizeX = extent[1] * spacing[0];\n                const sizeY = extent[3] * spacing[1];\n\n                clipPlanePosition = sizeX / 2;\n\n                const clipPlaneOrigin = [\n                    clipPlanePosition * clipPlaneNormal[0],\n                    clipPlanePosition * clipPlaneNormal[1],\n                    clipPlanePosition * clipPlaneNormal[2],\n                ];\n\n                clipPlane.setNormal(clipPlaneNormal);\n                clipPlane.setOrigin(clipPlaneOrigin);\n\n                //create the mapper and set its property\n                const mapper = vtkVolumeMapper.newInstance();\n                mapper.addClippingPlane(clipPlane);\n                mapper.setInputData(data);\n                mapper.setSampleDistance(1);\n                mapper.setVolumetricScatteringBlending(0);\n                mapper.setLocalAmbientOcclusion(0);\n                mapper.setLAOKernelSize(10);\n                mapper.setLAOKernelRadius(5);\n                mapper.setComputeNormalFromOpacity(true);\n\n                //create actor and set its properties, including gradient opacity, scalar opacity, shade, ambient, diffuse, specular etc.\n                const actor = vtkVolumeActor.newInstance();\n                const ofun = vtkPiecewiseFunction.newInstance();\n                ofun.addPoint(0.0, 0.1);\n                ofun.addPoint(255.0, 1.0);\n                actor.getProperty().setScalarOpacity(0, ofun);\n                actor.getProperty().setInterpolationTypeToLinear();\n                actor.getProperty().setUseGradientOpacity(0, true);\n                actor.getProperty().setGradientOpacityMinimumValue(0, 2);\n                actor.getProperty().setGradientOpacityMinimumOpacity(0, 0.0);\n                actor.getProperty().setGradientOpacityMaximumValue(0, 20);\n                actor.getProperty().setGradientOpacityMaximumOpacity(0, 1.0);\n                actor.getProperty().setScalarOpacityUnitDistance(0, 2.955);\n                actor.getProperty().setShade(true);\n                actor.getProperty().setAmbient(0.3);\n                actor.getProperty().setDiffuse(1);\n                actor.getProperty().setSpecular(1);\n\n                //assign mapper to actor and assign mapper to render\n                actor.setMapper(mapper);\n                renderer.addVolume(actor);\n                renderer.resetCamera();\n                renderWindow.render();\n            });\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 7:\n描述: Generates a plane and uses `vtkCalculator` to create custom point data ('orientation', 'temperature', 'pressure'), which `vtkStickMapper` could use for rendering (currently not fully connected).\n\nVTK.js 模块: ['vtk.Filters.General.vtkCalculator', 'vtk.Common.DataModel.vtkDataSet.FieldAssociations', 'vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes', 'vtk.Filters.Sources.vtkPlaneSource', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkStickMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n\n    <script>\n        // Use vtk namespace to reference classes\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPlaneSource = vtk.Filters.Sources.vtkPlaneSource;\n        const vtkStickMapper = vtk.Rendering.Core.vtkStickMapper;\n\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldAssociations;\n\n        const controlPanel = `<table>\n  <tr>\n    <td>X Resolution</td>\n    <td>\n      <input class='xResolution' type=\"range\" min=\"1\" max=\"25\" step=\"1\" value=\"10\" />\n    </td>\n  </tr>\n  <tr>\n    <td>Y Resolution</td>\n    <td>\n      <input class='yResolution' type=\"range\" min=\"1\" max=\"25\" step=\"1\" value=\"10\" />\n    </td>\n  </tr>\n</table>`;\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // ----------------------------------------------------------------------------\n        // Example code\n        // ----------------------------------------------------------------------------\n\n        const planeSource = vtkPlaneSource.newInstance({\n            xResolution: 25,\n            yResolution: 25,\n        });\n\n\n        console.log(planeSource.getOutputData().toJSON());\n\n        const simpleFilter = vtkCalculator.newInstance();\n        const mapper = vtkStickMapper.newInstance();\n        const actor = vtkActor.newInstance();\n\n        simpleFilter.setFormula({\n            getArrays: (inputDataSets) => ({\n                input: [{ location: FieldDataTypes.COORDINATE }], // Require point coordinates as input\n                output: [\n                    // Generate two output arrays:\n                    {\n                        location: FieldDataTypes.POINT, // This array will be point-data ...\n                        name: 'orientation', // ... with the given name ...\n                        dataType: 'Float32Array', // ... of this type ...\n                        numberOfComponents: 3, // ... with this many components ...\n                    },\n                    {\n                        location: FieldDataTypes.POINT, // This array will be field data ...\n                        name: 'temperature', // ... with the given name ...\n                        dataType: 'Float32Array', // ... of this type ...\n                        attribute: AttributeTypes.SCALARS, // ... and will be marked as the default scalars.\n                        numberOfComponents: 1, // ... with this many components ...\n                    },\n                    {\n                        location: FieldDataTypes.POINT, // This array will be field data ...\n                        name: 'pressure', // ... with the given name ...\n                        dataType: 'Float32Array', // ... of this type ...\n                        numberOfComponents: 2, // ... with this many components ...\n                    },\n                ],\n            }),\n            evaluate: (arraysIn, arraysOut) => {\n                // Convert in the input arrays of vtkDataArrays into variables\n                // referencing the underlying JavaScript typed-data arrays:\n                // array in is null here?\n                console.log(\"arraysIn:\", arraysIn());\n                const [coords] = arraysIn.map((d) => d.getData());\n                const [orient, temp, press] = arraysOut.map((d) => d.getData());\n\n                // Since we are passed coords as a 3-component array,\n                // loop over all the points and compute the point-data output:\n                for (let i = 0, sz = coords.length / 3; i < sz; ++i) {\n                    orient[i * 3] =\n                        (coords[3 * i] - 0.5) * (coords[3 * i] - 0.5) +\n                        (coords[3 * i + 1] - 0.5) * (coords[3 * i + 1] - 0.5);\n                    orient[i * 3 + 1] =\n                        (coords[3 * i] - 0.5) * (coords[3 * i] - 0.5) +\n                        (coords[3 * i + 1] - 0.5) * (coords[3 * i + 1] - 0.5);\n                    orient[i * 3 + 2] = 1.0;\n\n                    temp[i] = coords[3 * i + 1];\n\n                    press[i * 2] =\n                        (coords[3 * i] * coords[3 * i] +\n                            coords[3 * i + 1] * coords[3 * i + 1]) *\n                        0.05 +\n                        0.05;\n                    press[i * 2 + 1] =\n                        (coords[3 * i] * coords[3 * i] +\n                            coords[3 * i + 1] * coords[3 * i + 1]) *\n                        0.01 +\n                        0.01;\n                }\n                // Mark the output vtkDataArray as modified\n                arraysOut.forEach((x) => x.modified());\n            },\n        });\n\n        // The generated 'temperature' array will become the default scalars\n        // so the plane mapper will color by 'temperature':\n        simpleFilter.setInputData(planeSource.getOutputData());\n        simpleFilter.update();\n        concole.log(simpleFilter.getOutputData());\n\n        //mapper.setInputConnection(simpleFilter.getOutputPort());\n\n        //mapper.setOrientationArray('orientation');\n        //mapper.setScaleArray('pressure');\n\n        //actor.setMapper(mapper);\n\n       // renderer.addActor(actor);\n       // renderer.resetCamera();\n        //renderWindow.render();\n\n        // -----------------------------------------------------------\n        // UI control handling\n        // -----------------------------------------------------------\n\n        // fullScreenRenderer.addController(controlPanel);\n        // ['xResolution', 'yResolution'].forEach((propertyName) => {\n        //     document.querySelector(`.${propertyName}`).addEventListener('input', (e) => {\n        //         const value = Number(e.target.value);\n        //         console.log(\"propertyName\",propertyName);\n        //         console.log(\"value\",value);\n        //         planeSource.set({ [propertyName]: value });\n        //         renderWindow.render();\n        //     });\n        // });\n\n        // -----------------------------------------------------------\n        // Make some variables global so that you can inspect and\n        // modify objects in your browser's developer console:\n        // -----------------------------------------------------------\n\n        window.planeSource = planeSource;\n        window.mapper = mapper;\n        window.actor = actor;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 8:\n描述: Visualizes a 3D plane with glyphs (e.g., cones) whose scale and orientation are based on scalar and vector data, using `vtkGlyph3DMapper` and `vtkCalculator`.\n\nVTK.js 模块: ['vtk.Filters.General.vtkCalculator', 'vtk.Common.DataModel.vtkDataSet.FieldAssociations', 'vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes', 'vtk.Filters.Sources.vtkConeSource', 'vtk.Filters.Sources.vtkPlaneSource', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkGlyph3DMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtkjs- Rendering-GlyphMapper</title>\n</head>\n\n\n\n<body>\n\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n\n    <script>\n        // Assuming vtk object is properly imported and available in global environment, proceed with corresponding assignments\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPlaneSource = vtk.Filters.Sources.vtkPlaneSource;\n        const vtkConeSource = vtk.Filters.Sources.vtkConeSource;\n        const vtkGlyph3DMapper = vtk.Rendering.Core.vtkGlyph3DMapper;\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldAssociations;\n        const controlPanel = `<table>\n  <tr>\n    <td>X Resolution</td>\n    <td>\n      <input class='xResolution' type=\"range\" min=\"1\" max=\"25\" step=\"1\" value=\"10\" />\n    </td>\n  </tr>\n  <tr>\n    <td>Y Resolution</td>\n    <td>\n      <input class='yResolution' type=\"range\" min=\"1\" max=\"25\" step=\"1\" value=\"10\" />\n    </td>\n  </tr>\n</table>\n`\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // ----------------------------------------------------------------------------\n        // Example code\n        // ----------------------------------------------------------------------------\n\n        const planeSource = vtkPlaneSource.newInstance();\n        const simpleFilter = vtkCalculator.newInstance();\n        const mapper = vtkGlyph3DMapper.newInstance();\n        const actor = vtkActor.newInstance();\n\n        simpleFilter.setFormula({\n            getArrays: (inputDataSets) => ({\n                input: [{ location: FieldDataTypes.COORDINATE }], // Require point coordinates as input\n                output: [\n                    // Generate two output arrays:\n                    {\n                        location: FieldDataTypes.POINT, // This array will be point-data...\n                        name: 'pressure', //... with the given name...\n                        dataType: 'Float32Array', //... of this type...\n                        numberOfComponents: 3, //... with this many components...\n                    },\n                    {\n                        location: FieldDataTypes.POINT, // This array will be field data...\n                        name: 'temperature', //... with the given name...\n                        dataType: 'Float32Array', //... of this type...\n                        attribute: AttributeTypes.SCALARS, //... and will be marked as the default scalars.\n                        numberOfComponents: 1, //... with this many components...\n                    },\n                ],\n            }),\n            evaluate: (arraysIn, arraysOut) => {\n                // Convert in the input arrays of vtkDataArrays into variables\n                // referencing the underlying JavaScript typed-data arrays:\n                const [coords] = arraysIn.map((d) => d.getData());\n                const [press, temp] = arraysOut.map((d) => d.getData());\n\n                // Since we are passed coords as a 3-component array,\n                // loop over all the points and compute the point-data output:\n                for (let i = 0, sz = coords.length / 3; i < sz; ++i) {\n                    press[i * 3] = (coords[3 * i] - 0.5) * (coords[3 * i] - 0.5);\n                    press[i * 3 + 1] =\n                        ((coords[3 * i + 1] - 0.5) * (coords[3 * i + 1] - 0.5) + 0.125) * 0.1;\n                    press[i * 3 + 2] =\n                        ((coords[3 * i] - 0.5) * (coords[3 * i] - 0.5) +\n                            (coords[3 * i + 1] - 0.5) * (coords[3 * i + 1] - 0.5) +\n                            0.125) *\n                        0.1;\n                    temp[i] = coords[3 * i + 1] * 0.1;\n                }\n\n                // Mark the output vtkDataArray as modified\n                arraysOut.forEach((x) => x.modified());\n            },\n        });\n\n\n        // console.log(\"planeSource\", planeSource.getOutputPort)\n        // The generated 'temperature' array will become the default scalars, so the plane mapper will color by 'temperature':\n        simpleFilter.setInputConnection(planeSource.getOutputPort());\n\n        mapper.setInputConnection(simpleFilter.getOutputPort(), 0);\n\n        const coneSource = vtkConeSource.newInstance();\n        coneSource.setResolution(12);\n        mapper.setInputConnection(coneSource.getOutputPort(), 1);\n        mapper.setOrientationArray('pressure');\n        mapper.setScalarRange(0.0, 0.1);\n\n        actor.setMapper(mapper);\n\n        renderer.addActor(actor);\n        renderer.resetCamera();\n        renderWindow.render();\n\n        // -----------------------------------------------------------\n        // UI control handling\n        // -----------------------------------------------------------\n\n        fullScreenRenderer.addController(controlPanel);\n        ['xResolution', 'yResolution'].forEach((propertyName) => {\n            document.querySelector(`.${propertyName}`).addEventListener('input', (e) => {\n                const value = Number(e.target.value);\n                planeSource.set({ [propertyName]: value });\n                renderWindow.render();\n            });\n        });\n\n        // -----------------------------------------------------------\n        // Make some variables global so that you can inspect and\n        // modify objects in your browser's developer console:\n        // -----------------------------------------------------------\n\n        window.planeSource = planeSource;\n        window.mapper = mapper;\n        window.actor = actor;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n    </script>\n\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 9:\n描述: Visualizes a 3D sphere generated by `vtkSphereSource` and rendered with `vtkSphereMapper`.\n\nVTK.js 模块: ['vtk.Rendering.Core.vtkSphereMapper', 'vtk.Filters.Sources.vtkSphereSource', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n</head>\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkSphereSource = vtk.Filters.Sources.vtkSphereSource;\n        const vtkSphereMapper = vtk.Rendering.Core.vtkSphereMapper;\n        //if we just use the vtkMapper, the results are volume rendering results\n        \n        //creating rendering window\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n        const mapper = vtkSphereMapper.newInstance();\n        const actor = vtkActor.newInstance();\n        \n        //creating sphereSource properties\n        //default parameter will be used if we do not configure sphere sources    \n        const sphereSource = vtkSphereSource.newInstance();\n\n        // adding parameters to mapper\n        // actor.setRadius(0.1);\n        mapper.setInputConnection(sphereSource.getOutputPort());\n\n        // adding sphere mapper to render window\n        actor.setMapper(mapper);\n        renderer.addActor(actor);\n        renderer.resetCamera();\n        renderWindow.render();\n    </script>\n</body>\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 10:\n描述: Loads a medical image dataset (MHA) and renders it as a 3D volume using `vtkVolumeMapper` with custom color and opacity transfer functions.\n\nVTK.js 模块: ['vtk.Rendering.Core.vtkVolumeMapper', 'vtk.Common.DataModel.vtkITKHelper', 'vtk.Common.DataModel.vtkPiecewiseFunction', 'vtk.IO.Core.DataAccessHelper.vtkLiteHttpDataAccessHelper', 'vtk.Rendering.Core.vtkColorTransferFunction', 'vtk.Rendering.Core.vtkVolume', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js Isosurface Visualization</title>\n    <link rel=\"stylesheet\" href=\"https://kit.fontawesome.com/419a5ebb56.css\" crossorigin=\"anonymous\">\n    <style>\n        #renderer {\n            width: 100%;\n            height: 600px;\n            background-color: #333;\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script src=\"https://unpkg.com/vtk.js/Sources/IO/Core/DataAccessHelper/LiteHttpDataAccessHelper.js\"></script>\n    <script>\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n        const vtkVolume = vtk.Rendering.Core.vtkVolume;\n        const vtkVolumeMapper = vtk.Rendering.Core.vtkVolumeMapper;\n        const vtkITKHelper = vtk.Common.DataModel.vtkITKHelper;\n        // const vtkLiteHttpDataAccessHelper = vtk.IO.Core.DataAccessHelper.vtkLiteHttpDataAccessHelper;\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        const actor = vtkVolume.newInstance();\n        const mapper = vtkVolumeMapper.newInstance();\n        mapper.setSampleDistance(0.7);\n        actor.setMapper(mapper);\n\n        const ctfun = vtkColorTransferFunction.newInstance();\n        ctfun.addRGBPoint(200.0, 0.4, 0.5, 0.0);\n        ctfun.addRGBPoint(2000.0, 1.0, 1.0, 1.0);\n        const ofun = vtkPiecewiseFunction.newInstance();\n        ofun.addPoint(200.0, 0.0);\n        ofun.addPoint(120.0, 0.3);\n        ofun.addPoint(300.0, 0.6);\n        actor.getProperty().setRGBTransferFunction(0, ctfun);\n        actor.getProperty().setScalarOpacity(0, ofun);\n        actor.getProperty().setScalarOpacityUnitDistance(0, 4.5);\n        actor.getProperty().setInterpolationTypeToLinear();\n        actor.getProperty().setUseGradientOpacity(0, true);\n        actor.getProperty().setGradientOpacityMinimumValue(0, 15);\n        actor.getProperty().setGradientOpacityMinimumOpacity(0, 0.0);\n        actor.getProperty().setGradientOpacityMaximumValue(0, 100);\n        actor.getProperty().setGradientOpacityMaximumOpacity(0, 1.0);\n        actor.getProperty().setShade(true);\n        actor.getProperty().setAmbient(0.2);\n        actor.getProperty().setDiffuse(0.7);\n        actor.getProperty().setSpecular(0.3);\n        actor.getProperty().setSpecularPower(8.0);\n\n        // ----------------------------------------------------------------------------\n        // Example code\n        // ----------------------------------------------------------------------------\n\n        async function update() {\n            const volumeArrayBuffer = await LiteHttpDataAccessHelper.fetchBinary(\n                `https://data.kitware.com/api/v1/file/5d2a36ff877dfcc902fae6d9/download`\n            );\n\n            // Load the itk-wasm ESM module dynamically for the example.\n            // This can also go in the HTML <head>.\n            // Or `npm install @itk-wasm/image-io` and import it directly.\n            const { readImage } = await import(\n    // eslint-disable-next-line import/no-unresolved, import/extensions\n    /* webpackIgnore: true */ 'https://cdn.jsdelivr.net/npm/@itk-wasm/image-io@1.1.0/dist/bundle/index-worker-embedded.min.js'\n            );\n\n            const { image: itkImage, webWorker } = await readImage({\n                data: new Uint8Array(volumeArrayBuffer),\n                path: 'knee.mha',\n            });\n            // Optionally terminate the web worker when it is no longer needed\n            webWorker.terminate();\n\n            const vtkImage = vtkITKHelper.convertItkToVtkImage(itkImage);\n\n            mapper.setInputData(vtkImage);\n            renderer.addVolume(actor);\n            renderer.resetCamera();\n            renderer.getActiveCamera().zoom(1.5);\n            renderer.getActiveCamera().elevation(70);\n            renderer.updateLightsGeometryToFollowCamera();\n            renderWindow.render();\n        }\n        update();\n\n        // -----------------------------------------------------------\n        // Make some variables global so that you can inspect and\n        // modify objects in your browser's developer console:\n        // -----------------------------------------------------------\n\n        window.mapper = mapper;\n        window.actor = actor;\n        window.ctfun = ctfun;\n        window.ofun = ofun;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 11:\n描述: Loads a 3D volume and displays three orthogonal image slices (I, J, K planes) at the 30th layer using `vtkHttpDataSetReader` and `vtkImageSlice`.\n\nVTK.js 模块: ['vtk.Rendering.Core.vtkImageMapper', 'vtk.IO.Core.vtkHttpDataSetReader', 'vtk.Rendering.Core.vtkImageSlice', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkHttpDataSetReader = vtk.IO.Core.vtkHttpDataSetReader;\n        const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n        const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n        const dataPath = 'http://kitware.github.io/vtk-js/data/volume/headsq.vti';\n\n        const fullScreenRenderWindow = vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n        const imageActorI = vtkImageSlice.newInstance();\n        const imageActorJ = vtkImageSlice.newInstance();\n        const imageActorK = vtkImageSlice.newInstance();\n\n        renderer.addActor(imageActorK);\n        renderer.addActor(imageActorJ);\n        renderer.addActor(imageActorI);\n\n        const reader = vtkHttpDataSetReader.newInstance({\n            fetchGzip: true,\n        });\n        reader\n            .setUrl(dataPath, { loadData: true })\n            .then(() => {\n                const data = reader.getOutputData();\n                const dataRange = data.getPointData().getScalars().getRange();\n                const extent = data.getExtent();\n\n                const imageMapperK = vtkImageMapper.newInstance();\n                imageMapperK.setInputData(data);\n                imageMapperK.setKSlice(30);\n                imageActorK.setMapper(imageMapperK);\n\n                const imageMapperJ = vtkImageMapper.newInstance();\n                imageMapperJ.setInputData(data);\n                imageMapperJ.setJSlice(30);\n                imageActorJ.setMapper(imageMapperJ);\n\n                const imageMapperI = vtkImageMapper.newInstance();\n                imageMapperI.setInputData(data);\n                imageMapperI.setISlice(30);\n                imageActorI.setMapper(imageMapperI);\n\n                renderer.resetCamera();\n                renderWindow.render();\n            });\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 12:\n描述: Creates a 3D visualization where a plane is rendered using a `vtkStickMapper`. The plane's geometry is generated with a `vtkPlaneSource`, and `vtkCalculator` processes the data to generate custom point attributes ('orientation', 'temperature', 'pressure') which `vtkStickMapper` uses to control the orientation and scaling of the sticks. The visualization is displayed in a full-screen renderer with a dark background. Additionally, UI controls allow adjusting the X and Y resolution of the plane, which dynamically updates the visualization.\n\nVTK.js 模块: ['vtk.Filters.General.vtkCalculator', 'vtk.Common.DataModel.vtkDataSet.FieldAssociations', 'vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes', 'vtk.Filters.Sources.vtkPlaneSource', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkStickMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js StickMapper</title>\n    <link rel=\"stylesheet\" href=\"https://kit.fontawesome.com/419a5ebb56.css\" crossorigin=\"anonymous\">\n    <style>\n        #renderer {\n            width: 100%;\n            height: 600px;\n            background-color: #333;\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js/Sources/Rendering/Profiles/Geometry\"></script>\n    <script src=\"https://unpkg.com/vtk.js/Sources/Rendering/Profiles/Molecule\"></script>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n\n    <script>\n        // Use vtk namespace to reference classes\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPlaneSource = vtk.Filters.Sources.vtkPlaneSource;\n        const vtkStickMapper = vtk.Rendering.Core.vtkStickMapper;\n\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldAssociations;\n\n        const controlPanel = `<table>\n  <tr>\n    <td>X Resolution</td>\n    <td>\n      <input class='xResolution' type=\"range\" min=\"1\" max=\"25\" step=\"1\" value=\"10\" />\n    </td>\n  </tr>\n  <tr>\n    <td>Y Resolution</td>\n    <td>\n      <input class='yResolution' type=\"range\" min=\"1\" max=\"25\" step=\"1\" value=\"10\" />\n    </td>\n  </tr>\n</table>`;\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // ----------------------------------------------------------------------------\n        // Example code\n        // ----------------------------------------------------------------------------\n\n        const planeSource = vtkPlaneSource.newInstance();\n        const simpleFilter = vtkCalculator.newInstance();\n        const mapper = vtkStickMapper.newInstance();\n        const actor = vtkActor.newInstance();\n\n        simpleFilter.setFormula({\n            getArrays: (inputDataSets) => ({\n                input: [{ location: FieldDataTypes.COORDINATE }], // Require point coordinates as input\n                output: [\n                    // Generate two output arrays:\n                    {\n                        location: FieldDataTypes.POINT, // This array will be point-data ...\n                        name: 'orientation', // ... with the given name ...\n                        dataType: 'Float32Array', // ... of this type ...\n                        numberOfComponents: 3, // ... with this many components ...\n                    },\n                    {\n                        location: FieldDataTypes.POINT, // This array will be field data ...\n                        name: 'temperature', // ... with the given name ...\n                        dataType: 'Float32Array', // ... of this type ...\n                        attribute: AttributeTypes.SCALARS, // ... and will be marked as the default scalars.\n                        numberOfComponents: 1, // ... with this many components ...\n                    },\n                    {\n                        location: FieldDataTypes.POINT, // This array will be field data ...\n                        name: 'pressure', // ... with the given name ...\n                        dataType: 'Float32Array', // ... of this type ...\n                        numberOfComponents: 2, // ... with this many components ...\n                    },\n                ],\n            }),\n            evaluate: (arraysIn, arraysOut) => {\n                // Convert in the input arrays of vtkDataArrays into variables\n                // referencing the underlying JavaScript typed-data arrays:\n                const [coords] = arraysIn.map((d) => d.getData());\n                const [orient, temp, press] = arraysOut.map((d) => d.getData());\n\n                // Since we are passed coords as a 3-component array,\n                // loop over all the points and compute the point-data output:\n                for (let i = 0, sz = coords.length / 3; i < sz; ++i) {\n                    orient[i * 3] =\n                        (coords[3 * i] - 0.5) * (coords[3 * i] - 0.5) +\n                        (coords[3 * i + 1] - 0.5) * (coords[3 * i + 1] - 0.5);\n                    orient[i * 3 + 1] =\n                        (coords[3 * i] - 0.5) * (coords[3 * i] - 0.5) +\n                        (coords[3 * i + 1] - 0.5) * (coords[3 * i + 1] - 0.5);\n                    orient[i * 3 + 2] = 1.0;\n\n                    temp[i] = coords[3 * i + 1];\n\n                    press[i * 2] =\n                        (coords[3 * i] * coords[3 * i] +\n                            coords[3 * i + 1] * coords[3 * i + 1]) *\n                        0.05 +\n                        0.05;\n                    press[i * 2 + 1] =\n                        (coords[3 * i] * coords[3 * i] +\n                            coords[3 * i + 1] * coords[3 * i + 1]) *\n                        0.01 +\n                        0.01;\n                }\n                // Mark the output vtkDataArray as modified\n                arraysOut.forEach((x) => x.modified());\n            },\n        });\n\n        // The generated 'temperature' array will become the default scalars, so the plane mapper will color by 'temperature':\n        simpleFilter.setInputConnection(planeSource.getOutputPort());\n\n        mapper.setInputConnection(simpleFilter.getOutputPort());\n\n        mapper.setOrientationArray('orientation');\n        mapper.setScaleArray('pressure');\n\n        actor.setMapper(mapper);\n\n        renderer.addActor(actor);\n        renderer.resetCamera();\n        renderWindow.render();\n\n        // -----------------------------------------------------------\n        // UI control handling\n        // -----------------------------------------------------------\n\n        fullScreenRenderer.addController(controlPanel);\n        ['xResolution', 'yResolution'].forEach((propertyName) => {\n            document.querySelector(`.${propertyName}`).addEventListener('input', (e) => {\n                const value = Number(e.target.value);\n                planeSource.set({ [propertyName]: value });\n                renderWindow.render();\n            });\n        });\n\n        // -----------------------------------------------------------\n        // Make some variables global so that you can inspect and\n        // modify objects in your browser's developer console:\n        // -----------------------------------------------------------\n\n        window.planeSource = planeSource;\n        window.mapper = mapper;\n        window.actor = actor;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 13:\n描述: Loads a 3D volume (`headsq.vti`) and displays three orthogonal slices (I, J, K) with interactive controls for position and color properties.\n\nVTK.js 模块: ['vtk.Rendering.Core.vtkImageMapper', 'vtk.IO.Core.vtkHttpDataSetReader', 'vtk.Rendering.Core.vtkImageSlice', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js Isosurface Visualization</title>\n    <link rel=\"stylesheet\" href=\"https://kit.fontawesome.com/419a5ebb56.css\" crossorigin=\"anonymous\">\n    <style>\n        #renderer {\n            width: 100%;\n            height: 600px;\n            background-color: #333;\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <!-- Set vtk.js favicon -->\n    <script type=\"module\" src=\"https://unpkg.com/vtk.js/favicon.js\"></script>\n\n    <!-- Load WebGL and WebGPU rendering modules -->\n    <script type=\"module\" src=\"https://unpkg.com/vtk.js/Sources/Rendering/Profiles/Volume.js\"></script>\n\n    <!-- Force DataAccessHelper to access various data sources -->\n    <script type=\"module\"\n        src=\"https://unpkg.com/vtk.js/Sources/IO/Core/DataAccessHelper/HtmlDataAccessHelper.js\"></script>\n    <script type=\"module\"\n        src=\"https://unpkg.com/vtk.js/Sources/IO/Core/DataAccessHelper/HttpDataAccessHelper.js\"></script>\n    <script type=\"module\"\n        src=\"https://unpkg.com/vtk.js/Sources/IO/Core/DataAccessHelper/JSZipDataAccessHelper.js\"></script>\n\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkHttpDataSetReader = vtk.IO.Core.vtkHttpDataSetReader;\n        const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n        const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n        const path = 'http://kitware.github.io/vtk-js/data'\n\n        // Reference HTML template\n        const controlPanel = `<table>\n    <tr>\n        <td>Slice I</td>\n        <td>\n            <input class='sliceI' type=\"range\" min=\"0\" max=\"2.0\" step=\"1\" value=\"1\" />\n        </td>\n    </tr>\n    <tr>\n        <td>Slice J</td>\n        <td>\n            <input class='sliceJ' type=\"range\" min=\"0\" max=\"2.0\" step=\"1\" value=\"1\" />\n        </td>\n    </tr>\n    <tr>\n        <td>Slice K</td>\n        <td>\n            <input class='sliceK' type=\"range\" min=\"0\" max=\"100\" step=\"1\" value=\"1\" />\n        </td>\n    </tr>\n    <tr>\n        <td>Color level</td>\n        <td>\n            <input class='colorLevel' type=\"range\" min=\"-3926\" max=\"3926\" step=\"1\" value=\"1\" />\n        </td>\n    </tr>\n    <tr>\n        <td>ColorWindow</td>\n        <td>\n            <input class='colorWindow' type=\"range\" min=\"0\" max=\"3926\" step=\"1\" value=\"1\" />\n        </td>\n    </tr>\n</table>\n`;\n        const fullScreenRenderWindow = vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n        fullScreenRenderWindow.addController(controlPanel);\n\n        const imageActorI = vtkImageSlice.newInstance();\n        const imageActorJ = vtkImageSlice.newInstance();\n        const imageActorK = vtkImageSlice.newInstance();\n\n        renderer.addActor(imageActorK);\n        renderer.addActor(imageActorJ);\n        renderer.addActor(imageActorI);\n\n        function updateColorLevel(e) {\n            const colorLevel = Number(\n                (e ? e.target : document.querySelector('.colorLevel')).value\n            );\n            imageActorI.getProperty().setColorLevel(colorLevel);\n            imageActorJ.getProperty().setColorLevel(colorLevel);\n            imageActorK.getProperty().setColorLevel(colorLevel);\n            renderWindow.render();\n        }\n\n        function updateColorWindow(e) {\n            const colorLevel = Number(\n                (e ? e.target : document.querySelector('.colorWindow')).value\n            );\n            imageActorI.getProperty().setColorWindow(colorLevel);\n            imageActorJ.getProperty().setColorWindow(colorLevel);\n            imageActorK.getProperty().setColorWindow(colorLevel);\n            renderWindow.render();\n        }\n\n        const reader = vtkHttpDataSetReader.newInstance({\n            fetchGzip: true,\n        });\n        reader\n            .setUrl(`${path}/data/volume/headsq.vti`, { loadData: true })\n            .then(() => {\n                const data = reader.getOutputData();\n                const dataRange = data.getPointData().getScalars().getRange();\n                const extent = data.getExtent();\n\n                const imageMapperK = vtkImageMapper.newInstance();\n                imageMapperK.setInputData(data);\n                imageMapperK.setKSlice(30);\n                imageActorK.setMapper(imageMapperK);\n\n                const imageMapperJ = vtkImageMapper.newInstance();\n                imageMapperJ.setInputData(data);\n                imageMapperJ.setJSlice(30);\n                imageActorJ.setMapper(imageMapperJ);\n\n                const imageMapperI = vtkImageMapper.newInstance();\n                imageMapperI.setInputData(data);\n                imageMapperI.setISlice(30);\n                imageActorI.setMapper(imageMapperI);\n\n                renderer.resetCamera();\n                renderer.resetCameraClippingRange();\n                renderWindow.render();\n\n                ['.sliceI', '.sliceJ', '.sliceK'].forEach((selector, idx) => {\n                    const el = document.querySelector(selector);\n                    el.setAttribute('min', extent[idx * 2 + 0]);\n                    el.setAttribute('max', extent[idx * 2 + 1]);\n                    el.setAttribute('value', 30);\n                });\n\n                ['.colorLevel', '.colorWindow'].forEach((selector) => {\n                    document.querySelector(selector).setAttribute('max', dataRange[1]);\n                    document.querySelector(selector).setAttribute('value', dataRange[1]);\n                });\n                document\n                    .querySelector('.colorLevel')\n                    .setAttribute('value', (dataRange[0] + dataRange[1]) / 2);\n                updateColorLevel();\n                updateColorWindow();\n            });\n\n        document.querySelector('.sliceI').addEventListener('input', (e) => {\n            imageActorI.getMapper().setISlice(Number(e.target.value));\n            renderWindow.render();\n        });\n\n        document.querySelector('.sliceJ').addEventListener('input', (e) => {\n            imageActorJ.getMapper().setJSlice(Number(e.target.value));\n            renderWindow.render();\n        });\n\n        document.querySelector('.sliceK').addEventListener('input', (e) => {\n            imageActorK.getMapper().setKSlice(Number(e.target.value));\n            renderWindow.render();\n        });\n\n        document\n            .querySelector('.colorLevel')\n            .addEventListener('input', updateColorLevel);\n        document\n            .querySelector('.colorWindow')\n            .addEventListener('input', updateColorWindow);\n\n        window.fullScreen = fullScreenRenderWindow;\n        window.imageActorI = imageActorI;\n        window.imageActorJ = imageActorJ;\n        window.imageActorK = imageActorK;\n\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 14:\n描述: Loads and visualizes 3D elevation data from a CSV, applying a texture image, using `vtkElevationReader` and `vtkMapper`.\n\nVTK.js 模块: ['vtk.IO.Misc.vtkElevationReader.newInstance', 'vtk.Rendering.Core.vtkActor.newInstance', 'vtk.Rendering.Core.vtkMapper.newInstance', 'vtk.Rendering.Core.vtkTexture.newInstance', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js ElevationReader</title>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n\n    <script type=\"text/javascript\" src=\"https://unpkg.com/@babel/polyfill@7.0.0/dist/polyfill.js\"></script>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n\n\n        const imagePath = 'http://kitware.github.io/vtk-js/data/elevation/dem.jpg';\n        // const imagePath = './dem.jpg'\n        const dataPath = 'http://kitware.github.io/vtk-js/data/elevation/dem.csv';\n        const fullScreenRenderer = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n        const reader = vtk.IO.Misc.vtkElevationReader.newInstance({\n            xSpacing: 0.01568,\n            ySpacing: 0.01568,\n            zScaling: 0.06666,\n        });\n        const mapper = vtk.Rendering.Core.vtkMapper.newInstance();\n        const actor = vtk.Rendering.Core.vtkActor.newInstance();\n\n        mapper.setInputConnection(reader.getOutputPort());\n        actor.setMapper(mapper);\n\n        renderer.addActor(actor);\n        renderer.resetCamera();\n        renderWindow.render();\n\n        // Download and apply Texture\n        const img = new Image();\n        img.src = imagePath;\n        //Add crossorigin=\"anonymous\" to avoid CORS errors\n        img.crossOrigin = \"anonymous\"\n        img.onload = function textureLoaded() {\n            const texture = vtk.Rendering.Core.vtkTexture.newInstance();\n            texture.setInterpolate(true);\n            texture.setImage(img);\n            actor.addTexture(texture);\n            renderWindow.render();\n        };\n\n        // Download elevation and render when ready\n        reader.setUrl(dataPath).then(() => {\n            renderer.resetCamera();\n            renderWindow.render();\n        });\n\n        window.reader = reader;\n        window.mapper = mapper;\n        window.actor = actor;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n\n    </script>\n\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 15:\n描述: Loads 3D polydata, writes it to a string using `vtkXMLPolyDataWriter`, reads it back with `vtkXMLPolyDataReader`, and renders it, allowing download of the generated VTP file.\nVTK.js 模块: ['vtk.IO.Core.vtkHttpDataSetReader', 'vtk.IO.XML.vtkXMLPolyDataReader', 'vtk.IO.XML.vtkXMLPolyDataWriter', 'vtk.IO.XML.vtkXMLWriter', 'vtk.Rendering.Core.vtkActor.newInstance', 'vtk.Rendering.Core.vtkMapper.newInstance', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js XMLImagePolyDataWriter</title>\n    <!-- <link rel=\"stylesheet\" href=\"https://kit.fontawesome.com/419a5ebb56.css\" crossorigin=\"anonymous\"> -->\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n\n    <script type=\"text/javascript\" src=\"https://unpkg.com/@babel/polyfill@7.0.0/dist/polyfill.js\"></script>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const mapper = vtk.Rendering.Core.vtkMapper.newInstance();\n        const actor = vtk.Rendering.Core.vtkActor.newInstance();\n        const fullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const httpDataSetReader = vtk.IO.Core.vtkHttpDataSetReader;\n        const xmlPolyDataWriter = vtk.IO.XML.vtkXMLPolyDataWriter;\n        const xmlPolyDataReader = vtk.IO.XML.vtkXMLPolyDataReader;\n        const xmlWriter = vtk.IO.XML.vtkXMLWriter;\n        // Create instances using namespace paths\n        const fullScreenRenderer = fullScreenRenderWindow.newInstance();\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n        const reader = httpDataSetReader.newInstance({ fetchGzip: true });\n\n        const writer = xmlPolyDataWriter.newInstance();\n        writer.setFormat(xmlWriter.FormatTypes.BINARY);\n        writer.setInputConnection(reader.getOutputPort());\n\n        const writerReader = xmlPolyDataReader.newInstance();\n\n        reader.setUrl(`http://kitware.github.io/vtk-js/data/cow.vtp`, { loadData: true }).then(() => {\n            const fileContents = writer.write(reader.getOutputData());\n\n            // Try to read it back.\n            const textEncoder = new TextEncoder();\n            writerReader.parseAsArrayBuffer(textEncoder.encode(fileContents));\n            renderer.resetCamera();\n            renderWindow.render();\n\n            const blob = new Blob([fileContents], { type: 'text/plain' });\n            const a = window.document.createElement('a');\n            a.href = window.URL.createObjectURL(blob, { type: 'text/plain' });\n            a.download = 'cow.vtp';\n            a.text = 'Download';\n            a.style.position = 'absolute';\n            a.style.left = '50%';\n            a.style.bottom = '10px';\n            document.body.appendChild(a);\n            a.style.background = 'white';\n            a.style.padding = '5px';\n        });\n\n        actor.setMapper(mapper);\n\n        mapper.setInputConnection(writerReader.getOutputPort());\n\n        renderer.addActor(actor);\n\n        window.writer = writer;\n        window.writerReader = writerReader;\n        window.mapper = mapper;\n        window.actor = actor;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n\n\n    </script>\n\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 16:\n描述: Loads and visualizes a 3D polygonal data file (`test_cone.vtp`) using `vtkXMLPolyDataReader` and `vtkMapper`.\n\nVTK.js 模块: ['vtk.IO.XML.vtkXMLPolyDataReader', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js loading poly data, need to start by live server</title>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkXMLPolyDataReader = vtk.IO.XML.vtkXMLPolyDataReader;\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n\n        // crete the render window\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // load the vtp data locally\n        const reader = vtkXMLPolyDataReader.newInstance();\n        // set url and load the data\n        reader.setUrl('../datasets/test_cone.vtp').then(() => {\n            reader.loadData().then(() => {\n                // assign data to actor\n                const mapper = vtkMapper.newInstance();\n                console.log(reader.getOutputData(0))\n                mapper.setInputData(reader.getOutputData(0));\n                const actor = vtkActor.newInstance();\n                actor.setMapper(mapper);\n\n                //  adding actor to render and render the data\n                renderer.addActor(actor);\n                renderer.resetCamera();\n                renderWindow.render();\n            });\n        });\n    </script>\n</body>\n\n</html>\n\n\n--------------------------------------------------------------------------------------------------------------\n示例 17:\n描述: Displays a synthetic 2D image generated by `vtkRTAnalyticSource` using `vtkImageMapper` and `vtkImageSlice`.\nVTK.js 模块: ['vtk.Common.DataModel.vtkImageData', 'vtk.Filters.Sources.vtkRTAnalyticSource', 'vtk.Rendering.Core.vtkImageMapper', 'vtk.Rendering.Core.vtkImageSlice', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n        const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n        const vtkImageData = vtk.Common.DataModel.vtkImageData;\n\n        // create render window\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        const vtkImgSource = vtk.Filters.Sources.vtkRTAnalyticSource;\n        const imgSource = vtkImgSource.newInstance();\n        imgSource.update();\n        const img = imgSource.getOutputData();\n\n        // set mapper and actor\n        const mapper = vtkImageMapper.newInstance();\n        mapper.setInputData(img);\n\n        const actor = vtkImageSlice.newInstance();\n        actor.setMapper(mapper);\n\n        // adding actor to render\n        renderer.addActor(actor);\n        renderer.resetCamera();\n        renderWindow.render();\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 18:\n描述: Displays multiple interactive 3D objects (cone, sphere, cube, cylinder) in separate, independently styled renderers with animation and layout adjustments.\n\nVTK.js 模块: ['vtk.Filters.Sources.vtkConeSource', 'vtk.Filters.Sources.vtkCubeSource', 'vtk.Filters.Sources.vtkCylinderSource', 'vtk.Filters.Sources.vtkSphereSource', 'vtk.Interaction.Style.vtkInteractorStyleTrackballCamera', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkMapper', 'vtk.Rendering.Core.vtkRenderWindow', 'vtk.Rendering.Core.vtkRenderWindowInteractor', 'vtk.Rendering.Core.vtkRenderer', 'vtk.js', 'vtk.js已经通过某种方式被加载到全局变量vtk中']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js Many Renderers</title>\n    <!-- <link rel=\"stylesheet\" href=\"https://kit.fontawesome.com/419a5ebb56.css\" crossorigin=\"anonymous\"> -->\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n\n    <script type=\"text/javascript\" src=\"https://unpkg.com/@babel/polyfill@7.0.0/dist/polyfill.js\"></script>\n\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n\n    <script>\n        // Assuming vtk.js has been loaded into global variable vtk by some means\n        // For example, by including vtk.js in HTML via <script> tag, or through module loader\n\n        // Use vtk namespace to reference classes\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkConeSource = vtk.Filters.Sources.vtkConeSource;\n        const vtkSphereSource = vtk.Filters.Sources.vtkSphereSource;\n        const vtkCubeSource = vtk.Filters.Sources.vtkCubeSource;\n        const vtkCylinderSource = vtk.Filters.Sources.vtkCylinderSource;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkRenderWindow = vtk.Rendering.Core.vtkRenderWindow;\n        const vtkRenderWindowInteractor = vtk.Rendering.Core.vtkRenderWindowInteractor;\n        const vtkRenderer = vtk.Rendering.Core.vtkRenderer;\n        const vtkInteractorStyleTrackballCamera = vtk.Interaction.Style.vtkInteractorStyleTrackballCamera;\n\n        // ----------------------------------------------------------------------------\n        // Meshes\n\n        //  ------------------------------------------------------------\n        // Meshes\n        // ----------------------------------------------------------------------------\n\n        const meshes = [];\n\n        function addMesh(name, source) {\n            const mapper = vtkMapper.newInstance();\n            mapper.setInputData(source.getOutputData());\n            meshes.push({ name, mapper });\n        }\n\n        addMesh('Cone', vtkConeSource.newInstance());\n        addMesh('Sphere', vtkSphereSource.newInstance());\n        addMesh('Cube', vtkCubeSource.newInstance());\n        addMesh('Cylinder', vtkCylinderSource.newInstance());\n\n        // ----------------------------------------------------------------------------\n        // Properties\n        // ----------------------------------------------------------------------------\n\n        const properties = [\n            {\n                name: '- Red',\n                properties: { color: [1, 0.6, 0.6] },\n            },\n            {\n                name: 'Edge - Red',\n                properties: { edgeVisibility: true, color: [1, 0.6, 0.6] },\n            },\n            {\n                name: '- Blue',\n                properties: { color: [0.6, 0.6, 1] },\n            },\n            {\n                name: 'Edge - Green',\n                properties: { edgeVisibility: true, color: [0.6, 1, 0.6] },\n            },\n            {\n                name: '- Green',\n                properties: { color: [0.6, 1, 0.6] },\n            },\n            {\n                name: 'Edge - Blue',\n                properties: { edgeVisibility: true, color: [0.6, 0.6, 1] },\n            },\n        ];\n\n        // ----------------------------------------------------------------------------\n        // Background colors\n        // ----------------------------------------------------------------------------\n\n        const colors = [\n            [0.2, 0.2, 0.2],\n            [0.4, 0.2, 0.3],\n            [0.2, 0.4, 0.3],\n            [0.6, 0.6, 0.6],\n            [0.2, 0.4, 0.4],\n            [0.3, 0.4, 0.2],\n            [0.3, 0.2, 0.4],\n        ];\n\n        // ----------------------------------------------------------------------------\n        // Single RenderWindow in fullscreen\n        // ----------------------------------------------------------------------------\n\n        const RENDERERS = {};\n\n        const renderWindow = vtkRenderWindow.newInstance();\n        const renderWindowView = renderWindow.newAPISpecificView();\n        renderWindow.addView(renderWindowView);\n\n        const rootContainer = document.createElement('div');\n        rootContainer.style.position = 'fixed';\n        rootContainer.style.zIndex = -1;\n        rootContainer.style.left = 0;\n        rootContainer.style.top = 0;\n        rootContainer.style.pointerEvents = 'none';\n        document.body.appendChild(rootContainer);\n\n        renderWindowView.setContainer(rootContainer);\n\n        const interactor = vtkRenderWindowInteractor.newInstance();\n        interactor.setView(renderWindowView);\n        interactor.initialize();\n        interactor.setInteractorStyle(vtkInteractorStyleTrackballCamera.newInstance());\n\n        function updateViewPort(element, renderer) {\n            const { innerHeight, innerWidth } = window;\n            const { x, y, width, height } = element.getBoundingClientRect();\n            const viewport = [\n                x / innerWidth,\n                1 - (y + height) / innerHeight,\n                (x + width) / innerWidth,\n                1 - y / innerHeight,\n            ];\n            renderer.setViewport(...viewport);\n        }\n\n        function recomputeViewports() {\n            const rendererElems = document.querySelectorAll('.renderer');\n            for (let i = 0; i < rendererElems.length; i++) {\n                const elem = rendererElems[i];\n                const { id } = elem;\n                const renderer = RENDERERS[id];\n                updateViewPort(elem, renderer);\n            }\n            renderWindow.render();\n        }\n\n        function resize() {\n            rootContainer.style.width = `${window.innerWidth}px`;\n            renderWindowView.setSize(window.innerWidth, window.innerHeight);\n            recomputeViewports();\n        }\n\n        new ResizeObserver(resize).observe(document.body);\n        document.addEventListener('scroll', recomputeViewports);\n\n        // ----------------------------------------------------------------------------\n        // Renderers\n        // ----------------------------------------------------------------------------\n\n        let meshIndex = 0;\n        let propertyIndex = 0;\n        let bgIndex = 0;\n        let rendererId = 1;\n\n        function applyStyle(element) {\n            element.classList.add('renderer');\n            element.style.width = '200px';\n            element.style.height = '200px';\n            element.style.margin = '20px';\n            element.style.border = 'solid 1px #333';\n            element.style.display = 'inline-block';\n            element.style.boxSizing = 'border';\n            element.style.textAlign = 'center';\n            element.style.color = 'white';\n            return element;\n        }\n\n        let captureCurrentRenderer = false;\n\n        function setCaptureCurrentRenderer(yn) {\n            captureCurrentRenderer = yn;\n            if (yn && interactor.getCurrentRenderer()) {\n                // fix the current renderer to, well, the current renderer\n                interactor.setCurrentRenderer(interactor.getCurrentRenderer());\n            } else {\n                // remove the fixed current renderer\n                interactor.setCurrentRenderer(null);\n            }\n        }\n\n        function bindInteractor(renderer, el) {\n            // only change the interactor's container if needed\n            if (interactor.getContainer() !== el) {\n                if (interactor.getContainer()) {\n                    interactor.unbindEvents();\n                }\n                if (captureCurrentRenderer) {\n                    interactor.setCurrentRenderer(renderer);\n                }\n                if (el) {\n                    interactor.bindEvents(el);\n                }\n            }\n        }\n\n        function addRenderer() {\n            const mesh = meshes[meshIndex];\n            const prop = properties[propertyIndex];\n            const background = colors[bgIndex];\n            meshIndex = (meshIndex + 1) % meshes.length;\n            propertyIndex = (propertyIndex + 1) % properties.length;\n            bgIndex = (bgIndex + 1) % colors.length;\n\n            const container = applyStyle(document.createElement('div'));\n            container.id = rendererId++;\n            document.body.appendChild(container);\n\n            const actor = vtkActor.newInstance();\n            actor.setMapper(mesh.mapper);\n            actor.getProperty().set(prop.properties);\n            actor.getProperty().setDiffuse(0.9);\n            actor.getProperty().setSpecular(0.2);\n            actor.getProperty().setSpecularPower(30);\n            actor.getProperty().setSpecularColor(1.0, 1.0, 1.0);\n            const renderer = vtkRenderer.newInstance({ background });\n            container.innerHTML = `${mesh.name} ${prop.name}`;\n\n            container.addEventListener('pointerenter', () =>\n                bindInteractor(renderer, container)\n            );\n            container.addEventListener('pointerleave', () => bindInteractor(null, null));\n\n            renderer.addActor(actor);\n            renderWindow.addRenderer(renderer);\n            updateViewPort(container, renderer);\n            renderer.resetCamera();\n\n            // Keep track of renderer\n            RENDERERS[container.id] = renderer;\n        }\n\n        // ----------------------------------------------------------------------------\n        // Fill up page\n        // ----------------------------------------------------------------------------\n\n        const checkbox = document.createElement('input');\n        checkbox.type = 'checkbox';\n        checkbox.name = 'singleRendererCapture';\n        const label = document.createElement('label');\n        label.for = checkbox.name;\n        label.innerText = 'Enable single renderer capture';\n\n        checkbox.addEventListener('input', (ev) => {\n            setCaptureCurrentRenderer(ev.target.checked);\n        });\n\n        document.body.appendChild(checkbox);\n        document.body.appendChild(label);\n        document.body.appendChild(document.createElement('br'));\n\n        for (let i = 0; i < 64; i++) {\n            addRenderer();\n        }\n        resize();\n\n        function updateCamera(renderer) {\n            const camera = renderer.getActiveCamera();\n            camera.azimuth(0.5);\n            renderer.resetCameraClippingRange();\n        }\n\n        function animate() {\n            Object.values(RENDERERS).forEach(updateCamera);\n            renderWindow.render();\n            window.requestAnimationFrame(animate);\n        }\n\n        window.requestAnimationFrame(animate);\n\n        // ----------------------------------------------------------------------------\n        // Globals\n        // ----------------------------------------------------------------------------\n\n        window.rw = renderWindow;\n        window.glrw = renderWindowView;\n        window.renderers = RENDERERS;\n\n\n\n    </script>\n\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 19:\n描述: Loads and visualizes a 3D model (VTP format) from a remote URL using `vtkHttpDataSetReader` with gzip support.\n\nVTK.js 模块: ['vtk.IO.Core.DataAccessHelper.HttpDataAccessHelper', 'vtk.IO.Core.vtkHttpDataSetReader', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow', 'vtk.Rendering.OpenGL.Profiles.Geometry']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js IO-HttpDataSetReader</title>\n</head>\n\n<body>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const data_path = 'http://kitware.github.io/vtk-js/data/cow.vtp'\n        const vtkHttpDataSetReader = vtk.IO.Core.vtkHttpDataSetReader;\n        // const vtkGeometry = vtk.Rendering.OpenGL.Profiles.Geometry\n\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkActor = vtk.Rendering.Core.vtkActor\n        const vtkMapper = vtk.Rendering.Core.vtkMapper\n\n        // Force the loading of HttpDataAccessHelper to support gzip decompression\n        const vtkHttpDataAccessHelper = vtk.IO.Core.DataAccessHelper.HttpDataAccessHelper\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance();\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // ----------------------------------------------------------------------------\n        // Example code\n        // ----------------------------------------------------------------------------\n        // Server is not sending the .gz and with the compress header\n        // Need to fetch the true file name and uncompress it locally\n        // ----------------------------------------------------------------------------\n\n        const reader = vtkHttpDataSetReader.newInstance({ fetchGzip: true });\n        reader.setUrl(data_path).then(() => {\n            reader.loadData().then(() => {\n                renderer.resetCamera();\n                renderWindow.render();\n            });\n        });\n\n        const mapper = vtkMapper.newInstance();\n        mapper.setInputConnection(reader.getOutputPort());\n\n        const actor = vtkActor.newInstance();\n        actor.setMapper(mapper);\n\n        renderer.addActor(actor);\n\n        // -----------------------------------------------------------\n        // Make some variables global so that you can inspect and\n        // modify objects in your browser's developer console:\n        // -----------------------------------------------------------\n\n        // global.source = reader;\n        // global.mapper = mapper;\n        // global.actor = actor;\n        // global.renderer = renderer;\n        // global.renderWindow = renderWindow;\n\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 20:\n描述: Generates and displays a 2D random image (100x100) using `vtkImageSlice` and `vtkImageMapper`.\n\nVTK.js 模块: ['vtk.Common.Core.vtkDataArray.newInstance', 'vtk.Common.DataModel.vtkImageData', 'vtk.Rendering.Core.vtkImageMapper', 'vtk.Rendering.Core.vtkImageSlice', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;// Actor for rendering 2D image slices\n        const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n        const vtkImageData = vtk.Common.DataModel.vtkImageData;\n\n        // Create render window\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // Create image data\n        const imageData = vtkImageData.newInstance();\n        imageData.setDimensions(100, 100, 1);\n        imageData.setSpacing(1.0, 1.0, 1.0);\n        imageData.setOrigin(0.0, 0.0, 0.0);\n\n        // Set pixel values for image data\n        const scalars = new Uint8Array(100 * 100);\n        for (let i = 0; i < 100 * 100; i++) {\n            scalars[i] = Math.random() * 255;\n        }\n        imageData.getPointData().setScalars(vtk.Common.Core.vtkDataArray.newInstance({ values: scalars, numberOfComponents: 1 }));\n\n        // Create mapper and actor\n        const mapper = vtkImageMapper.newInstance();\n        mapper.setInputData(imageData);\n\n        const actor = vtkImageSlice.newInstance();\n        actor.setMapper(mapper);\n\n        // Add actor to renderer\n        renderer.addActor(actor);\n        renderer.resetCamera();\n        renderWindow.render();\n    </script>\n</body>\n\n</html>\n\n\n--------------------------------------------------------------------------------------------------------------\n示例 21:\n描述: Visualizes a 3D vector field using `vtkImageStreamline` for streamlines, `vtkOutlineFilter` for data bounds, and seed points, with interactive resolution controls.\n\nVTK.js 模块: ['vtk.Rendering.Core.vtkMapper', 'vtk.Common.Core.vtkDataArray', 'vtk.Common.DataModel.vtkImageData', 'vtk.Filters.General.vtkImageStreamline', 'vtk.Filters.General.vtkOutlineFilter', 'vtk.Filters.Sources.vtkPlaneSource', 'vtk.Rendering.Core.Property', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkProperty.Representation', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance', 'vtk.macro']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js ImageOutlineFilter</title>\n    <!-- <link rel=\"stylesheet\" href=\"https://kit.fontawesome.com/419a5ebb56.css\" crossorigin=\"anonymous\"> -->\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n\n    <script type=\"text/javascript\" src=\"https://unpkg.com/@babel/polyfill@7.0.0/dist/polyfill.js\"></script>\n\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n\n    <script>\n        const vtkOutlineFilter = vtk.Filters.General.vtkOutlineFilter;\n        const vtkPlaneSource = vtk.Filters.Sources.vtkPlaneSource;\n        const vtkImageStreamline = vtk.Filters.General.vtkImageStreamline;\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        console.log(vtk.Rendering.Core.Property);\n\n        const Representation = vtk.Rendering.Core.vtkProperty.Representation;\n        // const Representation = Constants.representation;\n        const vtkDataArray = vtk.Common.Core.vtkDataArray;\n        const vtkImageData = vtk.Common.DataModel.vtkImageData;\n        const macro = vtk.macro;\n\n        // Load control panel HTML\n        const controlPanel = `<table>\n  <tr>\n    <td>X Resolution</td>\n    <td>\n      <input class='xResolution' type=\"range\" min=\"1\" max=\"25\" step=\"1\" value=\"10\" />\n    </td>\n  </tr>\n  <tr>\n    <td>Y Resolution</td>\n    <td>\n      <input class='yResolution' type=\"range\" min=\"1\" max=\"25\" step=\"1\" value=\"10\" />\n    </td>\n  </tr>\n</table>\n`\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // ----------------------------------------------------------------------------\n        // Example code\n        // ----------------------------------------------------------------------------\n\n        function addRepresentation(name, filter, props = {}) {\n            const mapper = vtkMapper.newInstance();\n            mapper.setInputConnection(filter.getOutputPort());\n\n            const actor = vtkActor.newInstance();\n            actor.setMapper(mapper);\n            actor.getProperty().set(props);\n            renderer.addActor(actor);\n\n            window[`${name}Actor`] = actor;\n            window[`${name}Mapper`] = mapper;\n        }\n\n        // ----------------------------------------------------------------------------\n\n        const vecSource = macro.newInstance((publicAPI, model) => {\n            macro.obj(publicAPI, model); // make it an object\n            macro.algo(publicAPI, model, 0, 1); // mixin algorithm code 1 in, 1 out\n            publicAPI.requestData = (inData, outData) => {\n                // implement requestData\n                if (!outData[0]) {\n                    const id = vtkImageData.newInstance();\n                    id.setSpacing(0.1, 0.1, 0.1);\n                    id.setExtent(0, 9, 0, 9, 0, 9);\n                    const dims = [10, 10, 10];\n\n                    const newArray = new Float32Array(3 * dims[0] * dims[1] * dims[2]);\n\n                    let i = 0;\n                    for (let z = 0; z <= 9; z++) {\n                        for (let y = 0; y <= 9; y++) {\n                            for (let x = 0; x <= 9; x++) {\n                                newArray[i++] = 0.1 * x;\n                                const v = 0.1 * y;\n                                newArray[i++] = v * v;\n                                newArray[i++] = 0;\n                            }\n                        }\n                    }\n\n                    const da = vtkDataArray.newInstance({\n                        numberOfComponents: 3,\n                        values: newArray,\n                    });\n                    da.setName('vectors');\n\n                    const cpd = id.getPointData();\n                    cpd.setVectors(da);\n\n                    // Update output\n                    outData[0] = id;\n                }\n            };\n        })();\n\n        const planeSource = vtkPlaneSource.newInstance();\n        planeSource.setOrigin(0.05, 0.05, 0.05);\n        planeSource.setPoint1(0.05, 0.85, 0.05);\n        planeSource.setPoint2(0.05, 0.05, 0.85);\n\n        const sline = vtkImageStreamline.newInstance();\n        sline.setIntegrationStep(0.01);\n        sline.setInputConnection(vecSource.getOutputPort());\n        sline.setInputConnection(planeSource.getOutputPort(), 1);\n\n        const outlineFilter = vtkOutlineFilter.newInstance();\n        outlineFilter.setInputConnection(vecSource.getOutputPort());\n\n        addRepresentation('streamLine', sline, {\n            diffuseColor: [0, 1, 1],\n            lineWidth: 5,\n        });\n        addRepresentation('outline', outlineFilter, {\n            diffuseColor: [1, 0, 0],\n            lineWidth: 3,\n        });\n        addRepresentation('seed', planeSource, {\n            representation: Representation.POINTS,\n            pointSize: 10,\n        });\n\n        // -----------------------------------------------------------\n\n        renderer.resetCamera();\n        renderWindow.render();\n\n        // ----------------------------------------------------------------------------\n        // UI control handling\n        // ----------------------------------------------------------------------------\n\n        fullScreenRenderer.addController(controlPanel);\n\n        ['xResolution', 'yResolution'].forEach((propertyName) => {\n            document.querySelector(`.${propertyName}`).addEventListener('input', (e) => {\n                const value = Number(e.target.value);\n                planeSource.set({ [propertyName]: value });\n                renderWindow.render();\n            });\n        });\n\n        // -----------------------------------------------------------\n        // Make some variables global so that you can inspect and\n        // modify objects in your browser's developer console:\n        // -----------------------------------------------------------\n\n        window.planeSource = planeSource;\n        window.sline = sline;\n        window.outlineFilter = outlineFilter;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n\n\n    </script>\n\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 22:\n描述: Displays a 2D image volume with an outlined labelmap. Specific regions (high/low values) are highlighted in red/green with transparent outlines.\n\nVTK.js 模块: ['vtk.Common.Core.vtkDataArray', 'vtk.Common.DataModel.vtkDataSet.FieldAssociations', 'vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes', 'vtk.Common.DataModel.vtkImageData', 'vtk.Common.DataModel.vtkPiecewiseFunction', 'vtk.Filters.General.vtkCalculator', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkColorTransferFunction', 'vtk.Rendering.Core.vtkImageMapper', 'vtk.Rendering.Core.vtkImageSlice', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js ImageLabelOutline</title>\n    <style>\n        #renderer {\n            width: 100%;\n            height: 600px;\n            background-color: #333;\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        // Use the vtk namespace to reference each class\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n        const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n        const vtkImageData = vtk.Common.DataModel.vtkImageData;\n        const vtkDataArray = vtk.Common.Core.vtkDataArray;\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n\n        // Use the vtk namespace to reference constants\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldAssociations;\n\n        const fullScreenRenderWindow = vtkFullScreenRenderWindow.newInstance({\n            background: [0.5, 0.5, 0.5],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n        const BACKGROUND = 0;\n        const LOW_VALUE = 80;\n        const HIGH_VALUE = 160;\n\n        const FIRST_SEGMENT = 1;\n        const SECOND_SEGMENT = 5;\n\n        /**\n         * Creates a labelmap image with the same dimensions as the background volume.\n         * @param {vtkImageData} backgroundImageData - The background volume data.\n         * @returns {Object} An object containing the labelmap actor, mapper, image data, color transfer function, and opacity function.\n         */\n        function createLabelmap(backgroundImageData) {\n            // Create a labelmap image the same dimensions as our background volume.\n            const labelMapData = vtkImageData.newInstance(\n                backgroundImageData.get('spacing', 'origin', 'direction')\n            );\n\n            labelMapData.computeTransforms();\n\n            const dataArray = vtkDataArray.newInstance({\n                numberOfComponents: 1,\n                values: new Uint8Array(backgroundImageData.getNumberOfPoints()),\n            });\n            labelMapData.getPointData().setScalars(dataArray);\n\n            labelMapData.setDimensions(...backgroundImageData.getDimensions());\n            labelMapData.setSpacing(...backgroundImageData.getSpacing());\n            labelMapData.setOrigin(...backgroundImageData.getOrigin());\n            labelMapData.setDirection(...backgroundImageData.getDirection());\n            const mapper = vtkImageMapper.newInstance();\n            mapper.setInputData(labelMapData);\n\n            const actor = vtkImageSlice.newInstance();\n\n            actor.setMapper(mapper);\n\n            const labelMap = {\n                actor,\n                mapper,\n                imageData: labelMapData,\n                cfun: vtkColorTransferFunction.newInstance(),\n                ofun: vtkPiecewiseFunction.newInstance(),\n            };\n\n            // Labelmap pipeline\n            labelMap.mapper.setInputData(labelMapData);\n            labelMap.actor.setMapper(labelMap.mapper);\n\n            // Set up labelMap color and opacity mapping\n            labelMap.cfun.addRGBPoint(0, 0, 0, 0); // label \"1\" will be red\n            labelMap.cfun.addRGBPoint(FIRST_SEGMENT, 1, 0, 0); // label \"1\" will be red\n            labelMap.cfun.addRGBPoint(SECOND_SEGMENT, 0, 1, 0); // label \"5\" will be green\n            labelMap.ofun.addPoint(0, 0);\n            labelMap.ofun.addPoint(FIRST_SEGMENT, 0.1); // Red will have an opacity of 0.1.\n            labelMap.ofun.addPoint(SECOND_SEGMENT, 0.1); // Green will have an opacity of 0.1.\n\n            labelMap.actor.getProperty().setRGBTransferFunction(0, labelMap.cfun);\n            labelMap.actor.getProperty().setScalarOpacity(0, labelMap.ofun);\n            labelMap.actor.getProperty().setInterpolationTypeToNearest();\n\n            labelMap.actor.getProperty().setUseLabelOutline(true);\n            // Label outline thickness is for first segment -> 2 (positioned at array index 0), second segment -> 4\n            // (positioned at array index 4)\n            labelMap.actor.getProperty().setLabelOutlineThickness([2, 1, 1, 1, 4]);\n            labelMap.actor.getProperty().setLabelOutlineOpacity(1.0);\n\n            // This is very important to make sure the labelmap is rendered\n            // correctly\n            labelMap.actor.getProperty().setUseLookupTableScalarRange(true);\n\n            const dims = labelMap.imageData.getDimensions();\n            const values = labelMap.imageData.getPointData().getScalars().getData();\n\n            const backgroundValues = backgroundImageData\n                .getPointData()\n                .getScalars()\n                .getData();\n            const size = dims[0] * dims[1] * dims[2];\n\n            for (let i = 0; i < size; i++) {\n                if (backgroundValues[i] === LOW_VALUE) {\n                    values[i] = FIRST_SEGMENT;\n                } else if (backgroundValues[i] === HIGH_VALUE) {\n                    values[i] = SECOND_SEGMENT;\n                }\n            }\n\n            labelMap.imageData.getPointData().getScalars().setData(values);\n\n            return labelMap;\n        }\n\n        // Create a one slice vtkImageData that has four quadrants of different values\n        const imageData = vtkImageData.newInstance();\n        const dims = [10, 10, 1];\n        imageData.setSpacing(1, 1, 1);\n        imageData.setOrigin(0.1, 0.1, 0.1);\n        imageData.setDirection(1, 0, 0, 0, 1, 0, 0, 0, 1);\n        imageData.setExtent(0, dims[0] - 1, 0, dims[1] - 1, 0, dims[2] - 1);\n\n        imageData.computeTransforms();\n\n        const values = new Uint8Array(dims[0] * dims[1] * dims[2]);\n\n        let i = 0;\n        for (let y = 0; y < dims[1]; y++) {\n            for (let x = 0; x < dims[0]; x++, i++) {\n                if ((x < 3 && y < 3) || (x > 7 && y > 7)) {\n                    values[i] = BACKGROUND;\n                } else if (x > 4 && x < 6 && y > 4 && y < 7) {\n                    values[i] = LOW_VALUE;\n                } else {\n                    values[i] = HIGH_VALUE;\n                }\n            }\n        }\n\n        const dataArray = vtkDataArray.newInstance({\n            numberOfComponents: 1,\n            values,\n        });\n        imageData.getPointData().setScalars(dataArray);\n        imageData.modified();\n\n        const data = imageData;\n        const labelMap = createLabelmap(data);\n\n        const actor = vtkImageSlice.newInstance();\n        const mapper = vtkImageMapper.newInstance();\n        mapper.setInputData(data);\n        actor.setMapper(mapper);\n        actor.getProperty().setInterpolationTypeToNearest();\n\n        renderer.addActor(actor);\n        renderer.addActor(labelMap.actor);\n        renderer.resetCamera();\n        renderer.resetCameraClippingRange();\n        renderWindow.render();\n\n        window.fullScreen = fullScreenRenderWindow;\n\n    </script>\n</body>\n\n</html>\n\n            ",
    "status": "success"
  },
  {
    "index": 3,
    "original_query": "Generate an HTML page using vtk.js to visualize the Isabel dataset with streamline rendering.\n\nLoad the dataset from: http://127.0.0.1:5000/dataset/isabel.vti\n\nUse the \"Velocity\" array as the vector field for streamlines\n\nGenerate seed points at the center of the dataset with sufficient density to cover the domain\n\nCompute streamlines following the velocity field\n\nRender streamlines in cyan ([0, 1, 1]) with a specified line width\n\nRender a dataset outline in red ([1, 0, 0]) with a specified line width",
    "splited_queries": [
      {
        "description": "Data Loading — Load the Isabel dataset from 'http://127.0.0.1:5000/dataset/isabel.vti' using vtkXMLImageDataReader."
      },
      {
        "description": "Data Processing — Extract the 'Velocity' vector array as the input for streamline computation."
      },
      {
        "description": "Seed Point Generation — Generate a dense grid of seed points at the center of the dataset using vtkPointSource or equivalent logic to cover the domain volume."
      },
      {
        "description": "Streamline Computation — Compute streamlines using the velocity field with vtkImageStreamline, following the vector field from the generated seed points."
      },
      {
        "description": "Streamline Rendering — Render the streamlines using vtkMapper with cyan color ([0, 1, 1]) and a specified line width."
      },
      {
        "description": "Outline Generation — Generate a bounding box outline of the dataset using vtkOutlineFilter."
      },
      {
        "description": "Outline Rendering — Render the dataset outline using vtkMapper with red color ([1, 0, 0]) and a specified line width."
      },
      {
        "description": "Rendering Setup — Configure the render window, renderer, and interactor to display both streamlines and outline in the same scene."
      }
    ],
    "final_prompt": "\n    Generate only the HTML code without any additional text or markdown formatting.\n    User Requirements:\n    Generate an HTML page using vtk.js to visualize the Isabel dataset with streamline rendering.\n\nLoad the dataset from: http://127.0.0.1:5000/dataset/isabel.vti\n\nUse the \"Velocity\" array as the vector field for streamlines\n\nGenerate seed points at the center of the dataset with sufficient density to cover the domain\n\nCompute streamlines following the velocity field\n\nRender streamlines in cyan ([0, 1, 1]) with a specified line width\n\nRender a dataset outline in red ([1, 0, 0]) with a specified line width\n\n    Relevant VTK.js Examples:\n    示例 1:\n描述: Visualizes a 3D vector field using `vtkImageStreamline` for streamlines, `vtkOutlineFilter` for data bounds, and seed points, with interactive resolution controls.\n\nVTK.js 模块: ['vtk.Filters.General.vtkImageStreamline', 'vtk.Common.Core.vtkDataArray', 'vtk.Common.DataModel.vtkImageData', 'vtk.Filters.General.vtkOutlineFilter', 'vtk.Filters.Sources.vtkPlaneSource', 'vtk.Rendering.Core.Property', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkMapper', 'vtk.Rendering.Core.vtkProperty.Representation', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance', 'vtk.macro']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js ImageOutlineFilter</title>\n    <!-- <link rel=\"stylesheet\" href=\"https://kit.fontawesome.com/419a5ebb56.css\" crossorigin=\"anonymous\"> -->\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n\n    <script type=\"text/javascript\" src=\"https://unpkg.com/@babel/polyfill@7.0.0/dist/polyfill.js\"></script>\n\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n\n    <script>\n        const vtkOutlineFilter = vtk.Filters.General.vtkOutlineFilter;\n        const vtkPlaneSource = vtk.Filters.Sources.vtkPlaneSource;\n        const vtkImageStreamline = vtk.Filters.General.vtkImageStreamline;\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        console.log(vtk.Rendering.Core.Property);\n\n        const Representation = vtk.Rendering.Core.vtkProperty.Representation;\n        // const Representation = Constants.representation;\n        const vtkDataArray = vtk.Common.Core.vtkDataArray;\n        const vtkImageData = vtk.Common.DataModel.vtkImageData;\n        const macro = vtk.macro;\n\n        // Load control panel HTML\n        const controlPanel = `<table>\n  <tr>\n    <td>X Resolution</td>\n    <td>\n      <input class='xResolution' type=\"range\" min=\"1\" max=\"25\" step=\"1\" value=\"10\" />\n    </td>\n  </tr>\n  <tr>\n    <td>Y Resolution</td>\n    <td>\n      <input class='yResolution' type=\"range\" min=\"1\" max=\"25\" step=\"1\" value=\"10\" />\n    </td>\n  </tr>\n</table>\n`\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // ----------------------------------------------------------------------------\n        // Example code\n        // ----------------------------------------------------------------------------\n\n        function addRepresentation(name, filter, props = {}) {\n            const mapper = vtkMapper.newInstance();\n            mapper.setInputConnection(filter.getOutputPort());\n\n            const actor = vtkActor.newInstance();\n            actor.setMapper(mapper);\n            actor.getProperty().set(props);\n            renderer.addActor(actor);\n\n            window[`${name}Actor`] = actor;\n            window[`${name}Mapper`] = mapper;\n        }\n\n        // ----------------------------------------------------------------------------\n\n        const vecSource = macro.newInstance((publicAPI, model) => {\n            macro.obj(publicAPI, model); // make it an object\n            macro.algo(publicAPI, model, 0, 1); // mixin algorithm code 1 in, 1 out\n            publicAPI.requestData = (inData, outData) => {\n                // implement requestData\n                if (!outData[0]) {\n                    const id = vtkImageData.newInstance();\n                    id.setSpacing(0.1, 0.1, 0.1);\n                    id.setExtent(0, 9, 0, 9, 0, 9);\n                    const dims = [10, 10, 10];\n\n                    const newArray = new Float32Array(3 * dims[0] * dims[1] * dims[2]);\n\n                    let i = 0;\n                    for (let z = 0; z <= 9; z++) {\n                        for (let y = 0; y <= 9; y++) {\n                            for (let x = 0; x <= 9; x++) {\n                                newArray[i++] = 0.1 * x;\n                                const v = 0.1 * y;\n                                newArray[i++] = v * v;\n                                newArray[i++] = 0;\n                            }\n                        }\n                    }\n\n                    const da = vtkDataArray.newInstance({\n                        numberOfComponents: 3,\n                        values: newArray,\n                    });\n                    da.setName('vectors');\n\n                    const cpd = id.getPointData();\n                    cpd.setVectors(da);\n\n                    // Update output\n                    outData[0] = id;\n                }\n            };\n        })();\n\n        const planeSource = vtkPlaneSource.newInstance();\n        planeSource.setOrigin(0.05, 0.05, 0.05);\n        planeSource.setPoint1(0.05, 0.85, 0.05);\n        planeSource.setPoint2(0.05, 0.05, 0.85);\n\n        const sline = vtkImageStreamline.newInstance();\n        sline.setIntegrationStep(0.01);\n        sline.setInputConnection(vecSource.getOutputPort());\n        sline.setInputConnection(planeSource.getOutputPort(), 1);\n\n        const outlineFilter = vtkOutlineFilter.newInstance();\n        outlineFilter.setInputConnection(vecSource.getOutputPort());\n\n        addRepresentation('streamLine', sline, {\n            diffuseColor: [0, 1, 1],\n            lineWidth: 5,\n        });\n        addRepresentation('outline', outlineFilter, {\n            diffuseColor: [1, 0, 0],\n            lineWidth: 3,\n        });\n        addRepresentation('seed', planeSource, {\n            representation: Representation.POINTS,\n            pointSize: 10,\n        });\n\n        // -----------------------------------------------------------\n\n        renderer.resetCamera();\n        renderWindow.render();\n\n        // ----------------------------------------------------------------------------\n        // UI control handling\n        // ----------------------------------------------------------------------------\n\n        fullScreenRenderer.addController(controlPanel);\n\n        ['xResolution', 'yResolution'].forEach((propertyName) => {\n            document.querySelector(`.${propertyName}`).addEventListener('input', (e) => {\n                const value = Number(e.target.value);\n                planeSource.set({ [propertyName]: value });\n                renderWindow.render();\n            });\n        });\n\n        // -----------------------------------------------------------\n        // Make some variables global so that you can inspect and\n        // modify objects in your browser's developer console:\n        // -----------------------------------------------------------\n\n        window.planeSource = planeSource;\n        window.sline = sline;\n        window.outlineFilter = outlineFilter;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n\n\n    </script>\n\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 2:\n描述: Loads 3D volume data, writes it to a binary XML format using `vtkXMLImageDataWriter`, reads it back with `vtkXMLImageDataReader`, and visualizes it\nVTK.js 模块: ['vtk.IO.XML.vtkXMLImageDataReader.newInstance', 'vtk.Common.DataModel.vtkPiecewiseFunction.newInstance', 'vtk.IO.Core.vtkHttpDataSetReader.newInstance', 'vtk.IO.XML.vtkXMLImageDataWriter.newInstance', 'vtk.IO.XML.vtkXMLWriter.FormatTypes.BINARY', 'vtk.Rendering.Core.vtkColorTransferFunction.newInstance', 'vtk.Rendering.Core.vtkVolume.newInstance', 'vtk.Rendering.Core.vtkVolumeMapper.newInstance', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js XMLImageDataWriter</title>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n\n    <script type=\"text/javascript\" src=\"https://unpkg.com/@babel/polyfill@7.0.0/dist/polyfill.js\"></script>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const dataPath = 'http://kitware.github.io/vtk-js/data/volume/headsq.vti';\n        const fullScreenRenderer = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance();\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        const reader = vtk.IO.Core.vtkHttpDataSetReader.newInstance({ fetchGzip: true });\n\n        const writer = vtk.IO.XML.vtkXMLImageDataWriter.newInstance();\n        writer.setFormat(vtk.IO.XML.vtkXMLWriter.FormatTypes.BINARY);\n        writer.setInputConnection(reader.getOutputPort());\n\n        const writerReader = vtk.IO.XML.vtkXMLImageDataReader.newInstance();\n\n        reader\n            .setUrl(dataPath, { loadData: true })\n            .then(() => {\n                const fileContents = writer.write(reader.getOutputData());\n\n                // Try to read it back.\n                const textEncoder = new TextEncoder();\n                writerReader.parseAsArrayBuffer(textEncoder.encode(fileContents));\n                renderer.resetCamera();\n                renderWindow.render();\n\n                const blob = new Blob([fileContents], { type: 'text/plain' });\n                const a = window.document.createElement('a');\n                a.href = window.URL.createObjectURL(blob, { type: 'text/plain' });\n                a.download = 'headsq.vti';\n                a.text = 'Download';\n                a.style.position = 'absolute';\n                a.style.left = '50%';\n                a.style.bottom = '10px';\n                document.body.appendChild(a);\n                a.style.background = 'white';\n                a.style.padding = '5px';\n            });\n\n        const actor = vtk.Rendering.Core.vtkVolume.newInstance();\n        const mapper = vtk.Rendering.Core.vtkVolumeMapper.newInstance();\n        mapper.setSampleDistance(1.1);\n        actor.setMapper(mapper);\n\n        mapper.setInputConnection(writerReader.getOutputPort());\n\n        // create color and opacity transfer functions\n        const ctfun = vtk.Rendering.Core.vtkColorTransferFunction.newInstance();\n        ctfun.addRGBPoint(200.0, 1.0, 1.0, 1.0);\n        ctfun.addRGBPoint(2000.0, 0.0, 0.0, 0.0);\n        const ofun = vtk.Common.DataModel.vtkPiecewiseFunction.newInstance();\n        ofun.addPoint(200.0, 0.0);\n        ofun.addPoint(1200.0, 0.2);\n        ofun.addPoint(4000.0, 0.4);\n        actor.getProperty().setRGBTransferFunction(0, ctfun);\n        actor.getProperty().setScalarOpacity(0, ofun);\n        actor.getProperty().setScalarOpacityUnitDistance(0, 4.5);\n        // actor.getProperty().setInterpolationTypeToNearest();\n        // actor.getProperty().setInterpolationTypeToFastLinear();\n        actor.getProperty().setInterpolationTypeToLinear();\n\n        renderer.addActor(actor);\n\n        window.writer = writer;\n        window.writerReader = writerReader;\n        window.mapper = mapper;\n        window.actor = actor;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n\n    </script>\n\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 3:\n描述: This code visualizes a 3D plane colored by a mathematical function, using `vtkCalculator` for scalar values and `vtkMapper` for coloring.\n\nVTK.js 模块: ['vtk.Rendering.Core.vtkMapper', 'vtk.Common.Core.vtkPoints', 'vtk.Common.DataModel.vtkDataSet.FieldDataTypes', 'vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes', 'vtk.Common.DataModel.vtkPolyData', 'vtk.Filters.General.vtkCalculator', 'vtk.Filters.Sources.vtkPlaneSource', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        // using vtk namespace\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPlaneSource = vtk.Filters.Sources.vtkPlaneSource;\n        const vtkPolyData = vtk.Common.DataModel.vtkPolyData;\n        const vtkPoints = vtk.Common.Core.vtkPoints;\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldDataTypes;\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // setting vtkCalculator and set formula\n\n        const simpleFilter = vtkCalculator.newInstance();\n\n        simpleFilter.setFormulaSimple(\n            FieldDataTypes.POINT, // Generate an output array defined over points.\n            [], // We don't request any point-data arrays because point coordinates are made available by default.\n            'outputArray', // Name the output array \n            (x) => (x[0] - 0.5) * (x[0] - 0.5) + (x[1] - 0.5) * (x[1] - 0.5) + 0.125\n        ); \n\n        //using plane source to generate a poly data which can be rendered by vtkActor\n        const planeSource = vtkPlaneSource.newInstance({\n            xResolution: 25,\n            yResolution: 25,\n        });\n\n        const sourceData = planeSource.getOutputData();\n\n        simpleFilter.setInputData(sourceData);\n        const planeActor = vtkActor.newInstance();\n        const planeMapper = vtkMapper.newInstance();\n        planeMapper.setInputData(simpleFilter.getOutputData());\n        planeMapper.setColorByArrayName('outputArray'); \n\n        planeMapper.setScalarModeToUsePointFieldData();   \n        planeActor.setMapper(planeMapper);\n        planeActor.getProperty().setEdgeVisibility(true);\n\n        renderer.addActor(planeActor);\n        renderer.resetCamera();\n        renderWindow.render();\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 4:\n描述: Loads and visualizes a 3D polygonal data file (`test_cone.vtp`) using `vtkXMLPolyDataReader` and `vtkMapper`.\n\nVTK.js 模块: ['vtk.Rendering.Core.vtkMapper', 'vtk.IO.XML.vtkXMLPolyDataReader', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js loading poly data, need to start by live server</title>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkXMLPolyDataReader = vtk.IO.XML.vtkXMLPolyDataReader;\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n\n        // crete the render window\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // load the vtp data locally\n        const reader = vtkXMLPolyDataReader.newInstance();\n        // set url and load the data\n        reader.setUrl('../datasets/test_cone.vtp').then(() => {\n            reader.loadData().then(() => {\n                // assign data to actor\n                const mapper = vtkMapper.newInstance();\n                console.log(reader.getOutputData(0))\n                mapper.setInputData(reader.getOutputData(0));\n                const actor = vtkActor.newInstance();\n                actor.setMapper(mapper);\n\n                //  adding actor to render and render the data\n                renderer.addActor(actor);\n                renderer.resetCamera();\n                renderWindow.render();\n            });\n        });\n    </script>\n</body>\n\n</html>\n\n\n--------------------------------------------------------------------------------------------------------------\n示例 5:\n描述: Generates a closed circular polyline from 16 points and triangulates it using `vtkContourTriangulator` for wireframe rendering.\n\nVTK.js 模块: ['vtk.Rendering.Core.vtkMapper', 'vtk.Common.Core.vtkCellArray', 'vtk.Common.Core.vtkPoints', 'vtk.Common.DataModel.vtkPolyData', 'vtk.Filters.General.vtkContourTriangulator', 'vtk.Filters.Sources.vtkSphereSource', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkCamera', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n</head>\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        //init necessary path \n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkSphereSource = vtk.Filters.Sources.vtkSphereSource;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkContourTriangulator = vtk.Filters.General.vtkContourTriangulator;\n        const vtkCamera = vtk.Rendering.Core.vtkCamera;\n        const vtkPolyData = vtk.Common.DataModel.vtkPolyData;\n        const vtkPoints  = vtk.Common.Core.vtkPoints;\n        const vtkCellArray = vtk.Common.Core.vtkCellArray;\n\n        //init render actor and mapper\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        const actor = vtkActor.newInstance();\n        renderer.addActor(actor);\n\n        const mapper = vtkMapper.newInstance({ interpolateScalarBeforeMapping: true });\n        actor.setMapper(mapper);\n        actor.getProperty().setRepresentationToWireframe();\n        \n        // Generate a ring of points\n        const source = vtkPolyData.newInstance();\n        const nbPoints = 16;\n        const points = vtkPoints.newInstance({\n            size: nbPoints * 3,\n        });\n        source.setPoints(points);\n        const lines = vtkCellArray.newInstance();\n        source.setLines(lines);\n\n        for (let i = 0; i < nbPoints; i++) {\n            const phi = (i * (2 * Math.PI)) / nbPoints;\n            points.setPoint(i, Math.cos(phi), Math.sin(phi), 0);\n\n            // Connect points with lines\n            if (i === nbPoints - 1) {\n                lines.insertNextCell([i, 0]);\n            } else {\n                lines.insertNextCell([i, i + 1]);\n            }\n        }\n\n        //apply triangular filter on data sources \n        const filter = vtkContourTriangulator.newInstance();\n        filter.setInputData(source);\n        mapper.setInputConnection(filter.getOutputPort());\n\n        renderer.resetCamera();\n        renderWindow.render();\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 6:\n描述: Generates a plane and uses `vtkCalculator` to create custom point data ('orientation', 'temperature', 'pressure'), which `vtkStickMapper` could use for rendering (currently not fully connected).\n\nVTK.js 模块: ['vtk.Rendering.Core.vtkStickMapper', 'vtk.Common.DataModel.vtkDataSet.FieldAssociations', 'vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes', 'vtk.Filters.General.vtkCalculator', 'vtk.Filters.Sources.vtkPlaneSource', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n\n    <script>\n        // Use vtk namespace to reference classes\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPlaneSource = vtk.Filters.Sources.vtkPlaneSource;\n        const vtkStickMapper = vtk.Rendering.Core.vtkStickMapper;\n\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldAssociations;\n\n        const controlPanel = `<table>\n  <tr>\n    <td>X Resolution</td>\n    <td>\n      <input class='xResolution' type=\"range\" min=\"1\" max=\"25\" step=\"1\" value=\"10\" />\n    </td>\n  </tr>\n  <tr>\n    <td>Y Resolution</td>\n    <td>\n      <input class='yResolution' type=\"range\" min=\"1\" max=\"25\" step=\"1\" value=\"10\" />\n    </td>\n  </tr>\n</table>`;\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // ----------------------------------------------------------------------------\n        // Example code\n        // ----------------------------------------------------------------------------\n\n        const planeSource = vtkPlaneSource.newInstance({\n            xResolution: 25,\n            yResolution: 25,\n        });\n\n\n        console.log(planeSource.getOutputData().toJSON());\n\n        const simpleFilter = vtkCalculator.newInstance();\n        const mapper = vtkStickMapper.newInstance();\n        const actor = vtkActor.newInstance();\n\n        simpleFilter.setFormula({\n            getArrays: (inputDataSets) => ({\n                input: [{ location: FieldDataTypes.COORDINATE }], // Require point coordinates as input\n                output: [\n                    // Generate two output arrays:\n                    {\n                        location: FieldDataTypes.POINT, // This array will be point-data ...\n                        name: 'orientation', // ... with the given name ...\n                        dataType: 'Float32Array', // ... of this type ...\n                        numberOfComponents: 3, // ... with this many components ...\n                    },\n                    {\n                        location: FieldDataTypes.POINT, // This array will be field data ...\n                        name: 'temperature', // ... with the given name ...\n                        dataType: 'Float32Array', // ... of this type ...\n                        attribute: AttributeTypes.SCALARS, // ... and will be marked as the default scalars.\n                        numberOfComponents: 1, // ... with this many components ...\n                    },\n                    {\n                        location: FieldDataTypes.POINT, // This array will be field data ...\n                        name: 'pressure', // ... with the given name ...\n                        dataType: 'Float32Array', // ... of this type ...\n                        numberOfComponents: 2, // ... with this many components ...\n                    },\n                ],\n            }),\n            evaluate: (arraysIn, arraysOut) => {\n                // Convert in the input arrays of vtkDataArrays into variables\n                // referencing the underlying JavaScript typed-data arrays:\n                // array in is null here?\n                console.log(\"arraysIn:\", arraysIn());\n                const [coords] = arraysIn.map((d) => d.getData());\n                const [orient, temp, press] = arraysOut.map((d) => d.getData());\n\n                // Since we are passed coords as a 3-component array,\n                // loop over all the points and compute the point-data output:\n                for (let i = 0, sz = coords.length / 3; i < sz; ++i) {\n                    orient[i * 3] =\n                        (coords[3 * i] - 0.5) * (coords[3 * i] - 0.5) +\n                        (coords[3 * i + 1] - 0.5) * (coords[3 * i + 1] - 0.5);\n                    orient[i * 3 + 1] =\n                        (coords[3 * i] - 0.5) * (coords[3 * i] - 0.5) +\n                        (coords[3 * i + 1] - 0.5) * (coords[3 * i + 1] - 0.5);\n                    orient[i * 3 + 2] = 1.0;\n\n                    temp[i] = coords[3 * i + 1];\n\n                    press[i * 2] =\n                        (coords[3 * i] * coords[3 * i] +\n                            coords[3 * i + 1] * coords[3 * i + 1]) *\n                        0.05 +\n                        0.05;\n                    press[i * 2 + 1] =\n                        (coords[3 * i] * coords[3 * i] +\n                            coords[3 * i + 1] * coords[3 * i + 1]) *\n                        0.01 +\n                        0.01;\n                }\n                // Mark the output vtkDataArray as modified\n                arraysOut.forEach((x) => x.modified());\n            },\n        });\n\n        // The generated 'temperature' array will become the default scalars\n        // so the plane mapper will color by 'temperature':\n        simpleFilter.setInputData(planeSource.getOutputData());\n        simpleFilter.update();\n        concole.log(simpleFilter.getOutputData());\n\n        //mapper.setInputConnection(simpleFilter.getOutputPort());\n\n        //mapper.setOrientationArray('orientation');\n        //mapper.setScaleArray('pressure');\n\n        //actor.setMapper(mapper);\n\n       // renderer.addActor(actor);\n       // renderer.resetCamera();\n        //renderWindow.render();\n\n        // -----------------------------------------------------------\n        // UI control handling\n        // -----------------------------------------------------------\n\n        // fullScreenRenderer.addController(controlPanel);\n        // ['xResolution', 'yResolution'].forEach((propertyName) => {\n        //     document.querySelector(`.${propertyName}`).addEventListener('input', (e) => {\n        //         const value = Number(e.target.value);\n        //         console.log(\"propertyName\",propertyName);\n        //         console.log(\"value\",value);\n        //         planeSource.set({ [propertyName]: value });\n        //         renderWindow.render();\n        //     });\n        // });\n\n        // -----------------------------------------------------------\n        // Make some variables global so that you can inspect and\n        // modify objects in your browser's developer console:\n        // -----------------------------------------------------------\n\n        window.planeSource = planeSource;\n        window.mapper = mapper;\n        window.actor = actor;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 7:\n描述: Visualizes a 3D cylinder generated by `vtkCylinderSource`, ensuring triangular geometry with `vtkTriangleFilter` for wireframe rendering.\n\nVTK.js 模块: ['vtk.Rendering.Core.vtkMapper', 'vtk.Filters.General.vtkTriangleFilter', 'vtk.Filters.Sources.vtkCylinderSource', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n</head>\n<body>\n  <script src=\"https://unpkg.com/vtk.js\"></script>\n  <script>\n    //declare necessary variables\n    const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n    const vtkActor = vtk.Rendering.Core.vtkActor;\n    const vtkMapper = vtk.Rendering.Core.vtkMapper;\n    const vtkTriangleFilter = vtk.Filters.General.vtkTriangleFilter;\n    const vtkSource = vtk.Filters.Sources.vtkCylinderSource;\n\n    // standard rendering code setup\n    const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({\n      background: [0, 0, 0],\n    });\n    const renderer = fullScreenRenderer.getRenderer();\n    const renderWindow = fullScreenRenderer.getRenderWindow();\n\n    // set the shape source and apply triangle filter on it\n    const shapeSource = vtkSource.newInstance();\n    const triangleFilter = vtkTriangleFilter.newInstance();\n    const mapper = vtkMapper.newInstance();\n    const actor = vtkActor.newInstance();\n\n    triangleFilter.setInputConnection(shapeSource.getOutputPort());\n    mapper.setInputConnection(triangleFilter.getOutputPort());\n    actor.setMapper(mapper);\n    // set the mapper to show the wireframe representation\n    actor.getProperty().setRepresentationToWireframe();\n\n    renderer.addActor(actor);\n    renderer.resetCamera();\n    renderWindow.render();\n  </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 8:\n描述: Loads and visualizes a G-code file as 3D colored line segments per layer using `vtkGCodeReader`.\n\nVTK.js 模块: ['vtk.Rendering.Core.vtkMapper.newInstance', 'vtk.Common.Core.vtkMath', 'vtk.IO.Misc.vtkGCodeReader.newInstance', 'vtk.Rendering.Core.vtkActor.newInstance', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js GCodeReader</title>\n</head>\n\n<body>\n\n    <script type=\"text/javascript\" src=\"https://unpkg.com/@babel/polyfill@7.0.0/dist/polyfill.js\"></script>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const fullScreenRenderer = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance();\n        renderer = fullScreenRenderer.getRenderer();\n        renderWindow = fullScreenRenderer.getRenderWindow();\n        const vtkMath = vtk.Common.Core.vtkMath;\n\n        const reader = vtk.IO.Misc.vtkGCodeReader.newInstance();\n\n        function refresh() {\n            if (renderer && renderWindow) {\n                renderer.resetCamera();\n                renderWindow.render();\n            }\n        }\n\n        function update() {\n\n            const numLayers = reader.getNumberOfOutputPorts();\n\n            const actors = [];\n\n            for (let idx = 1; idx < numLayers; idx++) {\n                const polyData = reader.getOutputData(idx);\n                if (polyData) {\n                    const mapper = vtk.Rendering.Core.vtkMapper.newInstance();\n                    mapper.setInputData(polyData);\n\n                    const actor = vtk.Rendering.Core.vtkActor.newInstance();\n                    actor.setMapper(mapper);\n\n                    const hue = idx / numLayers;\n                    const saturation = 0.8;\n                    const value = 1;\n                    const hsv = [hue, saturation, value];\n                    const rgb = [];\n                    vtkMath.hsv2rgb(hsv, rgb);\n                    actor.getProperty().setColor(rgb);\n                    actor.rotateX(-90);\n\n                    actors.push(actor);\n                }\n            }\n\n            actors.forEach((actor) => renderer.addActor(actor));\n            refresh();\n        }\n\n\n        reader.setUrl('http://kitware.github.io/vtk-js/data/gcode/cube.gcode', { binary: true }).then(update);\n\n        // Load data directly from remote when interface loads\n        // window.onload = function () {\n        //     // http://kitware.github.io/vtk-js/data/gcode/cube.gcode\n        //     fetch('http://kitware.github.io/vtk-js/data/gcode/cube.gcode')\n        //         .then(response => response.arrayBuffer())\n        //         .then(arrayBuffer => {\n        //             reader.parse(arrayBuffer);\n        //             update();\n        //         })\n        //         .catch(error => {\n        //             console.error('Error fetching file:', error);\n        //         });\n        // };\n\n    </script>\n\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 9:\n描述: Displays a 2D image volume with an outlined labelmap. Specific regions (high/low values) are highlighted in red/green with transparent outlines.\n\nVTK.js 模块: ['vtk.Rendering.Core.vtkImageMapper', 'vtk.Common.Core.vtkDataArray', 'vtk.Common.DataModel.vtkDataSet.FieldAssociations', 'vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes', 'vtk.Common.DataModel.vtkImageData', 'vtk.Common.DataModel.vtkPiecewiseFunction', 'vtk.Filters.General.vtkCalculator', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkColorTransferFunction', 'vtk.Rendering.Core.vtkImageSlice', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js ImageLabelOutline</title>\n    <style>\n        #renderer {\n            width: 100%;\n            height: 600px;\n            background-color: #333;\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        // Use the vtk namespace to reference each class\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n        const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n        const vtkImageData = vtk.Common.DataModel.vtkImageData;\n        const vtkDataArray = vtk.Common.Core.vtkDataArray;\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n\n        // Use the vtk namespace to reference constants\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldAssociations;\n\n        const fullScreenRenderWindow = vtkFullScreenRenderWindow.newInstance({\n            background: [0.5, 0.5, 0.5],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n        const BACKGROUND = 0;\n        const LOW_VALUE = 80;\n        const HIGH_VALUE = 160;\n\n        const FIRST_SEGMENT = 1;\n        const SECOND_SEGMENT = 5;\n\n        /**\n         * Creates a labelmap image with the same dimensions as the background volume.\n         * @param {vtkImageData} backgroundImageData - The background volume data.\n         * @returns {Object} An object containing the labelmap actor, mapper, image data, color transfer function, and opacity function.\n         */\n        function createLabelmap(backgroundImageData) {\n            // Create a labelmap image the same dimensions as our background volume.\n            const labelMapData = vtkImageData.newInstance(\n                backgroundImageData.get('spacing', 'origin', 'direction')\n            );\n\n            labelMapData.computeTransforms();\n\n            const dataArray = vtkDataArray.newInstance({\n                numberOfComponents: 1,\n                values: new Uint8Array(backgroundImageData.getNumberOfPoints()),\n            });\n            labelMapData.getPointData().setScalars(dataArray);\n\n            labelMapData.setDimensions(...backgroundImageData.getDimensions());\n            labelMapData.setSpacing(...backgroundImageData.getSpacing());\n            labelMapData.setOrigin(...backgroundImageData.getOrigin());\n            labelMapData.setDirection(...backgroundImageData.getDirection());\n            const mapper = vtkImageMapper.newInstance();\n            mapper.setInputData(labelMapData);\n\n            const actor = vtkImageSlice.newInstance();\n\n            actor.setMapper(mapper);\n\n            const labelMap = {\n                actor,\n                mapper,\n                imageData: labelMapData,\n                cfun: vtkColorTransferFunction.newInstance(),\n                ofun: vtkPiecewiseFunction.newInstance(),\n            };\n\n            // Labelmap pipeline\n            labelMap.mapper.setInputData(labelMapData);\n            labelMap.actor.setMapper(labelMap.mapper);\n\n            // Set up labelMap color and opacity mapping\n            labelMap.cfun.addRGBPoint(0, 0, 0, 0); // label \"1\" will be red\n            labelMap.cfun.addRGBPoint(FIRST_SEGMENT, 1, 0, 0); // label \"1\" will be red\n            labelMap.cfun.addRGBPoint(SECOND_SEGMENT, 0, 1, 0); // label \"5\" will be green\n            labelMap.ofun.addPoint(0, 0);\n            labelMap.ofun.addPoint(FIRST_SEGMENT, 0.1); // Red will have an opacity of 0.1.\n            labelMap.ofun.addPoint(SECOND_SEGMENT, 0.1); // Green will have an opacity of 0.1.\n\n            labelMap.actor.getProperty().setRGBTransferFunction(0, labelMap.cfun);\n            labelMap.actor.getProperty().setScalarOpacity(0, labelMap.ofun);\n            labelMap.actor.getProperty().setInterpolationTypeToNearest();\n\n            labelMap.actor.getProperty().setUseLabelOutline(true);\n            // Label outline thickness is for first segment -> 2 (positioned at array index 0), second segment -> 4\n            // (positioned at array index 4)\n            labelMap.actor.getProperty().setLabelOutlineThickness([2, 1, 1, 1, 4]);\n            labelMap.actor.getProperty().setLabelOutlineOpacity(1.0);\n\n            // This is very important to make sure the labelmap is rendered\n            // correctly\n            labelMap.actor.getProperty().setUseLookupTableScalarRange(true);\n\n            const dims = labelMap.imageData.getDimensions();\n            const values = labelMap.imageData.getPointData().getScalars().getData();\n\n            const backgroundValues = backgroundImageData\n                .getPointData()\n                .getScalars()\n                .getData();\n            const size = dims[0] * dims[1] * dims[2];\n\n            for (let i = 0; i < size; i++) {\n                if (backgroundValues[i] === LOW_VALUE) {\n                    values[i] = FIRST_SEGMENT;\n                } else if (backgroundValues[i] === HIGH_VALUE) {\n                    values[i] = SECOND_SEGMENT;\n                }\n            }\n\n            labelMap.imageData.getPointData().getScalars().setData(values);\n\n            return labelMap;\n        }\n\n        // Create a one slice vtkImageData that has four quadrants of different values\n        const imageData = vtkImageData.newInstance();\n        const dims = [10, 10, 1];\n        imageData.setSpacing(1, 1, 1);\n        imageData.setOrigin(0.1, 0.1, 0.1);\n        imageData.setDirection(1, 0, 0, 0, 1, 0, 0, 0, 1);\n        imageData.setExtent(0, dims[0] - 1, 0, dims[1] - 1, 0, dims[2] - 1);\n\n        imageData.computeTransforms();\n\n        const values = new Uint8Array(dims[0] * dims[1] * dims[2]);\n\n        let i = 0;\n        for (let y = 0; y < dims[1]; y++) {\n            for (let x = 0; x < dims[0]; x++, i++) {\n                if ((x < 3 && y < 3) || (x > 7 && y > 7)) {\n                    values[i] = BACKGROUND;\n                } else if (x > 4 && x < 6 && y > 4 && y < 7) {\n                    values[i] = LOW_VALUE;\n                } else {\n                    values[i] = HIGH_VALUE;\n                }\n            }\n        }\n\n        const dataArray = vtkDataArray.newInstance({\n            numberOfComponents: 1,\n            values,\n        });\n        imageData.getPointData().setScalars(dataArray);\n        imageData.modified();\n\n        const data = imageData;\n        const labelMap = createLabelmap(data);\n\n        const actor = vtkImageSlice.newInstance();\n        const mapper = vtkImageMapper.newInstance();\n        mapper.setInputData(data);\n        actor.setMapper(mapper);\n        actor.getProperty().setInterpolationTypeToNearest();\n\n        renderer.addActor(actor);\n        renderer.addActor(labelMap.actor);\n        renderer.resetCamera();\n        renderer.resetCameraClippingRange();\n        renderWindow.render();\n\n        window.fullScreen = fullScreenRenderWindow;\n\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 10:\n描述: Loads a 3D volume (`headsq.vti`) and displays three orthogonal slices (I, J, K) with interactive controls for position and color properties.\n\nVTK.js 模块: ['vtk.Rendering.Core.vtkImageMapper', 'vtk.IO.Core.vtkHttpDataSetReader', 'vtk.Rendering.Core.vtkImageSlice', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js Isosurface Visualization</title>\n    <link rel=\"stylesheet\" href=\"https://kit.fontawesome.com/419a5ebb56.css\" crossorigin=\"anonymous\">\n    <style>\n        #renderer {\n            width: 100%;\n            height: 600px;\n            background-color: #333;\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <!-- Set vtk.js favicon -->\n    <script type=\"module\" src=\"https://unpkg.com/vtk.js/favicon.js\"></script>\n\n    <!-- Load WebGL and WebGPU rendering modules -->\n    <script type=\"module\" src=\"https://unpkg.com/vtk.js/Sources/Rendering/Profiles/Volume.js\"></script>\n\n    <!-- Force DataAccessHelper to access various data sources -->\n    <script type=\"module\"\n        src=\"https://unpkg.com/vtk.js/Sources/IO/Core/DataAccessHelper/HtmlDataAccessHelper.js\"></script>\n    <script type=\"module\"\n        src=\"https://unpkg.com/vtk.js/Sources/IO/Core/DataAccessHelper/HttpDataAccessHelper.js\"></script>\n    <script type=\"module\"\n        src=\"https://unpkg.com/vtk.js/Sources/IO/Core/DataAccessHelper/JSZipDataAccessHelper.js\"></script>\n\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkHttpDataSetReader = vtk.IO.Core.vtkHttpDataSetReader;\n        const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n        const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n        const path = 'http://kitware.github.io/vtk-js/data'\n\n        // Reference HTML template\n        const controlPanel = `<table>\n    <tr>\n        <td>Slice I</td>\n        <td>\n            <input class='sliceI' type=\"range\" min=\"0\" max=\"2.0\" step=\"1\" value=\"1\" />\n        </td>\n    </tr>\n    <tr>\n        <td>Slice J</td>\n        <td>\n            <input class='sliceJ' type=\"range\" min=\"0\" max=\"2.0\" step=\"1\" value=\"1\" />\n        </td>\n    </tr>\n    <tr>\n        <td>Slice K</td>\n        <td>\n            <input class='sliceK' type=\"range\" min=\"0\" max=\"100\" step=\"1\" value=\"1\" />\n        </td>\n    </tr>\n    <tr>\n        <td>Color level</td>\n        <td>\n            <input class='colorLevel' type=\"range\" min=\"-3926\" max=\"3926\" step=\"1\" value=\"1\" />\n        </td>\n    </tr>\n    <tr>\n        <td>ColorWindow</td>\n        <td>\n            <input class='colorWindow' type=\"range\" min=\"0\" max=\"3926\" step=\"1\" value=\"1\" />\n        </td>\n    </tr>\n</table>\n`;\n        const fullScreenRenderWindow = vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n        fullScreenRenderWindow.addController(controlPanel);\n\n        const imageActorI = vtkImageSlice.newInstance();\n        const imageActorJ = vtkImageSlice.newInstance();\n        const imageActorK = vtkImageSlice.newInstance();\n\n        renderer.addActor(imageActorK);\n        renderer.addActor(imageActorJ);\n        renderer.addActor(imageActorI);\n\n        function updateColorLevel(e) {\n            const colorLevel = Number(\n                (e ? e.target : document.querySelector('.colorLevel')).value\n            );\n            imageActorI.getProperty().setColorLevel(colorLevel);\n            imageActorJ.getProperty().setColorLevel(colorLevel);\n            imageActorK.getProperty().setColorLevel(colorLevel);\n            renderWindow.render();\n        }\n\n        function updateColorWindow(e) {\n            const colorLevel = Number(\n                (e ? e.target : document.querySelector('.colorWindow')).value\n            );\n            imageActorI.getProperty().setColorWindow(colorLevel);\n            imageActorJ.getProperty().setColorWindow(colorLevel);\n            imageActorK.getProperty().setColorWindow(colorLevel);\n            renderWindow.render();\n        }\n\n        const reader = vtkHttpDataSetReader.newInstance({\n            fetchGzip: true,\n        });\n        reader\n            .setUrl(`${path}/data/volume/headsq.vti`, { loadData: true })\n            .then(() => {\n                const data = reader.getOutputData();\n                const dataRange = data.getPointData().getScalars().getRange();\n                const extent = data.getExtent();\n\n                const imageMapperK = vtkImageMapper.newInstance();\n                imageMapperK.setInputData(data);\n                imageMapperK.setKSlice(30);\n                imageActorK.setMapper(imageMapperK);\n\n                const imageMapperJ = vtkImageMapper.newInstance();\n                imageMapperJ.setInputData(data);\n                imageMapperJ.setJSlice(30);\n                imageActorJ.setMapper(imageMapperJ);\n\n                const imageMapperI = vtkImageMapper.newInstance();\n                imageMapperI.setInputData(data);\n                imageMapperI.setISlice(30);\n                imageActorI.setMapper(imageMapperI);\n\n                renderer.resetCamera();\n                renderer.resetCameraClippingRange();\n                renderWindow.render();\n\n                ['.sliceI', '.sliceJ', '.sliceK'].forEach((selector, idx) => {\n                    const el = document.querySelector(selector);\n                    el.setAttribute('min', extent[idx * 2 + 0]);\n                    el.setAttribute('max', extent[idx * 2 + 1]);\n                    el.setAttribute('value', 30);\n                });\n\n                ['.colorLevel', '.colorWindow'].forEach((selector) => {\n                    document.querySelector(selector).setAttribute('max', dataRange[1]);\n                    document.querySelector(selector).setAttribute('value', dataRange[1]);\n                });\n                document\n                    .querySelector('.colorLevel')\n                    .setAttribute('value', (dataRange[0] + dataRange[1]) / 2);\n                updateColorLevel();\n                updateColorWindow();\n            });\n\n        document.querySelector('.sliceI').addEventListener('input', (e) => {\n            imageActorI.getMapper().setISlice(Number(e.target.value));\n            renderWindow.render();\n        });\n\n        document.querySelector('.sliceJ').addEventListener('input', (e) => {\n            imageActorJ.getMapper().setJSlice(Number(e.target.value));\n            renderWindow.render();\n        });\n\n        document.querySelector('.sliceK').addEventListener('input', (e) => {\n            imageActorK.getMapper().setKSlice(Number(e.target.value));\n            renderWindow.render();\n        });\n\n        document\n            .querySelector('.colorLevel')\n            .addEventListener('input', updateColorLevel);\n        document\n            .querySelector('.colorWindow')\n            .addEventListener('input', updateColorWindow);\n\n        window.fullScreen = fullScreenRenderWindow;\n        window.imageActorI = imageActorI;\n        window.imageActorJ = imageActorJ;\n        window.imageActorK = imageActorK;\n\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 11:\n描述: Loads a 3D volume dataset and renders it using `vtkVolumeActor` and `vtkVolumeMapper` with extensive customization for appearance and quality.\n\nVTK.js 模块: ['vtk.Rendering.Core.vtkVolumeMapper', 'vtk.Common.DataModel.vtkPiecewiseFunction', 'vtk.IO.Core.vtkHttpDataSetReader.newInstance', 'vtk.Rendering.Core.vtkColorTransferFunction', 'vtk.Rendering.Core.vtkVolume', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n</head>\n\n<body>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        //using volume actor and mapper for rendering\n        const vtkVolumeActor = vtk.Rendering.Core.vtkVolume;\n        const vtkVolumeMapper = vtk.Rendering.Core.vtkVolumeMapper;\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n\n        //init the render window\n        const fullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n        //set the data path and the reader\n        const dataPath = 'http://kitware.github.io/vtk-js/data/volume/headsq.vti';\n        const reader = vtk.IO.Core.vtkHttpDataSetReader.newInstance({ fetchGzip: true });\n\n        //load data from dataPath and render the results by actor and mapper\n        reader.setUrl(dataPath, { loadData: true })\n            .then(() => {\n                const data = reader.getOutputData(0);\n                //create the mapper and set its property\n                const mapper = vtkVolumeMapper.newInstance();\n                console.log(data.toJSON())\n                mapper.setInputData(data);\n                mapper.setSampleDistance(0.7);\n                mapper.setVolumetricScatteringBlending(0);\n                mapper.setLocalAmbientOcclusion(0);\n                mapper.setLAOKernelSize(10);\n                mapper.setLAOKernelRadius(5);\n                mapper.setComputeNormalFromOpacity(true);\n\n                //create actor and set its properties, including gradient opacity, scalar opacity, shade, ambient, diffuse, specular etc.\n                const actor = vtkVolumeActor.newInstance();\n                const ofun = vtkPiecewiseFunction.newInstance();\n                ofun.addPoint(0.0, 0.1);\n                ofun.addPoint(255.0, 1.0);\n                actor.getProperty().setScalarOpacity(0, ofun);\n                actor.getProperty().setInterpolationTypeToLinear();\n                actor.getProperty().setUseGradientOpacity(0, true);\n                actor.getProperty().setGradientOpacityMinimumValue(0, 2);\n                actor.getProperty().setGradientOpacityMinimumOpacity(0, 0.0);\n                actor.getProperty().setGradientOpacityMaximumValue(0, 20);\n                actor.getProperty().setGradientOpacityMaximumOpacity(0, 1.0);\n                actor.getProperty().setScalarOpacityUnitDistance(0, 2.955);\n                actor.getProperty().setShade(true);\n                actor.getProperty().setAmbient(0.3);\n                actor.getProperty().setDiffuse(1);\n                actor.getProperty().setSpecular(1);\n\n                //assign mapper to actor and assign mapper to render\n                actor.setMapper(mapper);\n                renderer.addVolume(actor);\n                renderer.resetCamera();\n                renderWindow.render();\n            });\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 12:\n描述: Creates a 3D visualization where a plane is rendered using a `vtkStickMapper`. The plane's geometry is generated with a `vtkPlaneSource`, and `vtkCalculator` processes the data to generate custom point attributes ('orientation', 'temperature', 'pressure') which `vtkStickMapper` uses to control the orientation and scaling of the sticks. The visualization is displayed in a full-screen renderer with a dark background. Additionally, UI controls allow adjusting the X and Y resolution of the plane, which dynamically updates the visualization.\n\nVTK.js 模块: ['vtk.Rendering.Core.vtkStickMapper', 'vtk.Common.DataModel.vtkDataSet.FieldAssociations', 'vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes', 'vtk.Filters.General.vtkCalculator', 'vtk.Filters.Sources.vtkPlaneSource', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js StickMapper</title>\n    <link rel=\"stylesheet\" href=\"https://kit.fontawesome.com/419a5ebb56.css\" crossorigin=\"anonymous\">\n    <style>\n        #renderer {\n            width: 100%;\n            height: 600px;\n            background-color: #333;\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js/Sources/Rendering/Profiles/Geometry\"></script>\n    <script src=\"https://unpkg.com/vtk.js/Sources/Rendering/Profiles/Molecule\"></script>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n\n    <script>\n        // Use vtk namespace to reference classes\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPlaneSource = vtk.Filters.Sources.vtkPlaneSource;\n        const vtkStickMapper = vtk.Rendering.Core.vtkStickMapper;\n\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldAssociations;\n\n        const controlPanel = `<table>\n  <tr>\n    <td>X Resolution</td>\n    <td>\n      <input class='xResolution' type=\"range\" min=\"1\" max=\"25\" step=\"1\" value=\"10\" />\n    </td>\n  </tr>\n  <tr>\n    <td>Y Resolution</td>\n    <td>\n      <input class='yResolution' type=\"range\" min=\"1\" max=\"25\" step=\"1\" value=\"10\" />\n    </td>\n  </tr>\n</table>`;\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // ----------------------------------------------------------------------------\n        // Example code\n        // ----------------------------------------------------------------------------\n\n        const planeSource = vtkPlaneSource.newInstance();\n        const simpleFilter = vtkCalculator.newInstance();\n        const mapper = vtkStickMapper.newInstance();\n        const actor = vtkActor.newInstance();\n\n        simpleFilter.setFormula({\n            getArrays: (inputDataSets) => ({\n                input: [{ location: FieldDataTypes.COORDINATE }], // Require point coordinates as input\n                output: [\n                    // Generate two output arrays:\n                    {\n                        location: FieldDataTypes.POINT, // This array will be point-data ...\n                        name: 'orientation', // ... with the given name ...\n                        dataType: 'Float32Array', // ... of this type ...\n                        numberOfComponents: 3, // ... with this many components ...\n                    },\n                    {\n                        location: FieldDataTypes.POINT, // This array will be field data ...\n                        name: 'temperature', // ... with the given name ...\n                        dataType: 'Float32Array', // ... of this type ...\n                        attribute: AttributeTypes.SCALARS, // ... and will be marked as the default scalars.\n                        numberOfComponents: 1, // ... with this many components ...\n                    },\n                    {\n                        location: FieldDataTypes.POINT, // This array will be field data ...\n                        name: 'pressure', // ... with the given name ...\n                        dataType: 'Float32Array', // ... of this type ...\n                        numberOfComponents: 2, // ... with this many components ...\n                    },\n                ],\n            }),\n            evaluate: (arraysIn, arraysOut) => {\n                // Convert in the input arrays of vtkDataArrays into variables\n                // referencing the underlying JavaScript typed-data arrays:\n                const [coords] = arraysIn.map((d) => d.getData());\n                const [orient, temp, press] = arraysOut.map((d) => d.getData());\n\n                // Since we are passed coords as a 3-component array,\n                // loop over all the points and compute the point-data output:\n                for (let i = 0, sz = coords.length / 3; i < sz; ++i) {\n                    orient[i * 3] =\n                        (coords[3 * i] - 0.5) * (coords[3 * i] - 0.5) +\n                        (coords[3 * i + 1] - 0.5) * (coords[3 * i + 1] - 0.5);\n                    orient[i * 3 + 1] =\n                        (coords[3 * i] - 0.5) * (coords[3 * i] - 0.5) +\n                        (coords[3 * i + 1] - 0.5) * (coords[3 * i + 1] - 0.5);\n                    orient[i * 3 + 2] = 1.0;\n\n                    temp[i] = coords[3 * i + 1];\n\n                    press[i * 2] =\n                        (coords[3 * i] * coords[3 * i] +\n                            coords[3 * i + 1] * coords[3 * i + 1]) *\n                        0.05 +\n                        0.05;\n                    press[i * 2 + 1] =\n                        (coords[3 * i] * coords[3 * i] +\n                            coords[3 * i + 1] * coords[3 * i + 1]) *\n                        0.01 +\n                        0.01;\n                }\n                // Mark the output vtkDataArray as modified\n                arraysOut.forEach((x) => x.modified());\n            },\n        });\n\n        // The generated 'temperature' array will become the default scalars, so the plane mapper will color by 'temperature':\n        simpleFilter.setInputConnection(planeSource.getOutputPort());\n\n        mapper.setInputConnection(simpleFilter.getOutputPort());\n\n        mapper.setOrientationArray('orientation');\n        mapper.setScaleArray('pressure');\n\n        actor.setMapper(mapper);\n\n        renderer.addActor(actor);\n        renderer.resetCamera();\n        renderWindow.render();\n\n        // -----------------------------------------------------------\n        // UI control handling\n        // -----------------------------------------------------------\n\n        fullScreenRenderer.addController(controlPanel);\n        ['xResolution', 'yResolution'].forEach((propertyName) => {\n            document.querySelector(`.${propertyName}`).addEventListener('input', (e) => {\n                const value = Number(e.target.value);\n                planeSource.set({ [propertyName]: value });\n                renderWindow.render();\n            });\n        });\n\n        // -----------------------------------------------------------\n        // Make some variables global so that you can inspect and\n        // modify objects in your browser's developer console:\n        // -----------------------------------------------------------\n\n        window.planeSource = planeSource;\n        window.mapper = mapper;\n        window.actor = actor;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 13:\n描述: Loads and visualizes 3D elevation data from a CSV, applying a texture image, using `vtkElevationReader` and `vtkMapper`.\n\nVTK.js 模块: ['vtk.IO.Misc.vtkElevationReader.newInstance', 'vtk.Rendering.Core.vtkActor.newInstance', 'vtk.Rendering.Core.vtkMapper.newInstance', 'vtk.Rendering.Core.vtkTexture.newInstance', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js ElevationReader</title>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n\n    <script type=\"text/javascript\" src=\"https://unpkg.com/@babel/polyfill@7.0.0/dist/polyfill.js\"></script>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n\n\n        const imagePath = 'http://kitware.github.io/vtk-js/data/elevation/dem.jpg';\n        // const imagePath = './dem.jpg'\n        const dataPath = 'http://kitware.github.io/vtk-js/data/elevation/dem.csv';\n        const fullScreenRenderer = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n        const reader = vtk.IO.Misc.vtkElevationReader.newInstance({\n            xSpacing: 0.01568,\n            ySpacing: 0.01568,\n            zScaling: 0.06666,\n        });\n        const mapper = vtk.Rendering.Core.vtkMapper.newInstance();\n        const actor = vtk.Rendering.Core.vtkActor.newInstance();\n\n        mapper.setInputConnection(reader.getOutputPort());\n        actor.setMapper(mapper);\n\n        renderer.addActor(actor);\n        renderer.resetCamera();\n        renderWindow.render();\n\n        // Download and apply Texture\n        const img = new Image();\n        img.src = imagePath;\n        //Add crossorigin=\"anonymous\" to avoid CORS errors\n        img.crossOrigin = \"anonymous\"\n        img.onload = function textureLoaded() {\n            const texture = vtk.Rendering.Core.vtkTexture.newInstance();\n            texture.setInterpolate(true);\n            texture.setImage(img);\n            actor.addTexture(texture);\n            renderWindow.render();\n        };\n\n        // Download elevation and render when ready\n        reader.setUrl(dataPath).then(() => {\n            renderer.resetCamera();\n            renderWindow.render();\n        });\n\n        window.reader = reader;\n        window.mapper = mapper;\n        window.actor = actor;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n\n    </script>\n\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 14:\n描述: Loads 3D polydata, writes it to a string using `vtkXMLPolyDataWriter`, reads it back with `vtkXMLPolyDataReader`, and renders it, allowing download of the generated VTP file.\nVTK.js 模块: ['vtk.IO.Core.vtkHttpDataSetReader', 'vtk.IO.XML.vtkXMLPolyDataReader', 'vtk.IO.XML.vtkXMLPolyDataWriter', 'vtk.IO.XML.vtkXMLWriter', 'vtk.Rendering.Core.vtkActor.newInstance', 'vtk.Rendering.Core.vtkMapper.newInstance', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js XMLImagePolyDataWriter</title>\n    <!-- <link rel=\"stylesheet\" href=\"https://kit.fontawesome.com/419a5ebb56.css\" crossorigin=\"anonymous\"> -->\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n\n    <script type=\"text/javascript\" src=\"https://unpkg.com/@babel/polyfill@7.0.0/dist/polyfill.js\"></script>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const mapper = vtk.Rendering.Core.vtkMapper.newInstance();\n        const actor = vtk.Rendering.Core.vtkActor.newInstance();\n        const fullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const httpDataSetReader = vtk.IO.Core.vtkHttpDataSetReader;\n        const xmlPolyDataWriter = vtk.IO.XML.vtkXMLPolyDataWriter;\n        const xmlPolyDataReader = vtk.IO.XML.vtkXMLPolyDataReader;\n        const xmlWriter = vtk.IO.XML.vtkXMLWriter;\n        // Create instances using namespace paths\n        const fullScreenRenderer = fullScreenRenderWindow.newInstance();\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n        const reader = httpDataSetReader.newInstance({ fetchGzip: true });\n\n        const writer = xmlPolyDataWriter.newInstance();\n        writer.setFormat(xmlWriter.FormatTypes.BINARY);\n        writer.setInputConnection(reader.getOutputPort());\n\n        const writerReader = xmlPolyDataReader.newInstance();\n\n        reader.setUrl(`http://kitware.github.io/vtk-js/data/cow.vtp`, { loadData: true }).then(() => {\n            const fileContents = writer.write(reader.getOutputData());\n\n            // Try to read it back.\n            const textEncoder = new TextEncoder();\n            writerReader.parseAsArrayBuffer(textEncoder.encode(fileContents));\n            renderer.resetCamera();\n            renderWindow.render();\n\n            const blob = new Blob([fileContents], { type: 'text/plain' });\n            const a = window.document.createElement('a');\n            a.href = window.URL.createObjectURL(blob, { type: 'text/plain' });\n            a.download = 'cow.vtp';\n            a.text = 'Download';\n            a.style.position = 'absolute';\n            a.style.left = '50%';\n            a.style.bottom = '10px';\n            document.body.appendChild(a);\n            a.style.background = 'white';\n            a.style.padding = '5px';\n        });\n\n        actor.setMapper(mapper);\n\n        mapper.setInputConnection(writerReader.getOutputPort());\n\n        renderer.addActor(actor);\n\n        window.writer = writer;\n        window.writerReader = writerReader;\n        window.mapper = mapper;\n        window.actor = actor;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n\n\n    </script>\n\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 15:\n描述: Creates a 3D visualization by sampling an implicit boolean function and extracting contour lines with `vtkImageMarchingSquares`.\n\nVTK.js 模块: ['vtk.Common.DataModel.vtkImplicitBoolean', 'vtk.Common.DataModel.vtkPlane', 'vtk.Filters.General.vtkImageMarchingSquares', 'vtk.Filters.Sources.vtkSphereSource', 'vtk.Imaging.Hybrid.vtkSampleFunction', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"UTF-8\">\n</head>\n\n<body>\n  <div id=\"renderer\"></div>\n  <script src=\"https://unpkg.com/vtk.js\"></script>\n  <script>\n    const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n    const vtkActor = vtk.Rendering.Core.vtkActor;\n    const vtkSphereSource = vtk.Filters.Sources.vtkSphereSource;\n    const vtkMapper = vtk.Rendering.Core.vtkMapper;\n    const vtkImageMarchingSquares = vtk.Filters.General.vtkImageMarchingSquares;\n\n    const vtkPlane = vtk.Common.DataModel.vtkPlane;\n    const vtkImplicitBoolean = vtk.Common.DataModel.vtkImplicitBoolean;\n    const vtkSampleFunction = vtk.Imaging.Hybrid.vtkSampleFunction;\n\n    //const sphere = vtkSphereSource.newInstance({ center: [-2.5, 0.0, 0.0], radius: 0.5 });\n\n    const plane = vtkPlane.newInstance({ origin: [0, 0, 0], normal: [0, 1, 0] });\n\n    const { Operation } = vtkImplicitBoolean;\n\n    const impBool = vtkImplicitBoolean.newInstance({\n      operation: Operation.UNION,\n      functions: [plane],\n    });\n\n    const sample = vtkSampleFunction.newInstance({\n      implicitFunction: impBool,\n      sampleDimensions: [5, 3, 3],\n      modelBounds: [-5.0, 5.0, -1.0, 1.0, -1.0, 1.0],\n    });\n\n    ms = vtkImageMarchingSquares.newInstance();\n    //connect the sphere filter with the marchingsqures\n    ms.setInputConnection(sample.getOutputPort())\n\n    const mapper = vtkMapper.newInstance();\n    mapper.setInputConnection(ms.getOutputPort());\n\n    const actor = vtkActor.newInstance();\n    actor.setMapper(mapper);\n\n\n    // adding actor into the scene\n    const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n    const renderer = fullScreenRenderer.getRenderer();\n    const renderWindow = fullScreenRenderer.getRenderWindow();\n\n    // Add actor to renderer\n    renderer.addActor(actor);\n\n    // Reset camera and start rendering\n    renderer.resetCamera();\n    renderWindow.render();\n\n  </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 16:\n描述: Loads and visualizes a 3D model (VTP format) from a remote URL using `vtkHttpDataSetReader` with gzip support.\n\nVTK.js 模块: ['vtk.IO.Core.DataAccessHelper.HttpDataAccessHelper', 'vtk.IO.Core.vtkHttpDataSetReader', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow', 'vtk.Rendering.OpenGL.Profiles.Geometry']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js IO-HttpDataSetReader</title>\n</head>\n\n<body>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const data_path = 'http://kitware.github.io/vtk-js/data/cow.vtp'\n        const vtkHttpDataSetReader = vtk.IO.Core.vtkHttpDataSetReader;\n        // const vtkGeometry = vtk.Rendering.OpenGL.Profiles.Geometry\n\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkActor = vtk.Rendering.Core.vtkActor\n        const vtkMapper = vtk.Rendering.Core.vtkMapper\n\n        // Force the loading of HttpDataAccessHelper to support gzip decompression\n        const vtkHttpDataAccessHelper = vtk.IO.Core.DataAccessHelper.HttpDataAccessHelper\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance();\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // ----------------------------------------------------------------------------\n        // Example code\n        // ----------------------------------------------------------------------------\n        // Server is not sending the .gz and with the compress header\n        // Need to fetch the true file name and uncompress it locally\n        // ----------------------------------------------------------------------------\n\n        const reader = vtkHttpDataSetReader.newInstance({ fetchGzip: true });\n        reader.setUrl(data_path).then(() => {\n            reader.loadData().then(() => {\n                renderer.resetCamera();\n                renderWindow.render();\n            });\n        });\n\n        const mapper = vtkMapper.newInstance();\n        mapper.setInputConnection(reader.getOutputPort());\n\n        const actor = vtkActor.newInstance();\n        actor.setMapper(mapper);\n\n        renderer.addActor(actor);\n\n        // -----------------------------------------------------------\n        // Make some variables global so that you can inspect and\n        // modify objects in your browser's developer console:\n        // -----------------------------------------------------------\n\n        // global.source = reader;\n        // global.mapper = mapper;\n        // global.actor = actor;\n        // global.renderer = renderer;\n        // global.renderWindow = renderWindow;\n\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 17:\n描述: Loads a 3D volume and displays three orthogonal image slices (I, J, K planes) at the 30th layer using `vtkHttpDataSetReader` and `vtkImageSlice`.\n\nVTK.js 模块: ['vtk.IO.Core.vtkHttpDataSetReader', 'vtk.Rendering.Core.vtkImageMapper', 'vtk.Rendering.Core.vtkImageSlice', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkHttpDataSetReader = vtk.IO.Core.vtkHttpDataSetReader;\n        const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n        const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n        const dataPath = 'http://kitware.github.io/vtk-js/data/volume/headsq.vti';\n\n        const fullScreenRenderWindow = vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n        const imageActorI = vtkImageSlice.newInstance();\n        const imageActorJ = vtkImageSlice.newInstance();\n        const imageActorK = vtkImageSlice.newInstance();\n\n        renderer.addActor(imageActorK);\n        renderer.addActor(imageActorJ);\n        renderer.addActor(imageActorI);\n\n        const reader = vtkHttpDataSetReader.newInstance({\n            fetchGzip: true,\n        });\n        reader\n            .setUrl(dataPath, { loadData: true })\n            .then(() => {\n                const data = reader.getOutputData();\n                const dataRange = data.getPointData().getScalars().getRange();\n                const extent = data.getExtent();\n\n                const imageMapperK = vtkImageMapper.newInstance();\n                imageMapperK.setInputData(data);\n                imageMapperK.setKSlice(30);\n                imageActorK.setMapper(imageMapperK);\n\n                const imageMapperJ = vtkImageMapper.newInstance();\n                imageMapperJ.setInputData(data);\n                imageMapperJ.setJSlice(30);\n                imageActorJ.setMapper(imageMapperJ);\n\n                const imageMapperI = vtkImageMapper.newInstance();\n                imageMapperI.setInputData(data);\n                imageMapperI.setISlice(30);\n                imageActorI.setMapper(imageMapperI);\n\n                renderer.resetCamera();\n                renderWindow.render();\n            });\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 18:\n描述: Loads a 3D volumetric dataset (`headsq.vti`) and extracts an isosurface using `vtkImageMarchingCubes`, with a real-time adjustable iso-value.\n\nVTK.js 模块: ['vtk.Filters.General.vtkImageMarchingCubes.newInstance', 'vtk.IO.Core.vtkHttpDataSetReader.newInstance', 'vtk.Rendering.Core.vtkActor.newInstance', 'vtk.Rendering.Core.vtkMapper.newInstance', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js GCodeReader</title>\n</head>\n\n<body>\n\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const dataPath = 'http://kitware.github.io/vtk-js/data/volume/headsq.vti';\n\n        const fullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n        \n        const controlPanel = `<table>\n        <tr>\n            <td>Iso value</td>\n            <td>\n            <input class='isoValue' type=\"range\" min=\"0.0\" max=\"1.0\" step=\"0.05\" value=\"0.0\" />\n            </td>\n        </tr>\n        </table>`;\n\n        fullScreenRenderWindow.addController(controlPanel);\n\n        const actor = vtk.Rendering.Core.vtkActor.newInstance();\n        const mapper = vtk.Rendering.Core.vtkMapper.newInstance();\n        const marchingCube = vtk.Filters.General.vtkImageMarchingCubes.newInstance({\n            contourValue: 0.0,\n            computeNormals: true,\n            mergePoints: true,\n        });\n\n        actor.setMapper(mapper);\n        mapper.setInputConnection(marchingCube.getOutputPort());\n\n        function updateIsoValue(e) {\n            const isoValue = Number(e.target.value);\n            marchingCube.setContourValue(isoValue);\n            renderWindow.render();\n        }\n\n        const reader = vtk.IO.Core.vtkHttpDataSetReader.newInstance({ fetchGzip: true });\n        marchingCube.setInputConnection(reader.getOutputPort());\n\n        reader\n        .setUrl(dataPath, { loadData: true })\n        .then(() => {\n            const data = reader.getOutputData();\n            const dataRange = data.getPointData().getScalars().getRange();\n            const firstIsoValue = (dataRange[0] + dataRange[1]) / 3;\n\n            const el = document.querySelector('.isoValue');\n            el.setAttribute('min', dataRange[0]);\n            el.setAttribute('max', dataRange[1]);\n            el.setAttribute('value', firstIsoValue);\n            el.addEventListener('input', updateIsoValue);\n\n            marchingCube.setContourValue(firstIsoValue);\n            renderer.addActor(actor);\n            renderer.getActiveCamera().set({ position: [1, 1, 0], viewUp: [0, 0, -1] });\n            renderer.resetCamera();\n            renderWindow.render();\n        });\n\n        window.fullScreen = fullScreenRenderWindow;\n        window.actor = actor;\n        window.mapper = mapper;\n        window.marchingCube = marchingCube;\n\n    </script>\n\n\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 19:\n描述: Displays multiple interactive 3D objects (cone, sphere, cube, cylinder) in separate, independently styled renderers with animation and layout adjustments.\n\nVTK.js 模块: ['vtk.Filters.Sources.vtkConeSource', 'vtk.Filters.Sources.vtkCubeSource', 'vtk.Filters.Sources.vtkCylinderSource', 'vtk.Filters.Sources.vtkSphereSource', 'vtk.Interaction.Style.vtkInteractorStyleTrackballCamera', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkMapper', 'vtk.Rendering.Core.vtkRenderWindow', 'vtk.Rendering.Core.vtkRenderWindowInteractor', 'vtk.Rendering.Core.vtkRenderer', 'vtk.js', 'vtk.js已经通过某种方式被加载到全局变量vtk中']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js Many Renderers</title>\n    <!-- <link rel=\"stylesheet\" href=\"https://kit.fontawesome.com/419a5ebb56.css\" crossorigin=\"anonymous\"> -->\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n\n    <script type=\"text/javascript\" src=\"https://unpkg.com/@babel/polyfill@7.0.0/dist/polyfill.js\"></script>\n\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n\n    <script>\n        // Assuming vtk.js has been loaded into global variable vtk by some means\n        // For example, by including vtk.js in HTML via <script> tag, or through module loader\n\n        // Use vtk namespace to reference classes\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkConeSource = vtk.Filters.Sources.vtkConeSource;\n        const vtkSphereSource = vtk.Filters.Sources.vtkSphereSource;\n        const vtkCubeSource = vtk.Filters.Sources.vtkCubeSource;\n        const vtkCylinderSource = vtk.Filters.Sources.vtkCylinderSource;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkRenderWindow = vtk.Rendering.Core.vtkRenderWindow;\n        const vtkRenderWindowInteractor = vtk.Rendering.Core.vtkRenderWindowInteractor;\n        const vtkRenderer = vtk.Rendering.Core.vtkRenderer;\n        const vtkInteractorStyleTrackballCamera = vtk.Interaction.Style.vtkInteractorStyleTrackballCamera;\n\n        // ----------------------------------------------------------------------------\n        // Meshes\n\n        //  ------------------------------------------------------------\n        // Meshes\n        // ----------------------------------------------------------------------------\n\n        const meshes = [];\n\n        function addMesh(name, source) {\n            const mapper = vtkMapper.newInstance();\n            mapper.setInputData(source.getOutputData());\n            meshes.push({ name, mapper });\n        }\n\n        addMesh('Cone', vtkConeSource.newInstance());\n        addMesh('Sphere', vtkSphereSource.newInstance());\n        addMesh('Cube', vtkCubeSource.newInstance());\n        addMesh('Cylinder', vtkCylinderSource.newInstance());\n\n        // ----------------------------------------------------------------------------\n        // Properties\n        // ----------------------------------------------------------------------------\n\n        const properties = [\n            {\n                name: '- Red',\n                properties: { color: [1, 0.6, 0.6] },\n            },\n            {\n                name: 'Edge - Red',\n                properties: { edgeVisibility: true, color: [1, 0.6, 0.6] },\n            },\n            {\n                name: '- Blue',\n                properties: { color: [0.6, 0.6, 1] },\n            },\n            {\n                name: 'Edge - Green',\n                properties: { edgeVisibility: true, color: [0.6, 1, 0.6] },\n            },\n            {\n                name: '- Green',\n                properties: { color: [0.6, 1, 0.6] },\n            },\n            {\n                name: 'Edge - Blue',\n                properties: { edgeVisibility: true, color: [0.6, 0.6, 1] },\n            },\n        ];\n\n        // ----------------------------------------------------------------------------\n        // Background colors\n        // ----------------------------------------------------------------------------\n\n        const colors = [\n            [0.2, 0.2, 0.2],\n            [0.4, 0.2, 0.3],\n            [0.2, 0.4, 0.3],\n            [0.6, 0.6, 0.6],\n            [0.2, 0.4, 0.4],\n            [0.3, 0.4, 0.2],\n            [0.3, 0.2, 0.4],\n        ];\n\n        // ----------------------------------------------------------------------------\n        // Single RenderWindow in fullscreen\n        // ----------------------------------------------------------------------------\n\n        const RENDERERS = {};\n\n        const renderWindow = vtkRenderWindow.newInstance();\n        const renderWindowView = renderWindow.newAPISpecificView();\n        renderWindow.addView(renderWindowView);\n\n        const rootContainer = document.createElement('div');\n        rootContainer.style.position = 'fixed';\n        rootContainer.style.zIndex = -1;\n        rootContainer.style.left = 0;\n        rootContainer.style.top = 0;\n        rootContainer.style.pointerEvents = 'none';\n        document.body.appendChild(rootContainer);\n\n        renderWindowView.setContainer(rootContainer);\n\n        const interactor = vtkRenderWindowInteractor.newInstance();\n        interactor.setView(renderWindowView);\n        interactor.initialize();\n        interactor.setInteractorStyle(vtkInteractorStyleTrackballCamera.newInstance());\n\n        function updateViewPort(element, renderer) {\n            const { innerHeight, innerWidth } = window;\n            const { x, y, width, height } = element.getBoundingClientRect();\n            const viewport = [\n                x / innerWidth,\n                1 - (y + height) / innerHeight,\n                (x + width) / innerWidth,\n                1 - y / innerHeight,\n            ];\n            renderer.setViewport(...viewport);\n        }\n\n        function recomputeViewports() {\n            const rendererElems = document.querySelectorAll('.renderer');\n            for (let i = 0; i < rendererElems.length; i++) {\n                const elem = rendererElems[i];\n                const { id } = elem;\n                const renderer = RENDERERS[id];\n                updateViewPort(elem, renderer);\n            }\n            renderWindow.render();\n        }\n\n        function resize() {\n            rootContainer.style.width = `${window.innerWidth}px`;\n            renderWindowView.setSize(window.innerWidth, window.innerHeight);\n            recomputeViewports();\n        }\n\n        new ResizeObserver(resize).observe(document.body);\n        document.addEventListener('scroll', recomputeViewports);\n\n        // ----------------------------------------------------------------------------\n        // Renderers\n        // ----------------------------------------------------------------------------\n\n        let meshIndex = 0;\n        let propertyIndex = 0;\n        let bgIndex = 0;\n        let rendererId = 1;\n\n        function applyStyle(element) {\n            element.classList.add('renderer');\n            element.style.width = '200px';\n            element.style.height = '200px';\n            element.style.margin = '20px';\n            element.style.border = 'solid 1px #333';\n            element.style.display = 'inline-block';\n            element.style.boxSizing = 'border';\n            element.style.textAlign = 'center';\n            element.style.color = 'white';\n            return element;\n        }\n\n        let captureCurrentRenderer = false;\n\n        function setCaptureCurrentRenderer(yn) {\n            captureCurrentRenderer = yn;\n            if (yn && interactor.getCurrentRenderer()) {\n                // fix the current renderer to, well, the current renderer\n                interactor.setCurrentRenderer(interactor.getCurrentRenderer());\n            } else {\n                // remove the fixed current renderer\n                interactor.setCurrentRenderer(null);\n            }\n        }\n\n        function bindInteractor(renderer, el) {\n            // only change the interactor's container if needed\n            if (interactor.getContainer() !== el) {\n                if (interactor.getContainer()) {\n                    interactor.unbindEvents();\n                }\n                if (captureCurrentRenderer) {\n                    interactor.setCurrentRenderer(renderer);\n                }\n                if (el) {\n                    interactor.bindEvents(el);\n                }\n            }\n        }\n\n        function addRenderer() {\n            const mesh = meshes[meshIndex];\n            const prop = properties[propertyIndex];\n            const background = colors[bgIndex];\n            meshIndex = (meshIndex + 1) % meshes.length;\n            propertyIndex = (propertyIndex + 1) % properties.length;\n            bgIndex = (bgIndex + 1) % colors.length;\n\n            const container = applyStyle(document.createElement('div'));\n            container.id = rendererId++;\n            document.body.appendChild(container);\n\n            const actor = vtkActor.newInstance();\n            actor.setMapper(mesh.mapper);\n            actor.getProperty().set(prop.properties);\n            actor.getProperty().setDiffuse(0.9);\n            actor.getProperty().setSpecular(0.2);\n            actor.getProperty().setSpecularPower(30);\n            actor.getProperty().setSpecularColor(1.0, 1.0, 1.0);\n            const renderer = vtkRenderer.newInstance({ background });\n            container.innerHTML = `${mesh.name} ${prop.name}`;\n\n            container.addEventListener('pointerenter', () =>\n                bindInteractor(renderer, container)\n            );\n            container.addEventListener('pointerleave', () => bindInteractor(null, null));\n\n            renderer.addActor(actor);\n            renderWindow.addRenderer(renderer);\n            updateViewPort(container, renderer);\n            renderer.resetCamera();\n\n            // Keep track of renderer\n            RENDERERS[container.id] = renderer;\n        }\n\n        // ----------------------------------------------------------------------------\n        // Fill up page\n        // ----------------------------------------------------------------------------\n\n        const checkbox = document.createElement('input');\n        checkbox.type = 'checkbox';\n        checkbox.name = 'singleRendererCapture';\n        const label = document.createElement('label');\n        label.for = checkbox.name;\n        label.innerText = 'Enable single renderer capture';\n\n        checkbox.addEventListener('input', (ev) => {\n            setCaptureCurrentRenderer(ev.target.checked);\n        });\n\n        document.body.appendChild(checkbox);\n        document.body.appendChild(label);\n        document.body.appendChild(document.createElement('br'));\n\n        for (let i = 0; i < 64; i++) {\n            addRenderer();\n        }\n        resize();\n\n        function updateCamera(renderer) {\n            const camera = renderer.getActiveCamera();\n            camera.azimuth(0.5);\n            renderer.resetCameraClippingRange();\n        }\n\n        function animate() {\n            Object.values(RENDERERS).forEach(updateCamera);\n            renderWindow.render();\n            window.requestAnimationFrame(animate);\n        }\n\n        window.requestAnimationFrame(animate);\n\n        // ----------------------------------------------------------------------------\n        // Globals\n        // ----------------------------------------------------------------------------\n\n        window.rw = renderWindow;\n        window.glrw = renderWindowView;\n        window.renderers = RENDERERS;\n\n\n\n    </script>\n\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 20:\n描述: Generates and displays a 2D random image (100x100) using `vtkImageSlice` and `vtkImageMapper`.\n\nVTK.js 模块: ['vtk.Common.Core.vtkDataArray.newInstance', 'vtk.Common.DataModel.vtkImageData', 'vtk.Rendering.Core.vtkImageMapper', 'vtk.Rendering.Core.vtkImageSlice', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;// Actor for rendering 2D image slices\n        const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n        const vtkImageData = vtk.Common.DataModel.vtkImageData;\n\n        // Create render window\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // Create image data\n        const imageData = vtkImageData.newInstance();\n        imageData.setDimensions(100, 100, 1);\n        imageData.setSpacing(1.0, 1.0, 1.0);\n        imageData.setOrigin(0.0, 0.0, 0.0);\n\n        // Set pixel values for image data\n        const scalars = new Uint8Array(100 * 100);\n        for (let i = 0; i < 100 * 100; i++) {\n            scalars[i] = Math.random() * 255;\n        }\n        imageData.getPointData().setScalars(vtk.Common.Core.vtkDataArray.newInstance({ values: scalars, numberOfComponents: 1 }));\n\n        // Create mapper and actor\n        const mapper = vtkImageMapper.newInstance();\n        mapper.setInputData(imageData);\n\n        const actor = vtkImageSlice.newInstance();\n        actor.setMapper(mapper);\n\n        // Add actor to renderer\n        renderer.addActor(actor);\n        renderer.resetCamera();\n        renderWindow.render();\n    </script>\n</body>\n\n</html>\n\n\n--------------------------------------------------------------------------------------------------------------\n示例 21:\n描述: Visualizes a 3D sphere by generating a scalar field with `vtkSampleFunction` and extracting an isosurface using `vtkImageMarchingCubes`.\nVTK.js 模块: ['vtk.Common.DataModel.vtkSphere', 'vtk.Filters.General.vtkImageMarchingCubes', 'vtk.Imaging.Hybrid.vtkSampleFunction', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n</head>\n\n<body>\n    <script src=\"https://unpkg.com/vtk.js@32.6.0/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkImageMarchingCubes = vtk.Filters.General.vtkImageMarchingCubes;\n\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        const mCubes = vtkImageMarchingCubes.newInstance({ contourValue: 0.1 });\n        \n        //using the sphere function and sample function to create the source code\n        const vtkSphere = vtk.Common.DataModel.vtkSphere;\n        const vtkSampleFunction = vtk.Imaging.Hybrid.vtkSampleFunction;\n        const sphere = vtkSphere.newInstance({ center: [0.0, 0.0, 0.0], radius: 0.5 });\n        const sample = vtkSampleFunction.newInstance({\n            implicitFunction: sphere,\n            sampleDimensions: [50, 50, 50],\n            modelBounds: [-0.5, 0.5, -0.5, 0.5, -0.5, 0.5],\n        });\n\n        //connecting actor with render\n        const actor = vtkActor.newInstance();\n        renderer.addActor(actor);\n        \n        //connecting mapper with actor\n        const mapper = vtkMapper.newInstance();\n        actor.setMapper(mapper);\n\n        // Connect the pipeline proper\n        mCubes.setInputConnection(sample.getOutputPort());\n        mapper.setInputConnection(mCubes.getOutputPort());\n\n        renderer.resetCamera();\n        renderWindow.render();\n\n    </script>\n</body>\n\n</html>\n\n            ",
    "status": "success"
  },
  {
    "index": 4,
    "original_query": "Generate an HTML page using vtk.js to visualize the Redsea dataset with volume rendering.\n\nLoad the dataset from: http://127.0.0.1:5000/dataset/redsea.vti\n\nCompute velocity magnitude from the \"velocity\" array and set it as the active scalar\n\nApply volume rendering using a blue → white → red color map spanning the scalar range (min to max)\n\nApply a piecewise opacity function to control transparency across scalar values\n\nSet shading, ambient, diffuse, and specular properties for realistic volume appearance\n\nAdjust the camera to look along +Z and center on the dataset",
    "splited_queries": [
      {
        "description": "Data Loading — Load the dataset from 'http://127.0.0.1:5000/dataset/redsea.vti' using vtkXMLImageDataReader."
      },
      {
        "description": "Data Processing — Compute the velocity magnitude from the 'velocity' array using vtkCalculator and set it as the active scalar."
      },
      {
        "description": "Volume Rendering Setup — Configure a volume mapper using vtkVolumeMapper to render the dataset with the computed velocity magnitude scalar."
      },
      {
        "description": "Color Mapping — Apply a blue → white → red color transfer function to the volume mapper, spanning the full scalar range from minimum to maximum velocity magnitude."
      },
      {
        "description": "Opacity Function — Define a piecewise opacity function to control transparency across the velocity magnitude scalar range."
      },
      {
        "description": "Volume Properties — Set shading, ambient, diffuse, and specular properties for realistic volume appearance using vtkVolumeProperty."
      },
      {
        "description": "Camera Configuration — Adjust the camera to look along the +Z axis and center on the dataset bounds."
      },
      {
        "description": "Rendering — Initialize the render window, renderer, and interactor to display the volume-rendered dataset."
      }
    ],
    "final_prompt": "\n    Generate only the HTML code without any additional text or markdown formatting.\n    User Requirements:\n    Generate an HTML page using vtk.js to visualize the Redsea dataset with volume rendering.\n\nLoad the dataset from: http://127.0.0.1:5000/dataset/redsea.vti\n\nCompute velocity magnitude from the \"velocity\" array and set it as the active scalar\n\nApply volume rendering using a blue → white → red color map spanning the scalar range (min to max)\n\nApply a piecewise opacity function to control transparency across scalar values\n\nSet shading, ambient, diffuse, and specular properties for realistic volume appearance\n\nAdjust the camera to look along +Z and center on the dataset\n\n    Relevant VTK.js Examples:\n    示例 1:\n描述: Loads a 3D volume dataset and renders it using `vtkVolumeActor` and `vtkVolumeMapper` with extensive customization for appearance and quality.\n\nVTK.js 模块: ['vtk.Rendering.Core.vtkVolumeMapper', 'vtk.Common.DataModel.vtkPiecewiseFunction', 'vtk.IO.Core.vtkHttpDataSetReader.newInstance', 'vtk.Rendering.Core.vtkColorTransferFunction', 'vtk.Rendering.Core.vtkVolume', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n</head>\n\n<body>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        //using volume actor and mapper for rendering\n        const vtkVolumeActor = vtk.Rendering.Core.vtkVolume;\n        const vtkVolumeMapper = vtk.Rendering.Core.vtkVolumeMapper;\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n\n        //init the render window\n        const fullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n        //set the data path and the reader\n        const dataPath = 'http://kitware.github.io/vtk-js/data/volume/headsq.vti';\n        const reader = vtk.IO.Core.vtkHttpDataSetReader.newInstance({ fetchGzip: true });\n\n        //load data from dataPath and render the results by actor and mapper\n        reader.setUrl(dataPath, { loadData: true })\n            .then(() => {\n                const data = reader.getOutputData(0);\n                //create the mapper and set its property\n                const mapper = vtkVolumeMapper.newInstance();\n                console.log(data.toJSON())\n                mapper.setInputData(data);\n                mapper.setSampleDistance(0.7);\n                mapper.setVolumetricScatteringBlending(0);\n                mapper.setLocalAmbientOcclusion(0);\n                mapper.setLAOKernelSize(10);\n                mapper.setLAOKernelRadius(5);\n                mapper.setComputeNormalFromOpacity(true);\n\n                //create actor and set its properties, including gradient opacity, scalar opacity, shade, ambient, diffuse, specular etc.\n                const actor = vtkVolumeActor.newInstance();\n                const ofun = vtkPiecewiseFunction.newInstance();\n                ofun.addPoint(0.0, 0.1);\n                ofun.addPoint(255.0, 1.0);\n                actor.getProperty().setScalarOpacity(0, ofun);\n                actor.getProperty().setInterpolationTypeToLinear();\n                actor.getProperty().setUseGradientOpacity(0, true);\n                actor.getProperty().setGradientOpacityMinimumValue(0, 2);\n                actor.getProperty().setGradientOpacityMinimumOpacity(0, 0.0);\n                actor.getProperty().setGradientOpacityMaximumValue(0, 20);\n                actor.getProperty().setGradientOpacityMaximumOpacity(0, 1.0);\n                actor.getProperty().setScalarOpacityUnitDistance(0, 2.955);\n                actor.getProperty().setShade(true);\n                actor.getProperty().setAmbient(0.3);\n                actor.getProperty().setDiffuse(1);\n                actor.getProperty().setSpecular(1);\n\n                //assign mapper to actor and assign mapper to render\n                actor.setMapper(mapper);\n                renderer.addVolume(actor);\n                renderer.resetCamera();\n                renderWindow.render();\n            });\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 2:\n描述: Loads a medical image dataset (MHA) and renders it as a 3D volume using `vtkVolumeMapper` with custom color and opacity transfer functions.\n\nVTK.js 模块: ['vtk.Rendering.Core.vtkVolumeMapper', 'vtk.Common.DataModel.vtkITKHelper', 'vtk.Common.DataModel.vtkPiecewiseFunction', 'vtk.IO.Core.DataAccessHelper.vtkLiteHttpDataAccessHelper', 'vtk.Rendering.Core.vtkColorTransferFunction', 'vtk.Rendering.Core.vtkVolume', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js Isosurface Visualization</title>\n    <link rel=\"stylesheet\" href=\"https://kit.fontawesome.com/419a5ebb56.css\" crossorigin=\"anonymous\">\n    <style>\n        #renderer {\n            width: 100%;\n            height: 600px;\n            background-color: #333;\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script src=\"https://unpkg.com/vtk.js/Sources/IO/Core/DataAccessHelper/LiteHttpDataAccessHelper.js\"></script>\n    <script>\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n        const vtkVolume = vtk.Rendering.Core.vtkVolume;\n        const vtkVolumeMapper = vtk.Rendering.Core.vtkVolumeMapper;\n        const vtkITKHelper = vtk.Common.DataModel.vtkITKHelper;\n        // const vtkLiteHttpDataAccessHelper = vtk.IO.Core.DataAccessHelper.vtkLiteHttpDataAccessHelper;\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        const actor = vtkVolume.newInstance();\n        const mapper = vtkVolumeMapper.newInstance();\n        mapper.setSampleDistance(0.7);\n        actor.setMapper(mapper);\n\n        const ctfun = vtkColorTransferFunction.newInstance();\n        ctfun.addRGBPoint(200.0, 0.4, 0.5, 0.0);\n        ctfun.addRGBPoint(2000.0, 1.0, 1.0, 1.0);\n        const ofun = vtkPiecewiseFunction.newInstance();\n        ofun.addPoint(200.0, 0.0);\n        ofun.addPoint(120.0, 0.3);\n        ofun.addPoint(300.0, 0.6);\n        actor.getProperty().setRGBTransferFunction(0, ctfun);\n        actor.getProperty().setScalarOpacity(0, ofun);\n        actor.getProperty().setScalarOpacityUnitDistance(0, 4.5);\n        actor.getProperty().setInterpolationTypeToLinear();\n        actor.getProperty().setUseGradientOpacity(0, true);\n        actor.getProperty().setGradientOpacityMinimumValue(0, 15);\n        actor.getProperty().setGradientOpacityMinimumOpacity(0, 0.0);\n        actor.getProperty().setGradientOpacityMaximumValue(0, 100);\n        actor.getProperty().setGradientOpacityMaximumOpacity(0, 1.0);\n        actor.getProperty().setShade(true);\n        actor.getProperty().setAmbient(0.2);\n        actor.getProperty().setDiffuse(0.7);\n        actor.getProperty().setSpecular(0.3);\n        actor.getProperty().setSpecularPower(8.0);\n\n        // ----------------------------------------------------------------------------\n        // Example code\n        // ----------------------------------------------------------------------------\n\n        async function update() {\n            const volumeArrayBuffer = await LiteHttpDataAccessHelper.fetchBinary(\n                `https://data.kitware.com/api/v1/file/5d2a36ff877dfcc902fae6d9/download`\n            );\n\n            // Load the itk-wasm ESM module dynamically for the example.\n            // This can also go in the HTML <head>.\n            // Or `npm install @itk-wasm/image-io` and import it directly.\n            const { readImage } = await import(\n    // eslint-disable-next-line import/no-unresolved, import/extensions\n    /* webpackIgnore: true */ 'https://cdn.jsdelivr.net/npm/@itk-wasm/image-io@1.1.0/dist/bundle/index-worker-embedded.min.js'\n            );\n\n            const { image: itkImage, webWorker } = await readImage({\n                data: new Uint8Array(volumeArrayBuffer),\n                path: 'knee.mha',\n            });\n            // Optionally terminate the web worker when it is no longer needed\n            webWorker.terminate();\n\n            const vtkImage = vtkITKHelper.convertItkToVtkImage(itkImage);\n\n            mapper.setInputData(vtkImage);\n            renderer.addVolume(actor);\n            renderer.resetCamera();\n            renderer.getActiveCamera().zoom(1.5);\n            renderer.getActiveCamera().elevation(70);\n            renderer.updateLightsGeometryToFollowCamera();\n            renderWindow.render();\n        }\n        update();\n\n        // -----------------------------------------------------------\n        // Make some variables global so that you can inspect and\n        // modify objects in your browser's developer console:\n        // -----------------------------------------------------------\n\n        window.mapper = mapper;\n        window.actor = actor;\n        window.ctfun = ctfun;\n        window.ofun = ofun;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 3:\n描述: Renders a 3D medical volume (`headsq.vti`) with a clipping plane, using `vtkVolumeMapper` and `vtkVolumeActor` for customized appearance.\n\nVTK.js 模块: ['vtk.Rendering.Core.vtkVolumeMapper', 'vtk.Common.DataModel.vtkPiecewiseFunction', 'vtk.Common.DataModel.vtkPlane', 'vtk.IO.Core.vtkHttpDataSetReader.newInstance', 'vtk.Rendering.Core.vtkVolume', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n</head>\n\n<body>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        //using volume actor and mapper for rendering\n        const vtkVolumeActor = vtk.Rendering.Core.vtkVolume;\n        const vtkVolumeMapper = vtk.Rendering.Core.vtkVolumeMapper;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n        const vtkPlane = vtk.Common.DataModel.vtkPlane;\n\n        //init the render window\n        const fullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n        //create clip plan\n        const clipPlane = vtkPlane.newInstance();\n        const clipPlaneNormal = [0, 0, 1]\n\n        //set the data path and the reader\n        const dataPath = 'http://kitware.github.io/vtk-js/data/volume/headsq.vti';\n        const reader = vtk.IO.Core.vtkHttpDataSetReader.newInstance({ fetchGzip: true });\n\n        //load data from dataPath and render the results by actor and mapper\n        reader.setUrl(dataPath, { loadData: true })\n            .then(() => {\n                const data = reader.getOutputData(0);\n                \n                //compute the range of the data set and set clip plan accordingly\n                const extent = data.getExtent();\n                const spacing = data.getSpacing();\n                const sizeX = extent[1] * spacing[0];\n                const sizeY = extent[3] * spacing[1];\n\n                clipPlanePosition = sizeX / 2;\n\n                const clipPlaneOrigin = [\n                    clipPlanePosition * clipPlaneNormal[0],\n                    clipPlanePosition * clipPlaneNormal[1],\n                    clipPlanePosition * clipPlaneNormal[2],\n                ];\n\n                clipPlane.setNormal(clipPlaneNormal);\n                clipPlane.setOrigin(clipPlaneOrigin);\n\n                //create the mapper and set its property\n                const mapper = vtkVolumeMapper.newInstance();\n                mapper.addClippingPlane(clipPlane);\n                mapper.setInputData(data);\n                mapper.setSampleDistance(1);\n                mapper.setVolumetricScatteringBlending(0);\n                mapper.setLocalAmbientOcclusion(0);\n                mapper.setLAOKernelSize(10);\n                mapper.setLAOKernelRadius(5);\n                mapper.setComputeNormalFromOpacity(true);\n\n                //create actor and set its properties, including gradient opacity, scalar opacity, shade, ambient, diffuse, specular etc.\n                const actor = vtkVolumeActor.newInstance();\n                const ofun = vtkPiecewiseFunction.newInstance();\n                ofun.addPoint(0.0, 0.1);\n                ofun.addPoint(255.0, 1.0);\n                actor.getProperty().setScalarOpacity(0, ofun);\n                actor.getProperty().setInterpolationTypeToLinear();\n                actor.getProperty().setUseGradientOpacity(0, true);\n                actor.getProperty().setGradientOpacityMinimumValue(0, 2);\n                actor.getProperty().setGradientOpacityMinimumOpacity(0, 0.0);\n                actor.getProperty().setGradientOpacityMaximumValue(0, 20);\n                actor.getProperty().setGradientOpacityMaximumOpacity(0, 1.0);\n                actor.getProperty().setScalarOpacityUnitDistance(0, 2.955);\n                actor.getProperty().setShade(true);\n                actor.getProperty().setAmbient(0.3);\n                actor.getProperty().setDiffuse(1);\n                actor.getProperty().setSpecular(1);\n\n                //assign mapper to actor and assign mapper to render\n                actor.setMapper(mapper);\n                renderer.addVolume(actor);\n                renderer.resetCamera();\n                renderWindow.render();\n            });\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 4:\n描述: Loads 3D volume data, writes it to a binary XML format using `vtkXMLImageDataWriter`, reads it back with `vtkXMLImageDataReader`, and visualizes it\nVTK.js 模块: ['vtk.IO.XML.vtkXMLImageDataReader.newInstance', 'vtk.Common.DataModel.vtkPiecewiseFunction.newInstance', 'vtk.IO.Core.vtkHttpDataSetReader.newInstance', 'vtk.IO.XML.vtkXMLImageDataWriter.newInstance', 'vtk.IO.XML.vtkXMLWriter.FormatTypes.BINARY', 'vtk.Rendering.Core.vtkColorTransferFunction.newInstance', 'vtk.Rendering.Core.vtkVolume.newInstance', 'vtk.Rendering.Core.vtkVolumeMapper.newInstance', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js XMLImageDataWriter</title>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n\n    <script type=\"text/javascript\" src=\"https://unpkg.com/@babel/polyfill@7.0.0/dist/polyfill.js\"></script>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const dataPath = 'http://kitware.github.io/vtk-js/data/volume/headsq.vti';\n        const fullScreenRenderer = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance();\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        const reader = vtk.IO.Core.vtkHttpDataSetReader.newInstance({ fetchGzip: true });\n\n        const writer = vtk.IO.XML.vtkXMLImageDataWriter.newInstance();\n        writer.setFormat(vtk.IO.XML.vtkXMLWriter.FormatTypes.BINARY);\n        writer.setInputConnection(reader.getOutputPort());\n\n        const writerReader = vtk.IO.XML.vtkXMLImageDataReader.newInstance();\n\n        reader\n            .setUrl(dataPath, { loadData: true })\n            .then(() => {\n                const fileContents = writer.write(reader.getOutputData());\n\n                // Try to read it back.\n                const textEncoder = new TextEncoder();\n                writerReader.parseAsArrayBuffer(textEncoder.encode(fileContents));\n                renderer.resetCamera();\n                renderWindow.render();\n\n                const blob = new Blob([fileContents], { type: 'text/plain' });\n                const a = window.document.createElement('a');\n                a.href = window.URL.createObjectURL(blob, { type: 'text/plain' });\n                a.download = 'headsq.vti';\n                a.text = 'Download';\n                a.style.position = 'absolute';\n                a.style.left = '50%';\n                a.style.bottom = '10px';\n                document.body.appendChild(a);\n                a.style.background = 'white';\n                a.style.padding = '5px';\n            });\n\n        const actor = vtk.Rendering.Core.vtkVolume.newInstance();\n        const mapper = vtk.Rendering.Core.vtkVolumeMapper.newInstance();\n        mapper.setSampleDistance(1.1);\n        actor.setMapper(mapper);\n\n        mapper.setInputConnection(writerReader.getOutputPort());\n\n        // create color and opacity transfer functions\n        const ctfun = vtk.Rendering.Core.vtkColorTransferFunction.newInstance();\n        ctfun.addRGBPoint(200.0, 1.0, 1.0, 1.0);\n        ctfun.addRGBPoint(2000.0, 0.0, 0.0, 0.0);\n        const ofun = vtk.Common.DataModel.vtkPiecewiseFunction.newInstance();\n        ofun.addPoint(200.0, 0.0);\n        ofun.addPoint(1200.0, 0.2);\n        ofun.addPoint(4000.0, 0.4);\n        actor.getProperty().setRGBTransferFunction(0, ctfun);\n        actor.getProperty().setScalarOpacity(0, ofun);\n        actor.getProperty().setScalarOpacityUnitDistance(0, 4.5);\n        // actor.getProperty().setInterpolationTypeToNearest();\n        // actor.getProperty().setInterpolationTypeToFastLinear();\n        actor.getProperty().setInterpolationTypeToLinear();\n\n        renderer.addActor(actor);\n\n        window.writer = writer;\n        window.writerReader = writerReader;\n        window.mapper = mapper;\n        window.actor = actor;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n\n    </script>\n\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 5:\n描述: This code visualizes a 3D plane colored by a mathematical function, using `vtkCalculator` for scalar values and `vtkMapper` for coloring.\n\nVTK.js 模块: ['vtk.Filters.General.vtkCalculator', 'vtk.Common.Core.vtkPoints', 'vtk.Common.DataModel.vtkDataSet.FieldDataTypes', 'vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes', 'vtk.Common.DataModel.vtkPolyData', 'vtk.Filters.Sources.vtkPlaneSource', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        // using vtk namespace\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPlaneSource = vtk.Filters.Sources.vtkPlaneSource;\n        const vtkPolyData = vtk.Common.DataModel.vtkPolyData;\n        const vtkPoints = vtk.Common.Core.vtkPoints;\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldDataTypes;\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // setting vtkCalculator and set formula\n\n        const simpleFilter = vtkCalculator.newInstance();\n\n        simpleFilter.setFormulaSimple(\n            FieldDataTypes.POINT, // Generate an output array defined over points.\n            [], // We don't request any point-data arrays because point coordinates are made available by default.\n            'outputArray', // Name the output array \n            (x) => (x[0] - 0.5) * (x[0] - 0.5) + (x[1] - 0.5) * (x[1] - 0.5) + 0.125\n        ); \n\n        //using plane source to generate a poly data which can be rendered by vtkActor\n        const planeSource = vtkPlaneSource.newInstance({\n            xResolution: 25,\n            yResolution: 25,\n        });\n\n        const sourceData = planeSource.getOutputData();\n\n        simpleFilter.setInputData(sourceData);\n        const planeActor = vtkActor.newInstance();\n        const planeMapper = vtkMapper.newInstance();\n        planeMapper.setInputData(simpleFilter.getOutputData());\n        planeMapper.setColorByArrayName('outputArray'); \n\n        planeMapper.setScalarModeToUsePointFieldData();   \n        planeActor.setMapper(planeMapper);\n        planeActor.getProperty().setEdgeVisibility(true);\n\n        renderer.addActor(planeActor);\n        renderer.resetCamera();\n        renderWindow.render();\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 6:\n描述: Generates a plane and uses `vtkCalculator` to create custom point data ('orientation', 'temperature', 'pressure'), which `vtkStickMapper` could use for rendering (currently not fully connected).\n\nVTK.js 模块: ['vtk.Filters.General.vtkCalculator', 'vtk.Common.DataModel.vtkDataSet.FieldAssociations', 'vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes', 'vtk.Filters.Sources.vtkPlaneSource', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkStickMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n\n    <script>\n        // Use vtk namespace to reference classes\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPlaneSource = vtk.Filters.Sources.vtkPlaneSource;\n        const vtkStickMapper = vtk.Rendering.Core.vtkStickMapper;\n\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldAssociations;\n\n        const controlPanel = `<table>\n  <tr>\n    <td>X Resolution</td>\n    <td>\n      <input class='xResolution' type=\"range\" min=\"1\" max=\"25\" step=\"1\" value=\"10\" />\n    </td>\n  </tr>\n  <tr>\n    <td>Y Resolution</td>\n    <td>\n      <input class='yResolution' type=\"range\" min=\"1\" max=\"25\" step=\"1\" value=\"10\" />\n    </td>\n  </tr>\n</table>`;\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // ----------------------------------------------------------------------------\n        // Example code\n        // ----------------------------------------------------------------------------\n\n        const planeSource = vtkPlaneSource.newInstance({\n            xResolution: 25,\n            yResolution: 25,\n        });\n\n\n        console.log(planeSource.getOutputData().toJSON());\n\n        const simpleFilter = vtkCalculator.newInstance();\n        const mapper = vtkStickMapper.newInstance();\n        const actor = vtkActor.newInstance();\n\n        simpleFilter.setFormula({\n            getArrays: (inputDataSets) => ({\n                input: [{ location: FieldDataTypes.COORDINATE }], // Require point coordinates as input\n                output: [\n                    // Generate two output arrays:\n                    {\n                        location: FieldDataTypes.POINT, // This array will be point-data ...\n                        name: 'orientation', // ... with the given name ...\n                        dataType: 'Float32Array', // ... of this type ...\n                        numberOfComponents: 3, // ... with this many components ...\n                    },\n                    {\n                        location: FieldDataTypes.POINT, // This array will be field data ...\n                        name: 'temperature', // ... with the given name ...\n                        dataType: 'Float32Array', // ... of this type ...\n                        attribute: AttributeTypes.SCALARS, // ... and will be marked as the default scalars.\n                        numberOfComponents: 1, // ... with this many components ...\n                    },\n                    {\n                        location: FieldDataTypes.POINT, // This array will be field data ...\n                        name: 'pressure', // ... with the given name ...\n                        dataType: 'Float32Array', // ... of this type ...\n                        numberOfComponents: 2, // ... with this many components ...\n                    },\n                ],\n            }),\n            evaluate: (arraysIn, arraysOut) => {\n                // Convert in the input arrays of vtkDataArrays into variables\n                // referencing the underlying JavaScript typed-data arrays:\n                // array in is null here?\n                console.log(\"arraysIn:\", arraysIn());\n                const [coords] = arraysIn.map((d) => d.getData());\n                const [orient, temp, press] = arraysOut.map((d) => d.getData());\n\n                // Since we are passed coords as a 3-component array,\n                // loop over all the points and compute the point-data output:\n                for (let i = 0, sz = coords.length / 3; i < sz; ++i) {\n                    orient[i * 3] =\n                        (coords[3 * i] - 0.5) * (coords[3 * i] - 0.5) +\n                        (coords[3 * i + 1] - 0.5) * (coords[3 * i + 1] - 0.5);\n                    orient[i * 3 + 1] =\n                        (coords[3 * i] - 0.5) * (coords[3 * i] - 0.5) +\n                        (coords[3 * i + 1] - 0.5) * (coords[3 * i + 1] - 0.5);\n                    orient[i * 3 + 2] = 1.0;\n\n                    temp[i] = coords[3 * i + 1];\n\n                    press[i * 2] =\n                        (coords[3 * i] * coords[3 * i] +\n                            coords[3 * i + 1] * coords[3 * i + 1]) *\n                        0.05 +\n                        0.05;\n                    press[i * 2 + 1] =\n                        (coords[3 * i] * coords[3 * i] +\n                            coords[3 * i + 1] * coords[3 * i + 1]) *\n                        0.01 +\n                        0.01;\n                }\n                // Mark the output vtkDataArray as modified\n                arraysOut.forEach((x) => x.modified());\n            },\n        });\n\n        // The generated 'temperature' array will become the default scalars\n        // so the plane mapper will color by 'temperature':\n        simpleFilter.setInputData(planeSource.getOutputData());\n        simpleFilter.update();\n        concole.log(simpleFilter.getOutputData());\n\n        //mapper.setInputConnection(simpleFilter.getOutputPort());\n\n        //mapper.setOrientationArray('orientation');\n        //mapper.setScaleArray('pressure');\n\n        //actor.setMapper(mapper);\n\n       // renderer.addActor(actor);\n       // renderer.resetCamera();\n        //renderWindow.render();\n\n        // -----------------------------------------------------------\n        // UI control handling\n        // -----------------------------------------------------------\n\n        // fullScreenRenderer.addController(controlPanel);\n        // ['xResolution', 'yResolution'].forEach((propertyName) => {\n        //     document.querySelector(`.${propertyName}`).addEventListener('input', (e) => {\n        //         const value = Number(e.target.value);\n        //         console.log(\"propertyName\",propertyName);\n        //         console.log(\"value\",value);\n        //         planeSource.set({ [propertyName]: value });\n        //         renderWindow.render();\n        //     });\n        // });\n\n        // -----------------------------------------------------------\n        // Make some variables global so that you can inspect and\n        // modify objects in your browser's developer console:\n        // -----------------------------------------------------------\n\n        window.planeSource = planeSource;\n        window.mapper = mapper;\n        window.actor = actor;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 7:\n描述: Creates a 3D visualization where a plane is rendered using a `vtkStickMapper`. The plane's geometry is generated with a `vtkPlaneSource`, and `vtkCalculator` processes the data to generate custom point attributes ('orientation', 'temperature', 'pressure') which `vtkStickMapper` uses to control the orientation and scaling of the sticks. The visualization is displayed in a full-screen renderer with a dark background. Additionally, UI controls allow adjusting the X and Y resolution of the plane, which dynamically updates the visualization.\n\nVTK.js 模块: ['vtk.Filters.General.vtkCalculator', 'vtk.Common.DataModel.vtkDataSet.FieldAssociations', 'vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes', 'vtk.Filters.Sources.vtkPlaneSource', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkStickMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js StickMapper</title>\n    <link rel=\"stylesheet\" href=\"https://kit.fontawesome.com/419a5ebb56.css\" crossorigin=\"anonymous\">\n    <style>\n        #renderer {\n            width: 100%;\n            height: 600px;\n            background-color: #333;\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js/Sources/Rendering/Profiles/Geometry\"></script>\n    <script src=\"https://unpkg.com/vtk.js/Sources/Rendering/Profiles/Molecule\"></script>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n\n    <script>\n        // Use vtk namespace to reference classes\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPlaneSource = vtk.Filters.Sources.vtkPlaneSource;\n        const vtkStickMapper = vtk.Rendering.Core.vtkStickMapper;\n\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldAssociations;\n\n        const controlPanel = `<table>\n  <tr>\n    <td>X Resolution</td>\n    <td>\n      <input class='xResolution' type=\"range\" min=\"1\" max=\"25\" step=\"1\" value=\"10\" />\n    </td>\n  </tr>\n  <tr>\n    <td>Y Resolution</td>\n    <td>\n      <input class='yResolution' type=\"range\" min=\"1\" max=\"25\" step=\"1\" value=\"10\" />\n    </td>\n  </tr>\n</table>`;\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // ----------------------------------------------------------------------------\n        // Example code\n        // ----------------------------------------------------------------------------\n\n        const planeSource = vtkPlaneSource.newInstance();\n        const simpleFilter = vtkCalculator.newInstance();\n        const mapper = vtkStickMapper.newInstance();\n        const actor = vtkActor.newInstance();\n\n        simpleFilter.setFormula({\n            getArrays: (inputDataSets) => ({\n                input: [{ location: FieldDataTypes.COORDINATE }], // Require point coordinates as input\n                output: [\n                    // Generate two output arrays:\n                    {\n                        location: FieldDataTypes.POINT, // This array will be point-data ...\n                        name: 'orientation', // ... with the given name ...\n                        dataType: 'Float32Array', // ... of this type ...\n                        numberOfComponents: 3, // ... with this many components ...\n                    },\n                    {\n                        location: FieldDataTypes.POINT, // This array will be field data ...\n                        name: 'temperature', // ... with the given name ...\n                        dataType: 'Float32Array', // ... of this type ...\n                        attribute: AttributeTypes.SCALARS, // ... and will be marked as the default scalars.\n                        numberOfComponents: 1, // ... with this many components ...\n                    },\n                    {\n                        location: FieldDataTypes.POINT, // This array will be field data ...\n                        name: 'pressure', // ... with the given name ...\n                        dataType: 'Float32Array', // ... of this type ...\n                        numberOfComponents: 2, // ... with this many components ...\n                    },\n                ],\n            }),\n            evaluate: (arraysIn, arraysOut) => {\n                // Convert in the input arrays of vtkDataArrays into variables\n                // referencing the underlying JavaScript typed-data arrays:\n                const [coords] = arraysIn.map((d) => d.getData());\n                const [orient, temp, press] = arraysOut.map((d) => d.getData());\n\n                // Since we are passed coords as a 3-component array,\n                // loop over all the points and compute the point-data output:\n                for (let i = 0, sz = coords.length / 3; i < sz; ++i) {\n                    orient[i * 3] =\n                        (coords[3 * i] - 0.5) * (coords[3 * i] - 0.5) +\n                        (coords[3 * i + 1] - 0.5) * (coords[3 * i + 1] - 0.5);\n                    orient[i * 3 + 1] =\n                        (coords[3 * i] - 0.5) * (coords[3 * i] - 0.5) +\n                        (coords[3 * i + 1] - 0.5) * (coords[3 * i + 1] - 0.5);\n                    orient[i * 3 + 2] = 1.0;\n\n                    temp[i] = coords[3 * i + 1];\n\n                    press[i * 2] =\n                        (coords[3 * i] * coords[3 * i] +\n                            coords[3 * i + 1] * coords[3 * i + 1]) *\n                        0.05 +\n                        0.05;\n                    press[i * 2 + 1] =\n                        (coords[3 * i] * coords[3 * i] +\n                            coords[3 * i + 1] * coords[3 * i + 1]) *\n                        0.01 +\n                        0.01;\n                }\n                // Mark the output vtkDataArray as modified\n                arraysOut.forEach((x) => x.modified());\n            },\n        });\n\n        // The generated 'temperature' array will become the default scalars, so the plane mapper will color by 'temperature':\n        simpleFilter.setInputConnection(planeSource.getOutputPort());\n\n        mapper.setInputConnection(simpleFilter.getOutputPort());\n\n        mapper.setOrientationArray('orientation');\n        mapper.setScaleArray('pressure');\n\n        actor.setMapper(mapper);\n\n        renderer.addActor(actor);\n        renderer.resetCamera();\n        renderWindow.render();\n\n        // -----------------------------------------------------------\n        // UI control handling\n        // -----------------------------------------------------------\n\n        fullScreenRenderer.addController(controlPanel);\n        ['xResolution', 'yResolution'].forEach((propertyName) => {\n            document.querySelector(`.${propertyName}`).addEventListener('input', (e) => {\n                const value = Number(e.target.value);\n                planeSource.set({ [propertyName]: value });\n                renderWindow.render();\n            });\n        });\n\n        // -----------------------------------------------------------\n        // Make some variables global so that you can inspect and\n        // modify objects in your browser's developer console:\n        // -----------------------------------------------------------\n\n        window.planeSource = planeSource;\n        window.mapper = mapper;\n        window.actor = actor;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 8:\n描述: Visualizes a 3D plane with glyphs (e.g., cones) whose scale and orientation are based on scalar and vector data, using `vtkGlyph3DMapper` and `vtkCalculator`.\n\nVTK.js 模块: ['vtk.Filters.General.vtkCalculator', 'vtk.Common.DataModel.vtkDataSet.FieldAssociations', 'vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes', 'vtk.Filters.Sources.vtkConeSource', 'vtk.Filters.Sources.vtkPlaneSource', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkGlyph3DMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtkjs- Rendering-GlyphMapper</title>\n</head>\n\n\n\n<body>\n\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n\n    <script>\n        // Assuming vtk object is properly imported and available in global environment, proceed with corresponding assignments\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPlaneSource = vtk.Filters.Sources.vtkPlaneSource;\n        const vtkConeSource = vtk.Filters.Sources.vtkConeSource;\n        const vtkGlyph3DMapper = vtk.Rendering.Core.vtkGlyph3DMapper;\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldAssociations;\n        const controlPanel = `<table>\n  <tr>\n    <td>X Resolution</td>\n    <td>\n      <input class='xResolution' type=\"range\" min=\"1\" max=\"25\" step=\"1\" value=\"10\" />\n    </td>\n  </tr>\n  <tr>\n    <td>Y Resolution</td>\n    <td>\n      <input class='yResolution' type=\"range\" min=\"1\" max=\"25\" step=\"1\" value=\"10\" />\n    </td>\n  </tr>\n</table>\n`\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // ----------------------------------------------------------------------------\n        // Example code\n        // ----------------------------------------------------------------------------\n\n        const planeSource = vtkPlaneSource.newInstance();\n        const simpleFilter = vtkCalculator.newInstance();\n        const mapper = vtkGlyph3DMapper.newInstance();\n        const actor = vtkActor.newInstance();\n\n        simpleFilter.setFormula({\n            getArrays: (inputDataSets) => ({\n                input: [{ location: FieldDataTypes.COORDINATE }], // Require point coordinates as input\n                output: [\n                    // Generate two output arrays:\n                    {\n                        location: FieldDataTypes.POINT, // This array will be point-data...\n                        name: 'pressure', //... with the given name...\n                        dataType: 'Float32Array', //... of this type...\n                        numberOfComponents: 3, //... with this many components...\n                    },\n                    {\n                        location: FieldDataTypes.POINT, // This array will be field data...\n                        name: 'temperature', //... with the given name...\n                        dataType: 'Float32Array', //... of this type...\n                        attribute: AttributeTypes.SCALARS, //... and will be marked as the default scalars.\n                        numberOfComponents: 1, //... with this many components...\n                    },\n                ],\n            }),\n            evaluate: (arraysIn, arraysOut) => {\n                // Convert in the input arrays of vtkDataArrays into variables\n                // referencing the underlying JavaScript typed-data arrays:\n                const [coords] = arraysIn.map((d) => d.getData());\n                const [press, temp] = arraysOut.map((d) => d.getData());\n\n                // Since we are passed coords as a 3-component array,\n                // loop over all the points and compute the point-data output:\n                for (let i = 0, sz = coords.length / 3; i < sz; ++i) {\n                    press[i * 3] = (coords[3 * i] - 0.5) * (coords[3 * i] - 0.5);\n                    press[i * 3 + 1] =\n                        ((coords[3 * i + 1] - 0.5) * (coords[3 * i + 1] - 0.5) + 0.125) * 0.1;\n                    press[i * 3 + 2] =\n                        ((coords[3 * i] - 0.5) * (coords[3 * i] - 0.5) +\n                            (coords[3 * i + 1] - 0.5) * (coords[3 * i + 1] - 0.5) +\n                            0.125) *\n                        0.1;\n                    temp[i] = coords[3 * i + 1] * 0.1;\n                }\n\n                // Mark the output vtkDataArray as modified\n                arraysOut.forEach((x) => x.modified());\n            },\n        });\n\n\n        // console.log(\"planeSource\", planeSource.getOutputPort)\n        // The generated 'temperature' array will become the default scalars, so the plane mapper will color by 'temperature':\n        simpleFilter.setInputConnection(planeSource.getOutputPort());\n\n        mapper.setInputConnection(simpleFilter.getOutputPort(), 0);\n\n        const coneSource = vtkConeSource.newInstance();\n        coneSource.setResolution(12);\n        mapper.setInputConnection(coneSource.getOutputPort(), 1);\n        mapper.setOrientationArray('pressure');\n        mapper.setScalarRange(0.0, 0.1);\n\n        actor.setMapper(mapper);\n\n        renderer.addActor(actor);\n        renderer.resetCamera();\n        renderWindow.render();\n\n        // -----------------------------------------------------------\n        // UI control handling\n        // -----------------------------------------------------------\n\n        fullScreenRenderer.addController(controlPanel);\n        ['xResolution', 'yResolution'].forEach((propertyName) => {\n            document.querySelector(`.${propertyName}`).addEventListener('input', (e) => {\n                const value = Number(e.target.value);\n                planeSource.set({ [propertyName]: value });\n                renderWindow.render();\n            });\n        });\n\n        // -----------------------------------------------------------\n        // Make some variables global so that you can inspect and\n        // modify objects in your browser's developer console:\n        // -----------------------------------------------------------\n\n        window.planeSource = planeSource;\n        window.mapper = mapper;\n        window.actor = actor;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n    </script>\n\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 9:\n描述: Loads a 3D volume (`headsq.vti`) and displays three orthogonal slices (I, J, K) with interactive controls for position and color properties.\n\nVTK.js 模块: ['vtk.IO.Core.vtkHttpDataSetReader', 'vtk.Rendering.Core.vtkImageMapper', 'vtk.Rendering.Core.vtkImageSlice', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js Isosurface Visualization</title>\n    <link rel=\"stylesheet\" href=\"https://kit.fontawesome.com/419a5ebb56.css\" crossorigin=\"anonymous\">\n    <style>\n        #renderer {\n            width: 100%;\n            height: 600px;\n            background-color: #333;\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <!-- Set vtk.js favicon -->\n    <script type=\"module\" src=\"https://unpkg.com/vtk.js/favicon.js\"></script>\n\n    <!-- Load WebGL and WebGPU rendering modules -->\n    <script type=\"module\" src=\"https://unpkg.com/vtk.js/Sources/Rendering/Profiles/Volume.js\"></script>\n\n    <!-- Force DataAccessHelper to access various data sources -->\n    <script type=\"module\"\n        src=\"https://unpkg.com/vtk.js/Sources/IO/Core/DataAccessHelper/HtmlDataAccessHelper.js\"></script>\n    <script type=\"module\"\n        src=\"https://unpkg.com/vtk.js/Sources/IO/Core/DataAccessHelper/HttpDataAccessHelper.js\"></script>\n    <script type=\"module\"\n        src=\"https://unpkg.com/vtk.js/Sources/IO/Core/DataAccessHelper/JSZipDataAccessHelper.js\"></script>\n\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkHttpDataSetReader = vtk.IO.Core.vtkHttpDataSetReader;\n        const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n        const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n        const path = 'http://kitware.github.io/vtk-js/data'\n\n        // Reference HTML template\n        const controlPanel = `<table>\n    <tr>\n        <td>Slice I</td>\n        <td>\n            <input class='sliceI' type=\"range\" min=\"0\" max=\"2.0\" step=\"1\" value=\"1\" />\n        </td>\n    </tr>\n    <tr>\n        <td>Slice J</td>\n        <td>\n            <input class='sliceJ' type=\"range\" min=\"0\" max=\"2.0\" step=\"1\" value=\"1\" />\n        </td>\n    </tr>\n    <tr>\n        <td>Slice K</td>\n        <td>\n            <input class='sliceK' type=\"range\" min=\"0\" max=\"100\" step=\"1\" value=\"1\" />\n        </td>\n    </tr>\n    <tr>\n        <td>Color level</td>\n        <td>\n            <input class='colorLevel' type=\"range\" min=\"-3926\" max=\"3926\" step=\"1\" value=\"1\" />\n        </td>\n    </tr>\n    <tr>\n        <td>ColorWindow</td>\n        <td>\n            <input class='colorWindow' type=\"range\" min=\"0\" max=\"3926\" step=\"1\" value=\"1\" />\n        </td>\n    </tr>\n</table>\n`;\n        const fullScreenRenderWindow = vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n        fullScreenRenderWindow.addController(controlPanel);\n\n        const imageActorI = vtkImageSlice.newInstance();\n        const imageActorJ = vtkImageSlice.newInstance();\n        const imageActorK = vtkImageSlice.newInstance();\n\n        renderer.addActor(imageActorK);\n        renderer.addActor(imageActorJ);\n        renderer.addActor(imageActorI);\n\n        function updateColorLevel(e) {\n            const colorLevel = Number(\n                (e ? e.target : document.querySelector('.colorLevel')).value\n            );\n            imageActorI.getProperty().setColorLevel(colorLevel);\n            imageActorJ.getProperty().setColorLevel(colorLevel);\n            imageActorK.getProperty().setColorLevel(colorLevel);\n            renderWindow.render();\n        }\n\n        function updateColorWindow(e) {\n            const colorLevel = Number(\n                (e ? e.target : document.querySelector('.colorWindow')).value\n            );\n            imageActorI.getProperty().setColorWindow(colorLevel);\n            imageActorJ.getProperty().setColorWindow(colorLevel);\n            imageActorK.getProperty().setColorWindow(colorLevel);\n            renderWindow.render();\n        }\n\n        const reader = vtkHttpDataSetReader.newInstance({\n            fetchGzip: true,\n        });\n        reader\n            .setUrl(`${path}/data/volume/headsq.vti`, { loadData: true })\n            .then(() => {\n                const data = reader.getOutputData();\n                const dataRange = data.getPointData().getScalars().getRange();\n                const extent = data.getExtent();\n\n                const imageMapperK = vtkImageMapper.newInstance();\n                imageMapperK.setInputData(data);\n                imageMapperK.setKSlice(30);\n                imageActorK.setMapper(imageMapperK);\n\n                const imageMapperJ = vtkImageMapper.newInstance();\n                imageMapperJ.setInputData(data);\n                imageMapperJ.setJSlice(30);\n                imageActorJ.setMapper(imageMapperJ);\n\n                const imageMapperI = vtkImageMapper.newInstance();\n                imageMapperI.setInputData(data);\n                imageMapperI.setISlice(30);\n                imageActorI.setMapper(imageMapperI);\n\n                renderer.resetCamera();\n                renderer.resetCameraClippingRange();\n                renderWindow.render();\n\n                ['.sliceI', '.sliceJ', '.sliceK'].forEach((selector, idx) => {\n                    const el = document.querySelector(selector);\n                    el.setAttribute('min', extent[idx * 2 + 0]);\n                    el.setAttribute('max', extent[idx * 2 + 1]);\n                    el.setAttribute('value', 30);\n                });\n\n                ['.colorLevel', '.colorWindow'].forEach((selector) => {\n                    document.querySelector(selector).setAttribute('max', dataRange[1]);\n                    document.querySelector(selector).setAttribute('value', dataRange[1]);\n                });\n                document\n                    .querySelector('.colorLevel')\n                    .setAttribute('value', (dataRange[0] + dataRange[1]) / 2);\n                updateColorLevel();\n                updateColorWindow();\n            });\n\n        document.querySelector('.sliceI').addEventListener('input', (e) => {\n            imageActorI.getMapper().setISlice(Number(e.target.value));\n            renderWindow.render();\n        });\n\n        document.querySelector('.sliceJ').addEventListener('input', (e) => {\n            imageActorJ.getMapper().setJSlice(Number(e.target.value));\n            renderWindow.render();\n        });\n\n        document.querySelector('.sliceK').addEventListener('input', (e) => {\n            imageActorK.getMapper().setKSlice(Number(e.target.value));\n            renderWindow.render();\n        });\n\n        document\n            .querySelector('.colorLevel')\n            .addEventListener('input', updateColorLevel);\n        document\n            .querySelector('.colorWindow')\n            .addEventListener('input', updateColorWindow);\n\n        window.fullScreen = fullScreenRenderWindow;\n        window.imageActorI = imageActorI;\n        window.imageActorJ = imageActorJ;\n        window.imageActorK = imageActorK;\n\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 10:\n描述: Displays a 2D image volume with an outlined labelmap. Specific regions (high/low values) are highlighted in red/green with transparent outlines.\n\nVTK.js 模块: ['vtk.Common.Core.vtkDataArray', 'vtk.Common.DataModel.vtkDataSet.FieldAssociations', 'vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes', 'vtk.Common.DataModel.vtkImageData', 'vtk.Common.DataModel.vtkPiecewiseFunction', 'vtk.Filters.General.vtkCalculator', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkColorTransferFunction', 'vtk.Rendering.Core.vtkImageMapper', 'vtk.Rendering.Core.vtkImageSlice', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js ImageLabelOutline</title>\n    <style>\n        #renderer {\n            width: 100%;\n            height: 600px;\n            background-color: #333;\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        // Use the vtk namespace to reference each class\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n        const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n        const vtkImageData = vtk.Common.DataModel.vtkImageData;\n        const vtkDataArray = vtk.Common.Core.vtkDataArray;\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n\n        // Use the vtk namespace to reference constants\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldAssociations;\n\n        const fullScreenRenderWindow = vtkFullScreenRenderWindow.newInstance({\n            background: [0.5, 0.5, 0.5],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n        const BACKGROUND = 0;\n        const LOW_VALUE = 80;\n        const HIGH_VALUE = 160;\n\n        const FIRST_SEGMENT = 1;\n        const SECOND_SEGMENT = 5;\n\n        /**\n         * Creates a labelmap image with the same dimensions as the background volume.\n         * @param {vtkImageData} backgroundImageData - The background volume data.\n         * @returns {Object} An object containing the labelmap actor, mapper, image data, color transfer function, and opacity function.\n         */\n        function createLabelmap(backgroundImageData) {\n            // Create a labelmap image the same dimensions as our background volume.\n            const labelMapData = vtkImageData.newInstance(\n                backgroundImageData.get('spacing', 'origin', 'direction')\n            );\n\n            labelMapData.computeTransforms();\n\n            const dataArray = vtkDataArray.newInstance({\n                numberOfComponents: 1,\n                values: new Uint8Array(backgroundImageData.getNumberOfPoints()),\n            });\n            labelMapData.getPointData().setScalars(dataArray);\n\n            labelMapData.setDimensions(...backgroundImageData.getDimensions());\n            labelMapData.setSpacing(...backgroundImageData.getSpacing());\n            labelMapData.setOrigin(...backgroundImageData.getOrigin());\n            labelMapData.setDirection(...backgroundImageData.getDirection());\n            const mapper = vtkImageMapper.newInstance();\n            mapper.setInputData(labelMapData);\n\n            const actor = vtkImageSlice.newInstance();\n\n            actor.setMapper(mapper);\n\n            const labelMap = {\n                actor,\n                mapper,\n                imageData: labelMapData,\n                cfun: vtkColorTransferFunction.newInstance(),\n                ofun: vtkPiecewiseFunction.newInstance(),\n            };\n\n            // Labelmap pipeline\n            labelMap.mapper.setInputData(labelMapData);\n            labelMap.actor.setMapper(labelMap.mapper);\n\n            // Set up labelMap color and opacity mapping\n            labelMap.cfun.addRGBPoint(0, 0, 0, 0); // label \"1\" will be red\n            labelMap.cfun.addRGBPoint(FIRST_SEGMENT, 1, 0, 0); // label \"1\" will be red\n            labelMap.cfun.addRGBPoint(SECOND_SEGMENT, 0, 1, 0); // label \"5\" will be green\n            labelMap.ofun.addPoint(0, 0);\n            labelMap.ofun.addPoint(FIRST_SEGMENT, 0.1); // Red will have an opacity of 0.1.\n            labelMap.ofun.addPoint(SECOND_SEGMENT, 0.1); // Green will have an opacity of 0.1.\n\n            labelMap.actor.getProperty().setRGBTransferFunction(0, labelMap.cfun);\n            labelMap.actor.getProperty().setScalarOpacity(0, labelMap.ofun);\n            labelMap.actor.getProperty().setInterpolationTypeToNearest();\n\n            labelMap.actor.getProperty().setUseLabelOutline(true);\n            // Label outline thickness is for first segment -> 2 (positioned at array index 0), second segment -> 4\n            // (positioned at array index 4)\n            labelMap.actor.getProperty().setLabelOutlineThickness([2, 1, 1, 1, 4]);\n            labelMap.actor.getProperty().setLabelOutlineOpacity(1.0);\n\n            // This is very important to make sure the labelmap is rendered\n            // correctly\n            labelMap.actor.getProperty().setUseLookupTableScalarRange(true);\n\n            const dims = labelMap.imageData.getDimensions();\n            const values = labelMap.imageData.getPointData().getScalars().getData();\n\n            const backgroundValues = backgroundImageData\n                .getPointData()\n                .getScalars()\n                .getData();\n            const size = dims[0] * dims[1] * dims[2];\n\n            for (let i = 0; i < size; i++) {\n                if (backgroundValues[i] === LOW_VALUE) {\n                    values[i] = FIRST_SEGMENT;\n                } else if (backgroundValues[i] === HIGH_VALUE) {\n                    values[i] = SECOND_SEGMENT;\n                }\n            }\n\n            labelMap.imageData.getPointData().getScalars().setData(values);\n\n            return labelMap;\n        }\n\n        // Create a one slice vtkImageData that has four quadrants of different values\n        const imageData = vtkImageData.newInstance();\n        const dims = [10, 10, 1];\n        imageData.setSpacing(1, 1, 1);\n        imageData.setOrigin(0.1, 0.1, 0.1);\n        imageData.setDirection(1, 0, 0, 0, 1, 0, 0, 0, 1);\n        imageData.setExtent(0, dims[0] - 1, 0, dims[1] - 1, 0, dims[2] - 1);\n\n        imageData.computeTransforms();\n\n        const values = new Uint8Array(dims[0] * dims[1] * dims[2]);\n\n        let i = 0;\n        for (let y = 0; y < dims[1]; y++) {\n            for (let x = 0; x < dims[0]; x++, i++) {\n                if ((x < 3 && y < 3) || (x > 7 && y > 7)) {\n                    values[i] = BACKGROUND;\n                } else if (x > 4 && x < 6 && y > 4 && y < 7) {\n                    values[i] = LOW_VALUE;\n                } else {\n                    values[i] = HIGH_VALUE;\n                }\n            }\n        }\n\n        const dataArray = vtkDataArray.newInstance({\n            numberOfComponents: 1,\n            values,\n        });\n        imageData.getPointData().setScalars(dataArray);\n        imageData.modified();\n\n        const data = imageData;\n        const labelMap = createLabelmap(data);\n\n        const actor = vtkImageSlice.newInstance();\n        const mapper = vtkImageMapper.newInstance();\n        mapper.setInputData(data);\n        actor.setMapper(mapper);\n        actor.getProperty().setInterpolationTypeToNearest();\n\n        renderer.addActor(actor);\n        renderer.addActor(labelMap.actor);\n        renderer.resetCamera();\n        renderer.resetCameraClippingRange();\n        renderWindow.render();\n\n        window.fullScreen = fullScreenRenderWindow;\n\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 11:\n描述: Loads a 3D volumetric dataset (`headsq.vti`) and extracts an isosurface using `vtkImageMarchingCubes`, with a real-time adjustable iso-value.\n\nVTK.js 模块: ['vtk.Filters.General.vtkImageMarchingCubes.newInstance', 'vtk.IO.Core.vtkHttpDataSetReader.newInstance', 'vtk.Rendering.Core.vtkActor.newInstance', 'vtk.Rendering.Core.vtkMapper.newInstance', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js GCodeReader</title>\n</head>\n\n<body>\n\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const dataPath = 'http://kitware.github.io/vtk-js/data/volume/headsq.vti';\n\n        const fullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n        \n        const controlPanel = `<table>\n        <tr>\n            <td>Iso value</td>\n            <td>\n            <input class='isoValue' type=\"range\" min=\"0.0\" max=\"1.0\" step=\"0.05\" value=\"0.0\" />\n            </td>\n        </tr>\n        </table>`;\n\n        fullScreenRenderWindow.addController(controlPanel);\n\n        const actor = vtk.Rendering.Core.vtkActor.newInstance();\n        const mapper = vtk.Rendering.Core.vtkMapper.newInstance();\n        const marchingCube = vtk.Filters.General.vtkImageMarchingCubes.newInstance({\n            contourValue: 0.0,\n            computeNormals: true,\n            mergePoints: true,\n        });\n\n        actor.setMapper(mapper);\n        mapper.setInputConnection(marchingCube.getOutputPort());\n\n        function updateIsoValue(e) {\n            const isoValue = Number(e.target.value);\n            marchingCube.setContourValue(isoValue);\n            renderWindow.render();\n        }\n\n        const reader = vtk.IO.Core.vtkHttpDataSetReader.newInstance({ fetchGzip: true });\n        marchingCube.setInputConnection(reader.getOutputPort());\n\n        reader\n        .setUrl(dataPath, { loadData: true })\n        .then(() => {\n            const data = reader.getOutputData();\n            const dataRange = data.getPointData().getScalars().getRange();\n            const firstIsoValue = (dataRange[0] + dataRange[1]) / 3;\n\n            const el = document.querySelector('.isoValue');\n            el.setAttribute('min', dataRange[0]);\n            el.setAttribute('max', dataRange[1]);\n            el.setAttribute('value', firstIsoValue);\n            el.addEventListener('input', updateIsoValue);\n\n            marchingCube.setContourValue(firstIsoValue);\n            renderer.addActor(actor);\n            renderer.getActiveCamera().set({ position: [1, 1, 0], viewUp: [0, 0, -1] });\n            renderer.resetCamera();\n            renderWindow.render();\n        });\n\n        window.fullScreen = fullScreenRenderWindow;\n        window.actor = actor;\n        window.mapper = mapper;\n        window.marchingCube = marchingCube;\n\n    </script>\n\n\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 12:\n描述: Loads 3D polydata, writes it to a string using `vtkXMLPolyDataWriter`, reads it back with `vtkXMLPolyDataReader`, and renders it, allowing download of the generated VTP file.\nVTK.js 模块: ['vtk.IO.Core.vtkHttpDataSetReader', 'vtk.IO.XML.vtkXMLPolyDataReader', 'vtk.IO.XML.vtkXMLPolyDataWriter', 'vtk.IO.XML.vtkXMLWriter', 'vtk.Rendering.Core.vtkActor.newInstance', 'vtk.Rendering.Core.vtkMapper.newInstance', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js XMLImagePolyDataWriter</title>\n    <!-- <link rel=\"stylesheet\" href=\"https://kit.fontawesome.com/419a5ebb56.css\" crossorigin=\"anonymous\"> -->\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n\n    <script type=\"text/javascript\" src=\"https://unpkg.com/@babel/polyfill@7.0.0/dist/polyfill.js\"></script>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const mapper = vtk.Rendering.Core.vtkMapper.newInstance();\n        const actor = vtk.Rendering.Core.vtkActor.newInstance();\n        const fullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const httpDataSetReader = vtk.IO.Core.vtkHttpDataSetReader;\n        const xmlPolyDataWriter = vtk.IO.XML.vtkXMLPolyDataWriter;\n        const xmlPolyDataReader = vtk.IO.XML.vtkXMLPolyDataReader;\n        const xmlWriter = vtk.IO.XML.vtkXMLWriter;\n        // Create instances using namespace paths\n        const fullScreenRenderer = fullScreenRenderWindow.newInstance();\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n        const reader = httpDataSetReader.newInstance({ fetchGzip: true });\n\n        const writer = xmlPolyDataWriter.newInstance();\n        writer.setFormat(xmlWriter.FormatTypes.BINARY);\n        writer.setInputConnection(reader.getOutputPort());\n\n        const writerReader = xmlPolyDataReader.newInstance();\n\n        reader.setUrl(`http://kitware.github.io/vtk-js/data/cow.vtp`, { loadData: true }).then(() => {\n            const fileContents = writer.write(reader.getOutputData());\n\n            // Try to read it back.\n            const textEncoder = new TextEncoder();\n            writerReader.parseAsArrayBuffer(textEncoder.encode(fileContents));\n            renderer.resetCamera();\n            renderWindow.render();\n\n            const blob = new Blob([fileContents], { type: 'text/plain' });\n            const a = window.document.createElement('a');\n            a.href = window.URL.createObjectURL(blob, { type: 'text/plain' });\n            a.download = 'cow.vtp';\n            a.text = 'Download';\n            a.style.position = 'absolute';\n            a.style.left = '50%';\n            a.style.bottom = '10px';\n            document.body.appendChild(a);\n            a.style.background = 'white';\n            a.style.padding = '5px';\n        });\n\n        actor.setMapper(mapper);\n\n        mapper.setInputConnection(writerReader.getOutputPort());\n\n        renderer.addActor(actor);\n\n        window.writer = writer;\n        window.writerReader = writerReader;\n        window.mapper = mapper;\n        window.actor = actor;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n\n\n    </script>\n\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 13:\n描述: Loads and visualizes a 3D polygonal data file (`test_cone.vtp`) using `vtkXMLPolyDataReader` and `vtkMapper`.\n\nVTK.js 模块: ['vtk.IO.XML.vtkXMLPolyDataReader', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js loading poly data, need to start by live server</title>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkXMLPolyDataReader = vtk.IO.XML.vtkXMLPolyDataReader;\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n\n        // crete the render window\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // load the vtp data locally\n        const reader = vtkXMLPolyDataReader.newInstance();\n        // set url and load the data\n        reader.setUrl('../datasets/test_cone.vtp').then(() => {\n            reader.loadData().then(() => {\n                // assign data to actor\n                const mapper = vtkMapper.newInstance();\n                console.log(reader.getOutputData(0))\n                mapper.setInputData(reader.getOutputData(0));\n                const actor = vtkActor.newInstance();\n                actor.setMapper(mapper);\n\n                //  adding actor to render and render the data\n                renderer.addActor(actor);\n                renderer.resetCamera();\n                renderWindow.render();\n            });\n        });\n    </script>\n</body>\n\n</html>\n\n\n--------------------------------------------------------------------------------------------------------------\n示例 14:\n描述: Loads and visualizes 3D elevation data from a CSV, applying a texture image, using `vtkElevationReader` and `vtkMapper`.\n\nVTK.js 模块: ['vtk.IO.Misc.vtkElevationReader.newInstance', 'vtk.Rendering.Core.vtkActor.newInstance', 'vtk.Rendering.Core.vtkMapper.newInstance', 'vtk.Rendering.Core.vtkTexture.newInstance', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js ElevationReader</title>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n\n    <script type=\"text/javascript\" src=\"https://unpkg.com/@babel/polyfill@7.0.0/dist/polyfill.js\"></script>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n\n\n        const imagePath = 'http://kitware.github.io/vtk-js/data/elevation/dem.jpg';\n        // const imagePath = './dem.jpg'\n        const dataPath = 'http://kitware.github.io/vtk-js/data/elevation/dem.csv';\n        const fullScreenRenderer = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n        const reader = vtk.IO.Misc.vtkElevationReader.newInstance({\n            xSpacing: 0.01568,\n            ySpacing: 0.01568,\n            zScaling: 0.06666,\n        });\n        const mapper = vtk.Rendering.Core.vtkMapper.newInstance();\n        const actor = vtk.Rendering.Core.vtkActor.newInstance();\n\n        mapper.setInputConnection(reader.getOutputPort());\n        actor.setMapper(mapper);\n\n        renderer.addActor(actor);\n        renderer.resetCamera();\n        renderWindow.render();\n\n        // Download and apply Texture\n        const img = new Image();\n        img.src = imagePath;\n        //Add crossorigin=\"anonymous\" to avoid CORS errors\n        img.crossOrigin = \"anonymous\"\n        img.onload = function textureLoaded() {\n            const texture = vtk.Rendering.Core.vtkTexture.newInstance();\n            texture.setInterpolate(true);\n            texture.setImage(img);\n            actor.addTexture(texture);\n            renderWindow.render();\n        };\n\n        // Download elevation and render when ready\n        reader.setUrl(dataPath).then(() => {\n            renderer.resetCamera();\n            renderWindow.render();\n        });\n\n        window.reader = reader;\n        window.mapper = mapper;\n        window.actor = actor;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n\n    </script>\n\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 15:\n描述: Displays multiple interactive 3D objects (cone, sphere, cube, cylinder) in separate, independently styled renderers with animation and layout adjustments.\n\nVTK.js 模块: ['vtk.Filters.Sources.vtkConeSource', 'vtk.Filters.Sources.vtkCubeSource', 'vtk.Filters.Sources.vtkCylinderSource', 'vtk.Filters.Sources.vtkSphereSource', 'vtk.Interaction.Style.vtkInteractorStyleTrackballCamera', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkMapper', 'vtk.Rendering.Core.vtkRenderWindow', 'vtk.Rendering.Core.vtkRenderWindowInteractor', 'vtk.Rendering.Core.vtkRenderer', 'vtk.js', 'vtk.js已经通过某种方式被加载到全局变量vtk中']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js Many Renderers</title>\n    <!-- <link rel=\"stylesheet\" href=\"https://kit.fontawesome.com/419a5ebb56.css\" crossorigin=\"anonymous\"> -->\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n\n    <script type=\"text/javascript\" src=\"https://unpkg.com/@babel/polyfill@7.0.0/dist/polyfill.js\"></script>\n\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n\n    <script>\n        // Assuming vtk.js has been loaded into global variable vtk by some means\n        // For example, by including vtk.js in HTML via <script> tag, or through module loader\n\n        // Use vtk namespace to reference classes\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkConeSource = vtk.Filters.Sources.vtkConeSource;\n        const vtkSphereSource = vtk.Filters.Sources.vtkSphereSource;\n        const vtkCubeSource = vtk.Filters.Sources.vtkCubeSource;\n        const vtkCylinderSource = vtk.Filters.Sources.vtkCylinderSource;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkRenderWindow = vtk.Rendering.Core.vtkRenderWindow;\n        const vtkRenderWindowInteractor = vtk.Rendering.Core.vtkRenderWindowInteractor;\n        const vtkRenderer = vtk.Rendering.Core.vtkRenderer;\n        const vtkInteractorStyleTrackballCamera = vtk.Interaction.Style.vtkInteractorStyleTrackballCamera;\n\n        // ----------------------------------------------------------------------------\n        // Meshes\n\n        //  ------------------------------------------------------------\n        // Meshes\n        // ----------------------------------------------------------------------------\n\n        const meshes = [];\n\n        function addMesh(name, source) {\n            const mapper = vtkMapper.newInstance();\n            mapper.setInputData(source.getOutputData());\n            meshes.push({ name, mapper });\n        }\n\n        addMesh('Cone', vtkConeSource.newInstance());\n        addMesh('Sphere', vtkSphereSource.newInstance());\n        addMesh('Cube', vtkCubeSource.newInstance());\n        addMesh('Cylinder', vtkCylinderSource.newInstance());\n\n        // ----------------------------------------------------------------------------\n        // Properties\n        // ----------------------------------------------------------------------------\n\n        const properties = [\n            {\n                name: '- Red',\n                properties: { color: [1, 0.6, 0.6] },\n            },\n            {\n                name: 'Edge - Red',\n                properties: { edgeVisibility: true, color: [1, 0.6, 0.6] },\n            },\n            {\n                name: '- Blue',\n                properties: { color: [0.6, 0.6, 1] },\n            },\n            {\n                name: 'Edge - Green',\n                properties: { edgeVisibility: true, color: [0.6, 1, 0.6] },\n            },\n            {\n                name: '- Green',\n                properties: { color: [0.6, 1, 0.6] },\n            },\n            {\n                name: 'Edge - Blue',\n                properties: { edgeVisibility: true, color: [0.6, 0.6, 1] },\n            },\n        ];\n\n        // ----------------------------------------------------------------------------\n        // Background colors\n        // ----------------------------------------------------------------------------\n\n        const colors = [\n            [0.2, 0.2, 0.2],\n            [0.4, 0.2, 0.3],\n            [0.2, 0.4, 0.3],\n            [0.6, 0.6, 0.6],\n            [0.2, 0.4, 0.4],\n            [0.3, 0.4, 0.2],\n            [0.3, 0.2, 0.4],\n        ];\n\n        // ----------------------------------------------------------------------------\n        // Single RenderWindow in fullscreen\n        // ----------------------------------------------------------------------------\n\n        const RENDERERS = {};\n\n        const renderWindow = vtkRenderWindow.newInstance();\n        const renderWindowView = renderWindow.newAPISpecificView();\n        renderWindow.addView(renderWindowView);\n\n        const rootContainer = document.createElement('div');\n        rootContainer.style.position = 'fixed';\n        rootContainer.style.zIndex = -1;\n        rootContainer.style.left = 0;\n        rootContainer.style.top = 0;\n        rootContainer.style.pointerEvents = 'none';\n        document.body.appendChild(rootContainer);\n\n        renderWindowView.setContainer(rootContainer);\n\n        const interactor = vtkRenderWindowInteractor.newInstance();\n        interactor.setView(renderWindowView);\n        interactor.initialize();\n        interactor.setInteractorStyle(vtkInteractorStyleTrackballCamera.newInstance());\n\n        function updateViewPort(element, renderer) {\n            const { innerHeight, innerWidth } = window;\n            const { x, y, width, height } = element.getBoundingClientRect();\n            const viewport = [\n                x / innerWidth,\n                1 - (y + height) / innerHeight,\n                (x + width) / innerWidth,\n                1 - y / innerHeight,\n            ];\n            renderer.setViewport(...viewport);\n        }\n\n        function recomputeViewports() {\n            const rendererElems = document.querySelectorAll('.renderer');\n            for (let i = 0; i < rendererElems.length; i++) {\n                const elem = rendererElems[i];\n                const { id } = elem;\n                const renderer = RENDERERS[id];\n                updateViewPort(elem, renderer);\n            }\n            renderWindow.render();\n        }\n\n        function resize() {\n            rootContainer.style.width = `${window.innerWidth}px`;\n            renderWindowView.setSize(window.innerWidth, window.innerHeight);\n            recomputeViewports();\n        }\n\n        new ResizeObserver(resize).observe(document.body);\n        document.addEventListener('scroll', recomputeViewports);\n\n        // ----------------------------------------------------------------------------\n        // Renderers\n        // ----------------------------------------------------------------------------\n\n        let meshIndex = 0;\n        let propertyIndex = 0;\n        let bgIndex = 0;\n        let rendererId = 1;\n\n        function applyStyle(element) {\n            element.classList.add('renderer');\n            element.style.width = '200px';\n            element.style.height = '200px';\n            element.style.margin = '20px';\n            element.style.border = 'solid 1px #333';\n            element.style.display = 'inline-block';\n            element.style.boxSizing = 'border';\n            element.style.textAlign = 'center';\n            element.style.color = 'white';\n            return element;\n        }\n\n        let captureCurrentRenderer = false;\n\n        function setCaptureCurrentRenderer(yn) {\n            captureCurrentRenderer = yn;\n            if (yn && interactor.getCurrentRenderer()) {\n                // fix the current renderer to, well, the current renderer\n                interactor.setCurrentRenderer(interactor.getCurrentRenderer());\n            } else {\n                // remove the fixed current renderer\n                interactor.setCurrentRenderer(null);\n            }\n        }\n\n        function bindInteractor(renderer, el) {\n            // only change the interactor's container if needed\n            if (interactor.getContainer() !== el) {\n                if (interactor.getContainer()) {\n                    interactor.unbindEvents();\n                }\n                if (captureCurrentRenderer) {\n                    interactor.setCurrentRenderer(renderer);\n                }\n                if (el) {\n                    interactor.bindEvents(el);\n                }\n            }\n        }\n\n        function addRenderer() {\n            const mesh = meshes[meshIndex];\n            const prop = properties[propertyIndex];\n            const background = colors[bgIndex];\n            meshIndex = (meshIndex + 1) % meshes.length;\n            propertyIndex = (propertyIndex + 1) % properties.length;\n            bgIndex = (bgIndex + 1) % colors.length;\n\n            const container = applyStyle(document.createElement('div'));\n            container.id = rendererId++;\n            document.body.appendChild(container);\n\n            const actor = vtkActor.newInstance();\n            actor.setMapper(mesh.mapper);\n            actor.getProperty().set(prop.properties);\n            actor.getProperty().setDiffuse(0.9);\n            actor.getProperty().setSpecular(0.2);\n            actor.getProperty().setSpecularPower(30);\n            actor.getProperty().setSpecularColor(1.0, 1.0, 1.0);\n            const renderer = vtkRenderer.newInstance({ background });\n            container.innerHTML = `${mesh.name} ${prop.name}`;\n\n            container.addEventListener('pointerenter', () =>\n                bindInteractor(renderer, container)\n            );\n            container.addEventListener('pointerleave', () => bindInteractor(null, null));\n\n            renderer.addActor(actor);\n            renderWindow.addRenderer(renderer);\n            updateViewPort(container, renderer);\n            renderer.resetCamera();\n\n            // Keep track of renderer\n            RENDERERS[container.id] = renderer;\n        }\n\n        // ----------------------------------------------------------------------------\n        // Fill up page\n        // ----------------------------------------------------------------------------\n\n        const checkbox = document.createElement('input');\n        checkbox.type = 'checkbox';\n        checkbox.name = 'singleRendererCapture';\n        const label = document.createElement('label');\n        label.for = checkbox.name;\n        label.innerText = 'Enable single renderer capture';\n\n        checkbox.addEventListener('input', (ev) => {\n            setCaptureCurrentRenderer(ev.target.checked);\n        });\n\n        document.body.appendChild(checkbox);\n        document.body.appendChild(label);\n        document.body.appendChild(document.createElement('br'));\n\n        for (let i = 0; i < 64; i++) {\n            addRenderer();\n        }\n        resize();\n\n        function updateCamera(renderer) {\n            const camera = renderer.getActiveCamera();\n            camera.azimuth(0.5);\n            renderer.resetCameraClippingRange();\n        }\n\n        function animate() {\n            Object.values(RENDERERS).forEach(updateCamera);\n            renderWindow.render();\n            window.requestAnimationFrame(animate);\n        }\n\n        window.requestAnimationFrame(animate);\n\n        // ----------------------------------------------------------------------------\n        // Globals\n        // ----------------------------------------------------------------------------\n\n        window.rw = renderWindow;\n        window.glrw = renderWindowView;\n        window.renderers = RENDERERS;\n\n\n\n    </script>\n\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 16:\n描述: Visualizes a 3D sphere generated by `vtkSphereSource` and rendered with `vtkSphereMapper`.\n\nVTK.js 模块: ['vtk.Filters.Sources.vtkSphereSource', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkSphereMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n</head>\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkSphereSource = vtk.Filters.Sources.vtkSphereSource;\n        const vtkSphereMapper = vtk.Rendering.Core.vtkSphereMapper;\n        //if we just use the vtkMapper, the results are volume rendering results\n        \n        //creating rendering window\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n        const mapper = vtkSphereMapper.newInstance();\n        const actor = vtkActor.newInstance();\n        \n        //creating sphereSource properties\n        //default parameter will be used if we do not configure sphere sources    \n        const sphereSource = vtkSphereSource.newInstance();\n\n        // adding parameters to mapper\n        // actor.setRadius(0.1);\n        mapper.setInputConnection(sphereSource.getOutputPort());\n\n        // adding sphere mapper to render window\n        actor.setMapper(mapper);\n        renderer.addActor(actor);\n        renderer.resetCamera();\n        renderWindow.render();\n    </script>\n</body>\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 17:\n描述: Loads and visualizes a 3D model (VTP format) from a remote URL using `vtkHttpDataSetReader` with gzip support.\n\nVTK.js 模块: ['vtk.IO.Core.DataAccessHelper.HttpDataAccessHelper', 'vtk.IO.Core.vtkHttpDataSetReader', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow', 'vtk.Rendering.OpenGL.Profiles.Geometry']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js IO-HttpDataSetReader</title>\n</head>\n\n<body>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const data_path = 'http://kitware.github.io/vtk-js/data/cow.vtp'\n        const vtkHttpDataSetReader = vtk.IO.Core.vtkHttpDataSetReader;\n        // const vtkGeometry = vtk.Rendering.OpenGL.Profiles.Geometry\n\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkActor = vtk.Rendering.Core.vtkActor\n        const vtkMapper = vtk.Rendering.Core.vtkMapper\n\n        // Force the loading of HttpDataAccessHelper to support gzip decompression\n        const vtkHttpDataAccessHelper = vtk.IO.Core.DataAccessHelper.HttpDataAccessHelper\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance();\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // ----------------------------------------------------------------------------\n        // Example code\n        // ----------------------------------------------------------------------------\n        // Server is not sending the .gz and with the compress header\n        // Need to fetch the true file name and uncompress it locally\n        // ----------------------------------------------------------------------------\n\n        const reader = vtkHttpDataSetReader.newInstance({ fetchGzip: true });\n        reader.setUrl(data_path).then(() => {\n            reader.loadData().then(() => {\n                renderer.resetCamera();\n                renderWindow.render();\n            });\n        });\n\n        const mapper = vtkMapper.newInstance();\n        mapper.setInputConnection(reader.getOutputPort());\n\n        const actor = vtkActor.newInstance();\n        actor.setMapper(mapper);\n\n        renderer.addActor(actor);\n\n        // -----------------------------------------------------------\n        // Make some variables global so that you can inspect and\n        // modify objects in your browser's developer console:\n        // -----------------------------------------------------------\n\n        // global.source = reader;\n        // global.mapper = mapper;\n        // global.actor = actor;\n        // global.renderer = renderer;\n        // global.renderWindow = renderWindow;\n\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 18:\n描述: Displays a synthetic 2D image generated by `vtkRTAnalyticSource` using `vtkImageMapper` and `vtkImageSlice`.\nVTK.js 模块: ['vtk.Common.DataModel.vtkImageData', 'vtk.Filters.Sources.vtkRTAnalyticSource', 'vtk.Rendering.Core.vtkImageMapper', 'vtk.Rendering.Core.vtkImageSlice', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n        const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n        const vtkImageData = vtk.Common.DataModel.vtkImageData;\n\n        // create render window\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        const vtkImgSource = vtk.Filters.Sources.vtkRTAnalyticSource;\n        const imgSource = vtkImgSource.newInstance();\n        imgSource.update();\n        const img = imgSource.getOutputData();\n\n        // set mapper and actor\n        const mapper = vtkImageMapper.newInstance();\n        mapper.setInputData(img);\n\n        const actor = vtkImageSlice.newInstance();\n        actor.setMapper(mapper);\n\n        // adding actor to render\n        renderer.addActor(actor);\n        renderer.resetCamera();\n        renderWindow.render();\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 19:\n描述: Visualizes a 3D vector field using `vtkImageStreamline` for streamlines, `vtkOutlineFilter` for data bounds, and seed points, with interactive resolution controls.\n\nVTK.js 模块: ['vtk.Common.Core.vtkDataArray', 'vtk.Common.DataModel.vtkImageData', 'vtk.Filters.General.vtkImageStreamline', 'vtk.Filters.General.vtkOutlineFilter', 'vtk.Filters.Sources.vtkPlaneSource', 'vtk.Rendering.Core.Property', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkMapper', 'vtk.Rendering.Core.vtkProperty.Representation', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance', 'vtk.macro']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js ImageOutlineFilter</title>\n    <!-- <link rel=\"stylesheet\" href=\"https://kit.fontawesome.com/419a5ebb56.css\" crossorigin=\"anonymous\"> -->\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n\n    <script type=\"text/javascript\" src=\"https://unpkg.com/@babel/polyfill@7.0.0/dist/polyfill.js\"></script>\n\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n\n    <script>\n        const vtkOutlineFilter = vtk.Filters.General.vtkOutlineFilter;\n        const vtkPlaneSource = vtk.Filters.Sources.vtkPlaneSource;\n        const vtkImageStreamline = vtk.Filters.General.vtkImageStreamline;\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        console.log(vtk.Rendering.Core.Property);\n\n        const Representation = vtk.Rendering.Core.vtkProperty.Representation;\n        // const Representation = Constants.representation;\n        const vtkDataArray = vtk.Common.Core.vtkDataArray;\n        const vtkImageData = vtk.Common.DataModel.vtkImageData;\n        const macro = vtk.macro;\n\n        // Load control panel HTML\n        const controlPanel = `<table>\n  <tr>\n    <td>X Resolution</td>\n    <td>\n      <input class='xResolution' type=\"range\" min=\"1\" max=\"25\" step=\"1\" value=\"10\" />\n    </td>\n  </tr>\n  <tr>\n    <td>Y Resolution</td>\n    <td>\n      <input class='yResolution' type=\"range\" min=\"1\" max=\"25\" step=\"1\" value=\"10\" />\n    </td>\n  </tr>\n</table>\n`\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // ----------------------------------------------------------------------------\n        // Example code\n        // ----------------------------------------------------------------------------\n\n        function addRepresentation(name, filter, props = {}) {\n            const mapper = vtkMapper.newInstance();\n            mapper.setInputConnection(filter.getOutputPort());\n\n            const actor = vtkActor.newInstance();\n            actor.setMapper(mapper);\n            actor.getProperty().set(props);\n            renderer.addActor(actor);\n\n            window[`${name}Actor`] = actor;\n            window[`${name}Mapper`] = mapper;\n        }\n\n        // ----------------------------------------------------------------------------\n\n        const vecSource = macro.newInstance((publicAPI, model) => {\n            macro.obj(publicAPI, model); // make it an object\n            macro.algo(publicAPI, model, 0, 1); // mixin algorithm code 1 in, 1 out\n            publicAPI.requestData = (inData, outData) => {\n                // implement requestData\n                if (!outData[0]) {\n                    const id = vtkImageData.newInstance();\n                    id.setSpacing(0.1, 0.1, 0.1);\n                    id.setExtent(0, 9, 0, 9, 0, 9);\n                    const dims = [10, 10, 10];\n\n                    const newArray = new Float32Array(3 * dims[0] * dims[1] * dims[2]);\n\n                    let i = 0;\n                    for (let z = 0; z <= 9; z++) {\n                        for (let y = 0; y <= 9; y++) {\n                            for (let x = 0; x <= 9; x++) {\n                                newArray[i++] = 0.1 * x;\n                                const v = 0.1 * y;\n                                newArray[i++] = v * v;\n                                newArray[i++] = 0;\n                            }\n                        }\n                    }\n\n                    const da = vtkDataArray.newInstance({\n                        numberOfComponents: 3,\n                        values: newArray,\n                    });\n                    da.setName('vectors');\n\n                    const cpd = id.getPointData();\n                    cpd.setVectors(da);\n\n                    // Update output\n                    outData[0] = id;\n                }\n            };\n        })();\n\n        const planeSource = vtkPlaneSource.newInstance();\n        planeSource.setOrigin(0.05, 0.05, 0.05);\n        planeSource.setPoint1(0.05, 0.85, 0.05);\n        planeSource.setPoint2(0.05, 0.05, 0.85);\n\n        const sline = vtkImageStreamline.newInstance();\n        sline.setIntegrationStep(0.01);\n        sline.setInputConnection(vecSource.getOutputPort());\n        sline.setInputConnection(planeSource.getOutputPort(), 1);\n\n        const outlineFilter = vtkOutlineFilter.newInstance();\n        outlineFilter.setInputConnection(vecSource.getOutputPort());\n\n        addRepresentation('streamLine', sline, {\n            diffuseColor: [0, 1, 1],\n            lineWidth: 5,\n        });\n        addRepresentation('outline', outlineFilter, {\n            diffuseColor: [1, 0, 0],\n            lineWidth: 3,\n        });\n        addRepresentation('seed', planeSource, {\n            representation: Representation.POINTS,\n            pointSize: 10,\n        });\n\n        // -----------------------------------------------------------\n\n        renderer.resetCamera();\n        renderWindow.render();\n\n        // ----------------------------------------------------------------------------\n        // UI control handling\n        // ----------------------------------------------------------------------------\n\n        fullScreenRenderer.addController(controlPanel);\n\n        ['xResolution', 'yResolution'].forEach((propertyName) => {\n            document.querySelector(`.${propertyName}`).addEventListener('input', (e) => {\n                const value = Number(e.target.value);\n                planeSource.set({ [propertyName]: value });\n                renderWindow.render();\n            });\n        });\n\n        // -----------------------------------------------------------\n        // Make some variables global so that you can inspect and\n        // modify objects in your browser's developer console:\n        // -----------------------------------------------------------\n\n        window.planeSource = planeSource;\n        window.sline = sline;\n        window.outlineFilter = outlineFilter;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n\n\n    </script>\n\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 20:\n描述: Creates a 3D visualization by sampling an implicit boolean function and extracting contour lines with `vtkImageMarchingSquares`.\n\nVTK.js 模块: ['vtk.Common.DataModel.vtkImplicitBoolean', 'vtk.Common.DataModel.vtkPlane', 'vtk.Filters.General.vtkImageMarchingSquares', 'vtk.Filters.Sources.vtkSphereSource', 'vtk.Imaging.Hybrid.vtkSampleFunction', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"UTF-8\">\n</head>\n\n<body>\n  <div id=\"renderer\"></div>\n  <script src=\"https://unpkg.com/vtk.js\"></script>\n  <script>\n    const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n    const vtkActor = vtk.Rendering.Core.vtkActor;\n    const vtkSphereSource = vtk.Filters.Sources.vtkSphereSource;\n    const vtkMapper = vtk.Rendering.Core.vtkMapper;\n    const vtkImageMarchingSquares = vtk.Filters.General.vtkImageMarchingSquares;\n\n    const vtkPlane = vtk.Common.DataModel.vtkPlane;\n    const vtkImplicitBoolean = vtk.Common.DataModel.vtkImplicitBoolean;\n    const vtkSampleFunction = vtk.Imaging.Hybrid.vtkSampleFunction;\n\n    //const sphere = vtkSphereSource.newInstance({ center: [-2.5, 0.0, 0.0], radius: 0.5 });\n\n    const plane = vtkPlane.newInstance({ origin: [0, 0, 0], normal: [0, 1, 0] });\n\n    const { Operation } = vtkImplicitBoolean;\n\n    const impBool = vtkImplicitBoolean.newInstance({\n      operation: Operation.UNION,\n      functions: [plane],\n    });\n\n    const sample = vtkSampleFunction.newInstance({\n      implicitFunction: impBool,\n      sampleDimensions: [5, 3, 3],\n      modelBounds: [-5.0, 5.0, -1.0, 1.0, -1.0, 1.0],\n    });\n\n    ms = vtkImageMarchingSquares.newInstance();\n    //connect the sphere filter with the marchingsqures\n    ms.setInputConnection(sample.getOutputPort())\n\n    const mapper = vtkMapper.newInstance();\n    mapper.setInputConnection(ms.getOutputPort());\n\n    const actor = vtkActor.newInstance();\n    actor.setMapper(mapper);\n\n\n    // adding actor into the scene\n    const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n    const renderer = fullScreenRenderer.getRenderer();\n    const renderWindow = fullScreenRenderer.getRenderWindow();\n\n    // Add actor to renderer\n    renderer.addActor(actor);\n\n    // Reset camera and start rendering\n    renderer.resetCamera();\n    renderWindow.render();\n\n  </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 21:\n描述: Loads a 3D volume and displays three orthogonal image slices (I, J, K planes) at the 30th layer using `vtkHttpDataSetReader` and `vtkImageSlice`.\n\nVTK.js 模块: ['vtk.IO.Core.vtkHttpDataSetReader', 'vtk.Rendering.Core.vtkImageMapper', 'vtk.Rendering.Core.vtkImageSlice', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkHttpDataSetReader = vtk.IO.Core.vtkHttpDataSetReader;\n        const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n        const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n        const dataPath = 'http://kitware.github.io/vtk-js/data/volume/headsq.vti';\n\n        const fullScreenRenderWindow = vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n        const imageActorI = vtkImageSlice.newInstance();\n        const imageActorJ = vtkImageSlice.newInstance();\n        const imageActorK = vtkImageSlice.newInstance();\n\n        renderer.addActor(imageActorK);\n        renderer.addActor(imageActorJ);\n        renderer.addActor(imageActorI);\n\n        const reader = vtkHttpDataSetReader.newInstance({\n            fetchGzip: true,\n        });\n        reader\n            .setUrl(dataPath, { loadData: true })\n            .then(() => {\n                const data = reader.getOutputData();\n                const dataRange = data.getPointData().getScalars().getRange();\n                const extent = data.getExtent();\n\n                const imageMapperK = vtkImageMapper.newInstance();\n                imageMapperK.setInputData(data);\n                imageMapperK.setKSlice(30);\n                imageActorK.setMapper(imageMapperK);\n\n                const imageMapperJ = vtkImageMapper.newInstance();\n                imageMapperJ.setInputData(data);\n                imageMapperJ.setJSlice(30);\n                imageActorJ.setMapper(imageMapperJ);\n\n                const imageMapperI = vtkImageMapper.newInstance();\n                imageMapperI.setInputData(data);\n                imageMapperI.setISlice(30);\n                imageActorI.setMapper(imageMapperI);\n\n                renderer.resetCamera();\n                renderWindow.render();\n            });\n    </script>\n</body>\n\n</html>\n\n            ",
    "status": "success"
  }
]