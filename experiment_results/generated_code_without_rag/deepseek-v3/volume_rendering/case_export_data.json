{
  "path": "",
  "name": "",
  "prompt": "Generate an HTML page using vtk.js to visualize the Redsea dataset with volume rendering.\n\nLoad the dataset from: http://127.0.0.1:5000/dataset/redsea.vti\n\nCompute velocity magnitude from the \"velocity\" array and set it as the active scalar\n\nApply volume rendering using a blue → white → red color map spanning the scalar range (min to max)\n\nApply a piecewise opacity function to control transparency across scalar values\n\nSet shading, ambient, diffuse, and specular properties for realistic volume appearance\n\nAdjust the camera to look along +Z and center on the dataset",
  "ground_truth": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n<meta charset=\"UTF-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n<title>redsea Example</title>\n<script src=\"https://unpkg.com/vtk.js\"></script>\n</head>\n\n<body>\n<div id=\"renderer\"></div>\n<!-- <script src=\"https://unpkg.com/vtk.js\"></script> -->\n<script>\nconst vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\nconst vtkVolume = vtk.Rendering.Core.vtkVolume;\nconst vtkVolumeMapper = vtk.Rendering.Core.vtkVolumeMapper;\n\nconst vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\nconst vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\nconst vtkXMLImageDataReader = vtk.IO.XML.vtkXMLImageDataReader;\n\n//init the render window\nconst fullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\nbackground: [1,1,1],\n});\nconst renderWindow = fullScreenRenderWindow.getRenderWindow();\nconst renderer = fullScreenRenderWindow.getRenderer();\n\n\n// Load dataset\nconst reader = vtkXMLImageDataReader.newInstance();\n\n\n// set url and load the data\nreader.setUrl('http://127.0.0.1:5000/dataset/redsea.vti').then(() => {\nreader.loadData().then(() => {\n//prepare dataset\nconst imageData = reader.getOutputData(0);\n//set active scalar\nconst velocityArray = imageData.getPointData().getArrayByName('velocity');\nconst numPoints = imageData.getNumberOfPoints();\nconst magnitudeData = new Float64Array(numPoints);\nfor (let i = 0; i < numPoints; i++) {\nconst vx = velocityArray.getData()[3 * i + 0];\nconst vy = velocityArray.getData()[3 * i + 1];\nconst vz = velocityArray.getData()[3 * i + 2];\nmagnitudeData[i] = Math.sqrt(vx * vx + vy * vy + vz * vz);\n}\n\nconst vtkDataArray = vtk.Common.Core.vtkDataArray;\nconst magnitudeVtkArray = vtkDataArray.newInstance({\nnumberOfComponents: 1,\nvalues: magnitudeData,\nname: 'velocityMagnitude',\n});\nimageData.getPointData().addArray(magnitudeVtkArray);\nconsole.log(imageData.toJSON())\n\n\nimageData.getPointData().setActiveScalars('velocityMagnitude');\nimageData.setSpacing(0.05, 0.05, 0.1);\n\nconsole.log('New bounds:', imageData.getBounds());\nconsole.log('Dimensions:', imageData.getDimensions());\nconsole.log('Spacing:', imageData.getSpacing());\n\nconst newRange = magnitudeVtkArray.getRange();\nconsole.log('velocityMagnitude range:', newRange);\nconst [minV, maxV] = newRange;\n\n\nconsole.log(imageData.getPointData().getScalars().getName());\n\n\n//create the mapper and set its property\nconst mapper = vtkVolumeMapper.newInstance();\n//console.log(data.toJSON())\nmapper.setMaximumSamplesPerRay(4000); // or even higher, up to your hardware limits\nmapper.setInputData(imageData);\nmapper.setSampleDistance(0.1);\n\n//create actor and set its properties, including gradient opacity, scalar opacity, shade, ambient, diffuse, specular etc.\nconst actor = vtkVolume.newInstance();\n\n// Move LocalAmbientOcclusion properties to actor's property\nactor.getProperty().setLocalAmbientOcclusion(0);\nactor.getProperty().setLAOKernelSize(10);\nactor.getProperty().setLAOKernelRadius(5);\n// Move ComputeNormalFromOpacity to actor's property\nactor.getProperty().setComputeNormalFromOpacity(true);\n\nconst cfun = vtkColorTransferFunction.newInstance();\ncfun.addRGBPoint(minV, 0.0, 0.0, 1.0);\ncfun.addRGBPoint((minV + maxV) * 0.5, 1.0, 1.0, 1.0);\ncfun.addRGBPoint(maxV, 1.0, 0.0, 0.0);\nactor.getProperty().setRGBTransferFunction(0, cfun);\n\nconst ofun = vtkPiecewiseFunction.newInstance();\n\nofun.addPoint(minV, 0.0);\nofun.addPoint(minV + 0.1 * (maxV - minV), 0.05);\nofun.addPoint(minV + 0.5 * (maxV - minV), 0.2);\nofun.addPoint(maxV, 1.0);\n\nactor.getProperty().setScalarOpacity(0, ofun);\nactor.getProperty().setInterpolationTypeToLinear();\n// this variable makes results lighter\nactor.getProperty().setScalarOpacityUnitDistance(0, 0.1);\nactor.getProperty().setShade(false);\nactor.getProperty().setAmbient(0.3);\nactor.getProperty().setDiffuse(1);\nactor.getProperty().setSpecular(1);\n\n//assign mapper to actor and assign mapper to render\nactor.setMapper(mapper);\nrenderer.addVolume(actor);\n\nconst bounds = imageData.getBounds();\nconst center = [\n(bounds[0] + bounds[1]) / 2,\n(bounds[2] + bounds[3]) / 2,\n(bounds[4] + bounds[5]) / 2,\n];\n\nconst camera = renderer.getActiveCamera();\ncamera.setFocalPoint(...center);\ncamera.setPosition(center[0], center[1], center[2] + 10); // Look along +Z\ncamera.setViewUp(0, 1, 0);\nrenderer.resetCameraClippingRange();\nrenderWindow.render();\nrenderer.resetCamera();\nrenderWindow.render();\n});\n});\n\n</script>\n</body>\n\n</html>",
  "generated_code": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>VTK.js Redsea Volume Rendering</title>\n    <script src=\"https://unpkg.com/vtk.js@34.10.0/vtk.js\"></script>\n</head>\n<body>\n    <div id=\"container\"></div>\n    <script>\n        // Load required VTK modules\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkXMLImageDataReader = vtk.IO.XML.vtkXMLImageDataReader;\n        const vtkHttpDataSetReader = vtk.IO.Core.vtkHttpDataSetReader;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n        const vtkVolume = vtk.Rendering.Core.vtkVolume;\n        const vtkVolumeMapper = vtk.Rendering.Core.vtkVolumeMapper;\n        \n        // Create render window and get references to renderer and render window\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n            rootContainer: document.getElementById('container')\n        });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // Create reader for VTI file\n        const reader = vtkHttpDataSetReader.newInstance({ fetchGzip: true });\n        \n        // Set up velocity magnitude calculator\n        const calc = vtkCalculator.newInstance();\n        calc.setFormula({\n            getArrays: inputData => ({\n                input: [\n                    { location: 'PointData', name: 'velocity', dataType: 'Float32Array' }\n                ],\n                output: [\n                    { location: 'PointData', name: 'velMag', dataType: 'Float32Array' }\n                ],\n            }),\n            evaluate: (arraysIn, arraysOut) => {\n                const [velocity] = arraysIn.map(d => d.getData());\n                const [velMag] = arraysOut.map(d => d.getData());\n                \n                for (let i = 0; i < velocity.length / 3; i++) {\n                    const vx = velocity[i * 3];\n                    const vy = velocity[i * 3 + 1];\n                    const vz = velocity[i * 3 + 2];\n                    velMag[i] = Math.sqrt(vx * vx + vy * vy + vz * vz);\n                }\n            },\n        });\n        \n        // Create volume mapper and volume actor\n        const mapper = vtkVolumeMapper.newInstance();\n        const actor = vtkVolume.newInstance();\n        \n        // Set up the volume rendering pipeline\n        calc.setInputConnection(reader.getOutputPort());\n        mapper.setInputConnection(calc.getOutputPort());\n        actor.setMapper(mapper);\n        \n        // Create color transfer function (blue-white-red)\n        const cfun = vtkColorTransferFunction.newInstance();\n        cfun.addRGBPoint(0, 0, 0, 1);   // Blue at min\n        cfun.addRGBPoint(0.5, 1, 1, 1); // White at middle\n        cfun.addRGBPoint(1, 1, 0, 0);   // Red at max\n        \n        // Create piecewise opacity function\n        const ofun = vtkPiecewiseFunction.newInstance();\n        ofun.addPoint(0, 0.0);\n        ofun.addPoint(0.1, 0.1);\n        ofun.addPoint(0.5, 0.3);\n        ofun.addPoint(1, 0.5);\n        \n        // Configure volume properties\n        actor.getProperty().setRGBTransferFunction(0, cfun);\n        actor.getProperty().setScalarOpacity(0, ofun);\n        actor.getProperty().setInterpolationTypeToLinear();\n        \n        // Set lighting properties for realistic appearance\n        actor.getProperty().setShade(true);\n        actor.getProperty().setAmbient(0.3);\n        actor.getProperty().setDiffuse(0.6);\n        actor.getProperty().setSpecular(0.5);\n        actor.getProperty().setSpecularPower(40);\n        \n        // Add actor to renderer\n        renderer.addVolume(actor);\n        \n        // Load the data file and set up the visualization\n        reader.setUrl('http://127.0.0.1:5000/dataset/redsea.vti', { loadData: true })\n            .then(() => {\n                // After loading, set velMag as active scalar\n                const output = calc.getOutputData();\n                output.getPointData().setActiveScalars('velMag');\n                \n                // Get scalar range for color/opacity mapping\n                const range = output.getPointData().getScalars().getRange();\n                \n                // Update transfer functions to use actual data range\n                cfun.removeAllPoints();\n                cfun.addRGBPoint(range[0], 0, 0, 1);    // Blue at min\n                cfun.addRGBPoint((range[0] + range[1])/2, 1, 1, 1);  // White at mid\n                cfun.addRGBPoint(range[1], 1, 0, 0);    // Red at max\n                \n                ofun.removeAllPoints();\n                ofun.addPoint(range[0], 0.0);\n                ofun.addPoint(range[0] * 1.1, 0.1);\n                ofun.addPoint((range[0] + range[1])/2, 0.3);\n                ofun.addPoint(range[1], 0.5);\n                \n                // Set camera to look along +Z and center on dataset\n                const bounds = output.getBounds();\n                const center = [\n                    (bounds[0] + bounds[1])/2,\n                    (bounds[2] + bounds[3])/2,\n                    (bounds[4] + bounds[5])/2\n                ];\n                \n                const camera = renderer.getActiveCamera();\n                camera.setFocalPoint(center);\n                camera.setPosition(center[0], center[1], center[2] + 100);\n                camera.setViewUp(0, 1, 0);\n                \n                renderer.resetCamera();\n                renderWindow.render();\n            });\n    </script>\n</body>\n</html>",
  "generator_prompt": "You are a VTK.js visualization expert. Based on the user's requirements and the provided VTK.js examples, generate complete and functional HTML code that meets all specified requirements.\n    Please follow these guidelines:\n    1. Generate complete HTML code that can run independently\n    2. Use the VTK.js library from CDN (https://unpkg.com/vtk.js@34.10.0/vtk.js)\n    3. Implement ALL requirements specified in the user question\n    4. Add detailed comments explaining how each requirement is implemented\n    5. Ensure the visualization is displayed properly without UI controls unless specifically requested\n    6. Use appropriate VTK.js modules and methods as shown in the examples\n    7. Pay special attention to data loading paths and visualization parameters\n    8. The data format for generating code is vti format, please use the correct IO module,The system reading method does not support HttpDatasetReader. Please use another appropriate module, such as vtkXMLImageDataReader\n    Important: Highlight in comments how each specific user requirement is addressed in the code.\n",
  "final_prompt": "\nGenerate only the HTML code without any additional text.\nUser Requirements:\nGenerate an HTML page using vtk.js to visualize the Redsea dataset with volume rendering.\n\nLoad the dataset from: http://127.0.0.1:5000/dataset/redsea.vti\n\nCompute velocity magnitude from the \"velocity\" array and set it as the active scalar\n\nApply volume rendering using a blue → white → red color map spanning the scalar range (min to max)\n\nApply a piecewise opacity function to control transparency across scalar values\n\nSet shading, ambient, diffuse, and specular properties for realistic volume appearance\n\nAdjust the camera to look along +Z and center on the dataset\n\nRelevant VTK.js Examples:\n\n--------------------------------------------------------------------------------Example 1 (Score: 5.00, Matches: vtkHttpDataSetReader):\nDescription: Loads a 3D volume and displays three orthogonal image slices (I, J, K planes) at the 30th layer using `vtkHttpDataSetReader` and `vtkImageSlice`.\n\nModules: vtk.IO.Core.vtkHttpDataSetReader, vtk.Rendering.Core.vtkImageMapper, vtk.Rendering.Core.vtkImageSlice, vtk.Rendering.Misc.vtkFullScreenRenderWindow\nCode:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkHttpDataSetReader = vtk.IO.Core.vtkHttpDataSetReader;\n        const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n        const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n        const dataPath = 'http://kitware.github.io/vtk-js/data/volume/headsq.vti';\n\n        const fullScreenRenderWindow = vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n        const imageActorI = vtkImageSlice.newInstance();\n        const imageActorJ = vtkImageSlice.newInstance();\n        const imageActorK = vtkImageSlice.newInstance();\n\n        renderer.addActor(imageActorK);\n        renderer.addActor(imageActorJ);\n        renderer.addActor(imageActorI);\n\n        const reader = vtkHttpDataSetReader.newInstance({\n            fetchGzip: true,\n        });\n        reader\n            .setUrl(dataPath, { loadData: true })\n            .then(() => {\n                const data = reader.getOutputData();\n                const dataRange = data.getPointData().getScalars().getRange();\n                const extent = data.getExtent();\n\n                const imageMapperK = vtkImageMapper.newInstance();\n                imageMapperK.setInputData(data);\n                imageMapperK.setKSlice(30);\n                imageActorK.setMapper(imageMapperK);\n\n                const imageMapperJ = vtkImageMapper.newInstance();\n                imageMapperJ.setInputData(data);\n                imageMapperJ.setJSlice(30);\n                imageActorJ.setMapper(imageMapperJ);\n\n                const imageMapperI = vtkImageMapper.newInstance();\n                imageMapperI.setInputData(data);\n                imageMapperI.setISlice(30);\n                imageActorI.setMapper(imageMapperI);\n\n                renderer.resetCamera();\n                renderWindow.render();\n            });\n    </script>\n</body>\n\n</html>\n\nExample 2 (Score: 5.00, Matches: vtkHttpDataSetReader):\nDescription: Loads and visualizes a 3D model (VTP format) from a remote URL using `vtkHttpDataSetReader` with gzip support.\n\nModules: vtk.IO.Core.DataAccessHelper.HttpDataAccessHelper, vtk.IO.Core.vtkHttpDataSetReader, vtk.Rendering.Core.vtkActor, vtk.Rendering.Core.vtkMapper, vtk.Rendering.Misc.vtkFullScreenRenderWindow, vtk.Rendering.OpenGL.Profiles.Geometry\nCode:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js IO-HttpDataSetReader</title>\n</head>\n\n<body>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const data_path = 'http://kitware.github.io/vtk-js/data/cow.vtp'\n        const vtkHttpDataSetReader = vtk.IO.Core.vtkHttpDataSetReader;\n        // const vtkGeometry = vtk.Rendering.OpenGL.Profiles.Geometry\n\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkActor = vtk.Rendering.Core.vtkActor\n        const vtkMapper = vtk.Rendering.Core.vtkMapper\n\n        // Force the loading of HttpDataAccessHelper to support gzip decompression\n        const vtkHttpDataAccessHelper = vtk.IO.Core.DataAccessHelper.HttpDataAccessHelper\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance();\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // ----------------------------------------------------------------------------\n        // Example code\n        // ----------------------------------------------------------------------------\n        // Server is not sending the .gz and with the compress header\n        // Need to fetch the true file name and uncompress it locally\n        // ----------------------------------------------------------------------------\n\n        const reader = vtkHttpDataSetReader.newInstance({ fetchGzip: true });\n        reader.setUrl(data_path).then(() => {\n            reader.loadData().then(() => {\n                renderer.resetCamera();\n                renderWindow.render();\n            });\n        });\n\n        const mapper = vtkMapper.newInstance();\n        mapper.setInputConnection(reader.getOutputPort());\n\n        const actor = vtkActor.newInstance();\n        actor.setMapper(mapper);\n\n        renderer.addActor(actor);\n\n        // -----------------------------------------------------------\n        // Make some variables global so that you can inspect and\n        // modify objects in your browser's developer console:\n        // -----------------------------------------------------------\n\n        // global.source = reader;\n        // global.mapper = mapper;\n        // global.actor = actor;\n        // global.renderer = renderer;\n        // global.renderWindow = renderWindow;\n\n    </script>\n</body>\n\n</html>\n\nExample 3 (Score: 5.00, Matches: vtkHttpDataSetReader):\nDescription: Loads 3D polydata, writes it to a string using `vtkXMLPolyDataWriter`, reads it back with `vtkXMLPolyDataReader`, and renders it, allowing download of the generated VTP file.\nModules: vtk.IO.Core.vtkHttpDataSetReader, vtk.IO.XML.vtkXMLPolyDataReader, vtk.IO.XML.vtkXMLPolyDataWriter, vtk.IO.XML.vtkXMLWriter, vtk.Rendering.Core.vtkActor.newInstance, vtk.Rendering.Core.vtkMapper.newInstance, vtk.Rendering.Misc.vtkFullScreenRenderWindow\nCode:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js XMLImagePolyDataWriter</title>\n    <!-- <link rel=\"stylesheet\" href=\"https://kit.fontawesome.com/419a5ebb56.css\" crossorigin=\"anonymous\"> -->\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n\n    <script type=\"text/javascript\" src=\"https://unpkg.com/@babel/polyfill@7.0.0/dist/polyfill.js\"></script>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const mapper = vtk.Rendering.Core.vtkMapper.newInstance();\n        const actor = vtk.Rendering.Core.vtkActor.newInstance();\n        const fullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const httpDataSetReader = vtk.IO.Core.vtkHttpDataSetReader;\n        const xmlPolyDataWriter = vtk.IO.XML.vtkXMLPolyDataWriter;\n        const xmlPolyDataReader = vtk.IO.XML.vtkXMLPolyDataReader;\n        const xmlWriter = vtk.IO.XML.vtkXMLWriter;\n        // Create instances using namespace paths\n        const fullScreenRenderer = fullScreenRenderWindow.newInstance();\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n        const reader = httpDataSetReader.newInstance({ fetchGzip: true });\n\n        const writer = xmlPolyDataWriter.newInstance();\n        writer.setFormat(xmlWriter.FormatTypes.BINARY);\n        writer.setInputConnection(reader.getOutputPort());\n\n        const writerReader = xmlPolyDataReader.newInstance();\n\n        reader.setUrl(`http://kitware.github.io/vtk-js/data/cow.vtp`, { loadData: true }).then(() => {\n            const fileContents = writer.write(reader.getOutputData());\n\n            // Try to read it back.\n            const textEncoder = new TextEncoder();\n            writerReader.parseAsArrayBuffer(textEncoder.encode(fileContents));\n            renderer.resetCamera();\n            renderWindow.render();\n\n            const blob = new Blob([fileContents], { type: 'text/plain' });\n            const a = window.document.createElement('a');\n            a.href = window.URL.createObjectURL(blob, { type: 'text/plain' });\n            a.download = 'cow.vtp';\n            a.text = 'Download';\n            a.style.position = 'absolute';\n            a.style.left = '50%';\n            a.style.bottom = '10px';\n            document.body.appendChild(a);\n            a.style.background = 'white';\n            a.style.padding = '5px';\n        });\n\n        actor.setMapper(mapper);\n\n        mapper.setInputConnection(writerReader.getOutputPort());\n\n        renderer.addActor(actor);\n\n        window.writer = writer;\n        window.writerReader = writerReader;\n        window.mapper = mapper;\n        window.actor = actor;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n\n\n    </script>\n\n</body>\n\n</html>\n\nExample 4 (Score: 5.00, Matches: vtkHttpDataSetReader):\nDescription: Loads a 3D volume (`headsq.vti`) and displays three orthogonal slices (I, J, K) with interactive controls for position and color properties.\n\nModules: vtk.IO.Core.vtkHttpDataSetReader, vtk.Rendering.Core.vtkImageMapper, vtk.Rendering.Core.vtkImageSlice, vtk.Rendering.Misc.vtkFullScreenRenderWindow\nCode:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js Isosurface Visualization</title>\n    <link rel=\"stylesheet\" href=\"https://kit.fontawesome.com/419a5ebb56.css\" crossorigin=\"anonymous\">\n    <style>\n        #renderer {\n            width: 100%;\n            height: 600px;\n            background-color: #333;\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <!-- Set vtk.js favicon -->\n    <script type=\"module\" src=\"https://unpkg.com/vtk.js/favicon.js\"></script>\n\n    <!-- Load WebGL and WebGPU rendering modules -->\n    <script type=\"module\" src=\"https://unpkg.com/vtk.js/Sources/Rendering/Profiles/Volume.js\"></script>\n\n    <!-- Force DataAccessHelper to access various data sources -->\n    <script type=\"module\"\n        src=\"https://unpkg.com/vtk.js/Sources/IO/Core/DataAccessHelper/HtmlDataAccessHelper.js\"></script>\n    <script type=\"module\"\n        src=\"https://unpkg.com/vtk.js/Sources/IO/Core/DataAccessHelper/HttpDataAccessHelper.js\"></script>\n    <script type=\"module\"\n        src=\"https://unpkg.com/vtk.js/Sources/IO/Core/DataAccessHelper/JSZipDataAccessHelper.js\"></script>\n\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkHttpDataSetReader = vtk.IO.Core.vtkHttpDataSetReader;\n        const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n        const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n        const path = 'http://kitware.github.io/vtk-js/data'\n\n        // Reference HTML template\n        const controlPanel = `<table>\n    <tr>\n        <td>Slice I</td>\n        <td>\n            <input class='sliceI' type=\"range\" min=\"0\" max=\"2.0\" step=\"1\" value=\"1\" />\n        </td>\n    </tr>\n    <tr>\n        <td>Slice J</td>\n        <td>\n            <input class='sliceJ' type=\"range\" min=\"0\" max=\"2.0\" step=\"1\" value=\"1\" />\n        </td>\n    </tr>\n    <tr>\n        <td>Slice K</td>\n        <td>\n            <input class='sliceK' type=\"range\" min=\"0\" max=\"100\" step=\"1\" value=\"1\" />\n        </td>\n    </tr>\n    <tr>\n        <td>Color level</td>\n        <td>\n            <input class='colorLevel' type=\"range\" min=\"-3926\" max=\"3926\" step=\"1\" value=\"1\" />\n        </td>\n    </tr>\n    <tr>\n        <td>ColorWindow</td>\n        <td>\n            <input class='colorWindow' type=\"range\" min=\"0\" max=\"3926\" step=\"1\" value=\"1\" />\n        </td>\n    </tr>\n</table>\n`;\n        const fullScreenRenderWindow = vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n        fullScreenRenderWindow.addController(controlPanel);\n\n        const imageActorI = vtkImageSlice.newInstance();\n        const imageActorJ = vtkImageSlice.newInstance();\n        const imageActorK = vtkImageSlice.newInstance();\n\n        renderer.addActor(imageActorK);\n        renderer.addActor(imageActorJ);\n        renderer.addActor(imageActorI);\n\n        function updateColorLevel(e) {\n            const colorLevel = Number(\n                (e ? e.target : document.querySelector('.colorLevel')).value\n            );\n            imageActorI.getProperty().setColorLevel(colorLevel);\n            imageActorJ.getProperty().setColorLevel(colorLevel);\n            imageActorK.getProperty().setColorLevel(colorLevel);\n            renderWindow.render();\n        }\n\n        function updateColorWindow(e) {\n            const colorLevel = Number(\n                (e ? e.target : document.querySelector('.colorWindow')).value\n            );\n            imageActorI.getProperty().setColorWindow(colorLevel);\n            imageActorJ.getProperty().setColorWindow(colorLevel);\n            imageActorK.getProperty().setColorWindow(colorLevel);\n            renderWindow.render();\n        }\n\n        const reader = vtkHttpDataSetReader.newInstance({\n            fetchGzip: true,\n        });\n        reader\n            .setUrl(`${path}/data/volume/headsq.vti`, { loadData: true })\n            .then(() => {\n                const data = reader.getOutputData();\n                const dataRange = data.getPointData().getScalars().getRange();\n                const extent = data.getExtent();\n\n                const imageMapperK = vtkImageMapper.newInstance();\n                imageMapperK.setInputData(data);\n                imageMapperK.setKSlice(30);\n                imageActorK.setMapper(imageMapperK);\n\n                const imageMapperJ = vtkImageMapper.newInstance();\n                imageMapperJ.setInputData(data);\n                imageMapperJ.setJSlice(30);\n                imageActorJ.setMapper(imageMapperJ);\n\n                const imageMapperI = vtkImageMapper.newInstance();\n                imageMapperI.setInputData(data);\n                imageMapperI.setISlice(30);\n                imageActorI.setMapper(imageMapperI);\n\n                renderer.resetCamera();\n                renderer.resetCameraClippingRange();\n                renderWindow.render();\n\n                ['.sliceI', '.sliceJ', '.sliceK'].forEach((selector, idx) => {\n                    const el = document.querySelector(selector);\n                    el.setAttribute('min', extent[idx * 2 + 0]);\n                    el.setAttribute('max', extent[idx * 2 + 1]);\n                    el.setAttribute('value', 30);\n                });\n\n                ['.colorLevel', '.colorWindow'].forEach((selector) => {\n                    document.querySelector(selector).setAttribute('max', dataRange[1]);\n                    document.querySelector(selector).setAttribute('value', dataRange[1]);\n                });\n                document\n                    .querySelector('.colorLevel')\n                    .setAttribute('value', (dataRange[0] + dataRange[1]) / 2);\n                updateColorLevel();\n                updateColorWindow();\n            });\n\n        document.querySelector('.sliceI').addEventListener('input', (e) => {\n            imageActorI.getMapper().setISlice(Number(e.target.value));\n            renderWindow.render();\n        });\n\n        document.querySelector('.sliceJ').addEventListener('input', (e) => {\n            imageActorJ.getMapper().setJSlice(Number(e.target.value));\n            renderWindow.render();\n        });\n\n        document.querySelector('.sliceK').addEventListener('input', (e) => {\n            imageActorK.getMapper().setKSlice(Number(e.target.value));\n            renderWindow.render();\n        });\n\n        document\n            .querySelector('.colorLevel')\n            .addEventListener('input', updateColorLevel);\n        document\n            .querySelector('.colorWindow')\n            .addEventListener('input', updateColorWindow);\n\n        window.fullScreen = fullScreenRenderWindow;\n        window.imageActorI = imageActorI;\n        window.imageActorJ = imageActorJ;\n        window.imageActorK = imageActorK;\n\n    </script>\n</body>\n\n</html>\n\nExample 5 (Score: 5.00, Matches: vtkCalculator):\nDescription: This code visualizes a 3D plane colored by a mathematical function, using `vtkCalculator` for scalar values and `vtkMapper` for coloring.\n\nModules: vtk.Common.Core.vtkPoints, vtk.Common.DataModel.vtkDataSet.FieldDataTypes, vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes, vtk.Common.DataModel.vtkPolyData, vtk.Filters.General.vtkCalculator, vtk.Filters.Sources.vtkPlaneSource, vtk.Rendering.Core.vtkActor, vtk.Rendering.Core.vtkMapper, vtk.Rendering.Misc.vtkFullScreenRenderWindow\nCode:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        // using vtk namespace\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPlaneSource = vtk.Filters.Sources.vtkPlaneSource;\n        const vtkPolyData = vtk.Common.DataModel.vtkPolyData;\n        const vtkPoints = vtk.Common.Core.vtkPoints;\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldDataTypes;\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // setting vtkCalculator and set formula\n\n        const simpleFilter = vtkCalculator.newInstance();\n\n        simpleFilter.setFormulaSimple(\n            FieldDataTypes.POINT, // Generate an output array defined over points.\n            [], // We don't request any point-data arrays because point coordinates are made available by default.\n            'outputArray', // Name the output array \n            (x) => (x[0] - 0.5) * (x[0] - 0.5) + (x[1] - 0.5) * (x[1] - 0.5) + 0.125\n        ); \n\n        //using plane source to generate a poly data which can be rendered by vtkActor\n        const planeSource = vtkPlaneSource.newInstance({\n            xResolution: 25,\n            yResolution: 25,\n        });\n\n        const sourceData = planeSource.getOutputData();\n\n        simpleFilter.setInputData(sourceData);\n        const planeActor = vtkActor.newInstance();\n        const planeMapper = vtkMapper.newInstance();\n        planeMapper.setInputData(simpleFilter.getOutputData());\n        planeMapper.setColorByArrayName('outputArray'); \n\n        planeMapper.setScalarModeToUsePointFieldData();   \n        planeActor.setMapper(planeMapper);\n        planeActor.getProperty().setEdgeVisibility(true);\n\n        renderer.addActor(planeActor);\n        renderer.resetCamera();\n        renderWindow.render();\n    </script>\n</body>\n\n</html>\n\nExample 6 (Score: 5.00, Matches: vtkCalculator):\nDescription: Displays a 2D image volume with an outlined labelmap. Specific regions (high/low values) are highlighted in red/green with transparent outlines.\n\nModules: vtk.Common.Core.vtkDataArray, vtk.Common.DataModel.vtkDataSet.FieldAssociations, vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes, vtk.Common.DataModel.vtkImageData, vtk.Common.DataModel.vtkPiecewiseFunction, vtk.Filters.General.vtkCalculator, vtk.Rendering.Core.vtkActor, vtk.Rendering.Core.vtkColorTransferFunction, vtk.Rendering.Core.vtkImageMapper, vtk.Rendering.Core.vtkImageSlice, vtk.Rendering.Misc.vtkFullScreenRenderWindow\nCode:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js ImageLabelOutline</title>\n    <style>\n        #renderer {\n            width: 100%;\n            height: 600px;\n            background-color: #333;\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        // Use the vtk namespace to reference each class\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n        const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n        const vtkImageData = vtk.Common.DataModel.vtkImageData;\n        const vtkDataArray = vtk.Common.Core.vtkDataArray;\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n\n        // Use the vtk namespace to reference constants\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldAssociations;\n\n        const fullScreenRenderWindow = vtkFullScreenRenderWindow.newInstance({\n            background: [0.5, 0.5, 0.5],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n        const BACKGROUND = 0;\n        const LOW_VALUE = 80;\n        const HIGH_VALUE = 160;\n\n        const FIRST_SEGMENT = 1;\n        const SECOND_SEGMENT = 5;\n\n        /**\n         * Creates a labelmap image with the same dimensions as the background volume.\n         * @param {vtkImageData} backgroundImageData - The background volume data.\n         * @returns {Object} An object containing the labelmap actor, mapper, image data, color transfer function, and opacity function.\n         */\n        function createLabelmap(backgroundImageData) {\n            // Create a labelmap image the same dimensions as our background volume.\n            const labelMapData = vtkImageData.newInstance(\n                backgroundImageData.get('spacing', 'origin', 'direction')\n            );\n\n            labelMapData.computeTransforms();\n\n            const dataArray = vtkDataArray.newInstance({\n                numberOfComponents: 1,\n                values: new Uint8Array(backgroundImageData.getNumberOfPoints()),\n            });\n            labelMapData.getPointData().setScalars(dataArray);\n\n            labelMapData.setDimensions(...backgroundImageData.getDimensions());\n            labelMapData.setSpacing(...backgroundImageData.getSpacing());\n            labelMapData.setOrigin(...backgroundImageData.getOrigin());\n            labelMapData.setDirection(...backgroundImageData.getDirection());\n            const mapper = vtkImageMapper.newInstance();\n            mapper.setInputData(labelMapData);\n\n            const actor = vtkImageSlice.newInstance();\n\n            actor.setMapper(mapper);\n\n            const labelMap = {\n                actor,\n                mapper,\n                imageData: labelMapData,\n                cfun: vtkColorTransferFunction.newInstance(),\n                ofun: vtkPiecewiseFunction.newInstance(),\n            };\n\n            // Labelmap pipeline\n            labelMap.mapper.setInputData(labelMapData);\n            labelMap.actor.setMapper(labelMap.mapper);\n\n            // Set up labelMap color and opacity mapping\n            labelMap.cfun.addRGBPoint(0, 0, 0, 0); // label \"1\" will be red\n            labelMap.cfun.addRGBPoint(FIRST_SEGMENT, 1, 0, 0); // label \"1\" will be red\n            labelMap.cfun.addRGBPoint(SECOND_SEGMENT, 0, 1, 0); // label \"5\" will be green\n            labelMap.ofun.addPoint(0, 0);\n            labelMap.ofun.addPoint(FIRST_SEGMENT, 0.1); // Red will have an opacity of 0.1.\n            labelMap.ofun.addPoint(SECOND_SEGMENT, 0.1); // Green will have an opacity of 0.1.\n\n            labelMap.actor.getProperty().setRGBTransferFunction(0, labelMap.cfun);\n            labelMap.actor.getProperty().setScalarOpacity(0, labelMap.ofun);\n            labelMap.actor.getProperty().setInterpolationTypeToNearest();\n\n            labelMap.actor.getProperty().setUseLabelOutline(true);\n            // Label outline thickness is for first segment -> 2 (positioned at array index 0), second segment -> 4\n            // (positioned at array index 4)\n            labelMap.actor.getProperty().setLabelOutlineThickness([2, 1, 1, 1, 4]);\n            labelMap.actor.getProperty().setLabelOutlineOpacity(1.0);\n\n            // This is very important to make sure the labelmap is rendered\n            // correctly\n            labelMap.actor.getProperty().setUseLookupTableScalarRange(true);\n\n            const dims = labelMap.imageData.getDimensions();\n            const values = labelMap.imageData.getPointData().getScalars().getData();\n\n            const backgroundValues = backgroundImageData\n                .getPointData()\n                .getScalars()\n                .getData();\n            const size = dims[0] * dims[1] * dims[2];\n\n            for (let i = 0; i < size; i++) {\n                if (backgroundValues[i] === LOW_VALUE) {\n                    values[i] = FIRST_SEGMENT;\n                } else if (backgroundValues[i] === HIGH_VALUE) {\n                    values[i] = SECOND_SEGMENT;\n                }\n            }\n\n            labelMap.imageData.getPointData().getScalars().setData(values);\n\n            return labelMap;\n        }\n\n        // Create a one slice vtkImageData that has four quadrants of different values\n        const imageData = vtkImageData.newInstance();\n        const dims = [10, 10, 1];\n        imageData.setSpacing(1, 1, 1);\n        imageData.setOrigin(0.1, 0.1, 0.1);\n        imageData.setDirection(1, 0, 0, 0, 1, 0, 0, 0, 1);\n        imageData.setExtent(0, dims[0] - 1, 0, dims[1] - 1, 0, dims[2] - 1);\n\n        imageData.computeTransforms();\n\n        const values = new Uint8Array(dims[0] * dims[1] * dims[2]);\n\n        let i = 0;\n        for (let y = 0; y < dims[1]; y++) {\n            for (let x = 0; x < dims[0]; x++, i++) {\n                if ((x < 3 && y < 3) || (x > 7 && y > 7)) {\n                    values[i] = BACKGROUND;\n                } else if (x > 4 && x < 6 && y > 4 && y < 7) {\n                    values[i] = LOW_VALUE;\n                } else {\n                    values[i] = HIGH_VALUE;\n                }\n            }\n        }\n\n        const dataArray = vtkDataArray.newInstance({\n            numberOfComponents: 1,\n            values,\n        });\n        imageData.getPointData().setScalars(dataArray);\n        imageData.modified();\n\n        const data = imageData;\n        const labelMap = createLabelmap(data);\n\n        const actor = vtkImageSlice.newInstance();\n        const mapper = vtkImageMapper.newInstance();\n        mapper.setInputData(data);\n        actor.setMapper(mapper);\n        actor.getProperty().setInterpolationTypeToNearest();\n\n        renderer.addActor(actor);\n        renderer.addActor(labelMap.actor);\n        renderer.resetCamera();\n        renderer.resetCameraClippingRange();\n        renderWindow.render();\n\n        window.fullScreen = fullScreenRenderWindow;\n\n    </script>\n</body>\n\n</html>\n\n",
  "evaluator_prompt": "# Role\n\nYou are an expert Evaluator for vtk.js and web-based scientific visualization. Your task is to compare the [GENERATED_CODE] against the [GROUND_TRUTH] and evaluate it based on specific dimensions.\n\n# Input Data\n\n## Ground Truth Code:\n\n[GROUND_TRUTH]\n\n## Generated Code:\n\n[GENERATED_CODE]\n\n# Evaluation Criteria & Rubric (0.0 to 1.0)\n\nPlease evaluate the generated code based on the following 3 dimensions. \n\n1. **Functionality & Completeness (Task Completion)**: \n   - Does the code implement the same visualization pipeline as the ground truth? (e.g., correct readers, mappers, filters).\n   - Are critical elements present (e.g., color transfer functions, full-screen rendering)?\n   - Score 1.0 if logic is identical; lower if steps are missing.\n\n2. **Visual Fidelity (Visual Quality)**:\n   - Based on the code logic, will the visual output look similar to the ground truth?\n   - Check camera parameters, background colors, and opacity transfer functions.\n   - Check if the correct data arrays (scalars/vectors) are selected for coloring.\n\n3. **Code Quality & Maintainability**:\n   - Is the code readable, well-structured, and using vtk.js best practices?\n   - Is the variable naming clear?\n\n# Response Format\n\nYou must output the evaluation in the following Strict XML format. Do not use Markdown block quotes.\n\n<Evaluation>\n    <Dimension name=\"Functionality\">\n        <Score>[SCORE_FLOAT]</Score>\n        <Reason>[BRIEF_REASONING]</Reason>\n    </Dimension>\n    <Dimension name=\"VisualQuality\">\n        <Score>[SCORE_FLOAT]</Score>\n        <Reason>[BRIEF_REASONING]</Reason>\n    </Dimension>\n    <Dimension name=\"CodeQuality\">\n        <Score>[SCORE_FLOAT]</Score>\n        <Reason>[BRIEF_REASONING]</Reason>\n    </Dimension>\n    <Summary>\n        <OverallScore>[AVERAGE_SCORE]</OverallScore>\n        <Critique>[ONE_SENTENCE_SUMMARY]</Critique>\n    </Summary>\n</Evaluation>",
  "generator": "deepseek-v3",
  "evaluator": "deepseek-v3",
  "score": null,
  "workflow": {
    "inquiryExpansion": true,
    "rag": true
  },
  "eval_id": "1765334254",
  "eval_user": "test",
  "export_time": null,
  "console_output": null,
  "eval_time": "2025-12-10 10:37:34",
  "evaluator_evaluation": {
    "score": "0.87",
    "evaluator_evaluation": "<Evaluation>\n    <Dimension name=\"Functionality\">\n        <Score>0.9</Score>\n        <Reason>The generated code implements a similar visualization pipeline but uses vtkHttpDataSetReader and vtkCalculator instead of directly processing data in the promise chain. All critical components are present but implemented differently.</Reason>\n    </Dimension>\n    <Dimension name=\"VisualQuality\">\n        <Score>0.8</Score>\n        <Reason>The visual output should be similar but the opacity and color transfer functions have slightly different parameters. The background color is also different (black vs white).</Reason>\n    </Dimension>\n    <Dimension name=\"CodeQuality\">\n        <Score>0.9</Score>\n        <Reason>The code is well-structured and uses vtk.js best practices. The use of vtkCalculator makes the data processing more modular. Variable naming is clear.</Reason>\n    </Dimension>\n    <Summary>\n        <OverallScore>0.87</OverallScore>\n        <Critique>The generated code provides equivalent functionality with improved modularity, though with some minor visual differences from the ground truth.</Critique>\n    </Summary>\n</Evaluation>",
    "parsed_evaluation": {
      "dimensions": {
        "Functionality": {
          "score": 0.9,
          "reason": "The generated code implements a similar visualization pipeline but uses vtkHttpDataSetReader and vtkCalculator instead of directly processing data in the promise chain. All critical components are present but implemented differently."
        },
        "VisualQuality": {
          "score": 0.8,
          "reason": "The visual output should be similar but the opacity and color transfer functions have slightly different parameters. The background color is also different (black vs white)."
        },
        "CodeQuality": {
          "score": 0.9,
          "reason": "The code is well-structured and uses vtk.js best practices. The use of vtkCalculator makes the data processing more modular. Variable naming is clear."
        }
      },
      "overall": 0.87,
      "critique": "The generated code provides equivalent functionality with improved modularity, though with some minor visual differences from the ground truth.",
      "raw_xml": "<Evaluation>\n    <Dimension name=\"Functionality\">\n        <Score>0.9</Score>\n        <Reason>The generated code implements a similar visualization pipeline but uses vtkHttpDataSetReader and vtkCalculator instead of directly processing data in the promise chain. All critical components are present but implemented differently.</Reason>\n    </Dimension>\n    <Dimension name=\"VisualQuality\">\n        <Score>0.8</Score>\n        <Reason>The visual output should be similar but the opacity and color transfer functions have slightly different parameters. The background color is also different (black vs white).</Reason>\n    </Dimension>\n    <Dimension name=\"CodeQuality\">\n        <Score>0.9</Score>\n        <Reason>The code is well-structured and uses vtk.js best practices. The use of vtkCalculator makes the data processing more modular. Variable naming is clear.</Reason>\n    </Dimension>\n    <Summary>\n        <OverallScore>0.87</OverallScore>\n        <Critique>The generated code provides equivalent functionality with improved modularity, though with some minor visual differences from the ground truth.</Critique>\n    </Summary>\n</Evaluation>"
    }
  },
  "options": null,
  "analysis": [
    {
      "phase": "Data Loading",
      "step_name": "Load Redsea Dataset",
      "vtk_modules": [
        "vtkXMLImageDataReader",
        "vtkHttpDataSetReader"
      ],
      "description": "Load the Redsea dataset from 'http://127.0.0.1:5000/dataset/redsea.vti' using vtkHttpDataSetReader or vtkXMLImageDataReader."
    },
    {
      "phase": "Data Processing",
      "step_name": "Compute Velocity Magnitude",
      "vtk_modules": [
        "vtkCalculator"
      ],
      "description": "Use vtkCalculator to compute the magnitude of the 'velocity' vector array and set it as the active scalar for subsequent volume rendering."
    },
    {
      "phase": "Visualization Setup",
      "step_name": "Set Color Map",
      "vtk_modules": [
        "vtkColorTransferFunction"
      ],
      "description": "Create a color transfer function that maps scalar values from min to max to a blue → white → red color gradient for realistic visualization."
    },
    {
      "phase": "Visualization Setup",
      "step_name": "Set Opacity Function",
      "vtk_modules": [
        "vtkPiecewiseFunction"
      ],
      "description": "Apply a piecewise opacity function to control transparency across scalar values, allowing better visibility of internal structures in the volume."
    },
    {
      "phase": "Visualization Setup",
      "step_name": "Configure Volume Properties",
      "vtk_modules": [
        "vtkVolumeProperty"
      ],
      "description": "Set shading, ambient, diffuse, and specular properties on the volume property object to enhance realism in the volume rendering."
    },
    {
      "phase": "Rendering & Interaction",
      "step_name": "Set Camera View",
      "vtk_modules": [
        "vtkRenderer"
      ],
      "description": "Adjust the camera to look along the +Z axis and center on the dataset bounds to provide an optimal viewing perspective."
    }
  ],
  "retrieval_results": [
    {
      "file_path": "data\\vtkjs-examples\\prompt-sample\\Rendering-VolumeMapper\\code.html",
      "faiss_id": 431419998,
      "description": "Loads a 3D volume dataset and renders it using `vtkVolumeActor` and `vtkVolumeMapper` with extensive customization for appearance and quality.\n",
      "vtkjs_modules": "['vtk.Common.DataModel.vtkPiecewiseFunction', 'vtk.IO.Core.vtkHttpDataSetReader.newInstance', 'vtk.Rendering.Core.vtkColorTransferFunction', 'vtk.Rendering.Core.vtkVolume', 'vtk.Rendering.Core.vtkVolumeMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance']",
      "rerank_score": 38.0,
      "matched_keywords": "['vtkVolumeMapper', 'vtkVolumeActor', 'vtkPiecewiseFunction', 'vtkColorTransferFunction']",
      "match_explanation": "[\"Query: 'Visualization Setup — Apply a blue → white → red color map spanning the scalar range (min to max) using vtkColorTransferFunction;' (w=8.0) -> Hit 1 keys\", \"Query: 'Visualization Setup — Define a piecewise opacity function to control transparency across scalar values using vtkPiecewiseFunction;' (w=10.0) -> Hit 1 keys\", \"Query: 'Volume Rendering — Render the dataset using vtkVolumeMapper and vtkVolumeActor;' (w=10.0) -> Hit 2 keys\"]",
      "title": "Rendering-VolumeMapper"
    },
    {
      "file_path": "data\\vtkjs-examples\\prompt-sample\\Filter-ImageLabelOutline\\code.html",
      "faiss_id": 144015752,
      "description": "Displays a 2D image volume with an outlined labelmap. Specific regions (high/low values) are highlighted in red/green with transparent outlines.\n",
      "vtkjs_modules": "['vtk.Common.Core.vtkDataArray', 'vtk.Common.DataModel.vtkDataSet.FieldAssociations', 'vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes', 'vtk.Common.DataModel.vtkImageData', 'vtk.Common.DataModel.vtkPiecewiseFunction', 'vtk.Filters.General.vtkCalculator', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkColorTransferFunction', 'vtk.Rendering.Core.vtkImageMapper', 'vtk.Rendering.Core.vtkImageSlice', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']",
      "rerank_score": 32.0,
      "matched_keywords": "['vtkPiecewiseFunction', 'vtkCalculator', 'vtkActor', 'vtkRenderWindow', 'vtkColorTransferFunction']",
      "match_explanation": "[\"Query: 'Data Processing — Compute the velocity magnitude from the 'velocity' array and set it as the active scalar using vtkCalculator;' (w=8.0) -> Hit 1 keys\", \"Query: 'Visualization Setup — Apply a blue → white → red color map spanning the scalar range (min to max) using vtkColorTransferFunction;' (w=8.0) -> Hit 1 keys\", \"Query: 'Visualization Setup — Define a piecewise opacity function to control transparency across scalar values using vtkPiecewiseFunction;' (w=10.0) -> Hit 1 keys\", \"Query: 'Integrate all components and render the visualization using vtkRenderWindow, vtkRenderer, vtkActor;' (w=3.0) -> Hit 2 keys\"]",
      "title": "Filter-ImageLabelOutline"
    },
    {
      "file_path": "data\\vtkjs-examples\\prompt-sample\\Rendering-ItkWasmVolume\\code.html",
      "faiss_id": 1398812761,
      "description": "Loads a medical image dataset (MHA) and renders it as a 3D volume using `vtkVolumeMapper` with custom color and opacity transfer functions.\n",
      "vtkjs_modules": "['vtk.Common.DataModel.vtkITKHelper', 'vtk.Common.DataModel.vtkPiecewiseFunction', 'vtk.IO.Core.DataAccessHelper.vtkLiteHttpDataAccessHelper', 'vtk.Rendering.Core.vtkColorTransferFunction', 'vtk.Rendering.Core.vtkVolume', 'vtk.Rendering.Core.vtkVolumeMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']",
      "rerank_score": 31.0,
      "matched_keywords": "['vtkRenderWindow', 'vtkVolumeMapper', 'vtkPiecewiseFunction', 'vtkColorTransferFunction']",
      "match_explanation": "[\"Query: 'Visualization Setup — Apply a blue → white → red color map spanning the scalar range (min to max) using vtkColorTransferFunction;' (w=8.0) -> Hit 1 keys\", \"Query: 'Visualization Setup — Define a piecewise opacity function to control transparency across scalar values using vtkPiecewiseFunction;' (w=10.0) -> Hit 1 keys\", \"Query: 'Volume Rendering — Render the dataset using vtkVolumeMapper and vtkVolumeActor;' (w=10.0) -> Hit 1 keys\", \"Query: 'Integrate all components and render the visualization using vtkRenderWindow, vtkRenderer, vtkActor;' (w=3.0) -> Hit 1 keys\"]",
      "title": "Rendering-ItkWasmVolume"
    },
    {
      "file_path": "data\\vtkjs-examples\\prompt-sample\\Filter-VolumeClip\\code.html",
      "faiss_id": 895986302,
      "description": "Renders a 3D medical volume (`headsq.vti`) with a clipping plane, using `vtkVolumeMapper` and `vtkVolumeActor` for customized appearance.\n",
      "vtkjs_modules": "['vtk.Common.DataModel.vtkPiecewiseFunction', 'vtk.Common.DataModel.vtkPlane', 'vtk.IO.Core.vtkHttpDataSetReader.newInstance', 'vtk.Rendering.Core.vtkVolume', 'vtk.Rendering.Core.vtkVolumeMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance']",
      "rerank_score": 30.0,
      "matched_keywords": "['vtkVolumeActor', 'vtkPiecewiseFunction', 'vtkVolumeMapper']",
      "match_explanation": "[\"Query: 'Visualization Setup — Define a piecewise opacity function to control transparency across scalar values using vtkPiecewiseFunction;' (w=10.0) -> Hit 1 keys\", \"Query: 'Volume Rendering — Render the dataset using vtkVolumeMapper and vtkVolumeActor;' (w=10.0) -> Hit 2 keys\"]",
      "title": "Filter-VolumeClip"
    },
    {
      "file_path": "data\\vtkjs-examples\\prompt-sample\\Filter-Calculator\\code.html",
      "faiss_id": 1276004285,
      "description": "This code visualizes a 3D plane colored by a mathematical function, using `vtkCalculator` for scalar values and `vtkMapper` for coloring.\n",
      "vtkjs_modules": "['vtk.Common.Core.vtkPoints', 'vtk.Common.DataModel.vtkDataSet.FieldDataTypes', 'vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes', 'vtk.Common.DataModel.vtkPolyData', 'vtk.Filters.General.vtkCalculator', 'vtk.Filters.Sources.vtkPlaneSource', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']",
      "rerank_score": 14.0,
      "matched_keywords": "['vtkRenderWindow', 'vtkCalculator', 'vtkActor']",
      "match_explanation": "[\"Query: 'Data Processing — Compute the velocity magnitude from the 'velocity' array and set it as the active scalar using vtkCalculator;' (w=8.0) -> Hit 1 keys\", \"Query: 'Integrate all components and render the visualization using vtkRenderWindow, vtkRenderer, vtkActor;' (w=3.0) -> Hit 2 keys\"]",
      "title": "Filter-Calculator"
    },
    {
      "file_path": "data\\vtkjs-examples\\prompt-sample\\IO-StickMapper\\code.html",
      "faiss_id": 771311485,
      "description": "Generates a plane and uses `vtkCalculator` to create custom point data ('orientation', 'temperature', 'pressure'), which `vtkStickMapper` could use for rendering (currently not fully connected).\n",
      "vtkjs_modules": "['vtk.Common.DataModel.vtkDataSet.FieldAssociations', 'vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes', 'vtk.Filters.General.vtkCalculator', 'vtk.Filters.Sources.vtkPlaneSource', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkStickMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']",
      "rerank_score": 14.0,
      "matched_keywords": "['vtkRenderWindow', 'vtkCalculator', 'vtkActor']",
      "match_explanation": "[\"Query: 'Data Processing — Compute the velocity magnitude from the 'velocity' array and set it as the active scalar using vtkCalculator;' (w=8.0) -> Hit 1 keys\", \"Query: 'Integrate all components and render the visualization using vtkRenderWindow, vtkRenderer, vtkActor;' (w=3.0) -> Hit 2 keys\"]",
      "title": "IO-StickMapper"
    }
  ],
  "metadata": {
    "keyword_aware_retrieval_time": 0.01036524772644043,
    "retrieval_time_seconds": 0.01
  }
}