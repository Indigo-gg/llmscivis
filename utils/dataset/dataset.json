[
   
    {
        "path": "IO-Rendering\\colors_and_representation\\airfoil_oneslice\\description.txt",
        "name": "description.txt",
        "prompt": "Generate HTML with vtk.js to visualize volume rendering\n\nLoad from http://127.0.0.1:5000/dataset/airfoil_oneslice.vtp\nScalar Mapping:\nActivates the p scalar array for color encoding\nVisualization:\nRenders the colors and representation\npositions the camera to focus on the dataset bounds",
        "ground_truth": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>VTK.js Airfoil Rendering with Surface LIC</title>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <style>\n        body,\n        html {\n            margin: 0;\n            padding: 0;\n            width: 100%;\n            height: 100%;\n            overflow: hidden;\n        }\n\n        #renderer {\n            width: 100%;\n            height: 100%;\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script>\n        // Import required VTK.js classes\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkXMLPolyDataReader = vtk.IO.XML.vtkXMLPolyDataReader;\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkLookupTable = vtk.Common.Core.vtkLookupTable;\n        // Removed non-existent SurfaceLICMapper reference\n        // const vtkSurfaceLICMapper = vtk.Rendering.Core.vtkSurfaceLICMapper;\n\n        // Initialize rendering window\n        const fullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0.1, 0.1, 0.1],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n        // Create PolyData reader\n        const reader = vtkXMLPolyDataReader.newInstance();\n\n        // Set URL and load data\n        reader.setUrl('http://127.0.0.1:5000/dataset/airfoil_oneslice.vtp').then(() => {\n            reader.loadData().then(() => {\n                // Get loaded polygon data\n                const polyData = reader.getOutputData(0);\n\n                // Get scalar arrays from data\n                const pointData = polyData.getPointData();\n                const arrays = pointData.getArrays();\n                const scalarNames = [];\n                arrays.forEach((array, name) => {\n                    scalarNames.push(name);\n                });\n                console.log('Available scalars:', scalarNames);\n\n                // Select p as color scalar\n                polyData.getPointData().setActiveScalars('p');\n                // Get scalar range\n                const dataRange = polyData.getPointData().getScalars().getRange();\n                console.log('Data range:', dataRange);\n\n                const mapper = vtkMapper.newInstance();\n                mapper.setInputData(polyData);\n\n                // Create actor\n                const actor = vtkActor.newInstance();\n                actor.setMapper(mapper);\n                // Add actor to renderer\n                renderer.addActor(actor);\n\n                // Calculate data bounds and center point\n                const bounds = polyData.getBounds();\n                const center = [\n                    (bounds[0] + bounds[1]) / 2, // X center\n                    (bounds[2] + bounds[3]) / 2, // Y center\n                    (bounds[4] + bounds[5]) / 2, // Z center\n                ];\n\n                // Configure camera view - adjusted based on image\n                const camera = renderer.getActiveCamera();\n                camera.setFocalPoint(...center);\n                camera.setPosition(center[0], center[1], center[2] + 5);\n                camera.setViewUp(0, 1, 0);\n\n                // Reset camera and clipping range\n                renderer.resetCamera();\n                renderer.resetCameraClippingRange();\n\n                // Render scene\n                renderWindow.render();\n\n                // Add axis indicator\n                const axes = vtk.Rendering.Core.vtkAxesActor.newInstance();\n                const widget = vtk.Interaction.Widgets.vtkOrientationMarkerWidget.newInstance({\n                    actor: axes,\n                    interactor: renderWindow.getInteractor(),\n                });\n                widget.setEnabled(true);\n                widget.setViewportCorner(\n                    vtk.Interaction.Widgets.vtkOrientationMarkerWidget.Corners.BOTTOM_RIGHT\n                );\n                widget.setViewportSize(0.15);\n                widget.setMinPixelSize(100);\n                widget.setMaxPixelSize(300);\n            });\n        }).catch(error => {\n            console.error('Error loading dataset:', error);\n        });\n    </script>\n</body>\n\n</html>",
        "generated_code": "\n        <!DOCTYPE html>\n<html lang=\"zh-CN\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <title>error page</title>\n</head>\n\n<body>\n    <h1>error</h1>\n\n    <div class=\"error-box\">\n        <h2>error_message</h2>\n        <pre><code>Error code: 401 - {'error': {'message': '无效的令牌 (request id: 20250601205300343281416Qwyi6iv8)', 'type': 'new_api_error'}}</code></pre>\n    </div>\n</body>\n\n</html>\n        ",
        "generator_prompt": "Please use vtkjs to generate visualization code. The code should be in the form of a complete code wrapped only in HTML tags. Please add your thinking process as comments in the code to make it easier to understand the code logic.\n\nIn the code, use `<script src=\"https://unpkg.com/vtk.js\"></script>` as the library for visualization to implement the visualization function.\nPlease follow the following rules:\n1. The content of the answer is HTML code with vtkjs script(start from <!DOCTYPE html>), and if there is any explanation, it should be given in the form of comments.\n2. If the sample code is relevant to the user's requirements, implement the user's requirements based on the sample code.\n3. The answer should be based on the provided sample information, and do not fabricate functions that do not exist. \nPlease implement the code strictly according to the specific requirements of the user in the `<QUESTION></QUESTION>` tag. Ensure that the code logic is clear and straightforward, and generate the visualization-related code completely in accordance with the syntax specifications of vtkjs. \n<QUESTION>__QUESTION__</QUESTION>\n\n",
        "final_prompt": "\n    用户需求分析：\n    1. 主要目标：Generate HTML with vtk.js to visualize volume rendering\n\nLoad from http://127.0.0.1:5000/dataset/airfoil_oneslice.vtp\nScalar Mapping:\nActivates the p scalar array for color encoding\nVisualization:\nRenders the colors and representation\npositions the camera to focus on the dataset bounds\n    2. 数据来源：\n    3. 关键API：待确定\n    \n    \n        The relevant VTK.js example information is as follows: 示例 'Rendering-VolumeMapper' (code):\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n</head>\n\n<body>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        //using volume actor and mapper for rendering\n        const vtkVolumeActor = vtk.Rendering.Core.vtkVolume;\n        const vtkVolumeMapper = vtk.Rendering.Core.vtkVolumeMapper;\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n\n        //init the render window\n        const fullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n示例 'ItkWasmVolume' (code):\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script src=\"https://unpkg.com/vtk.js/Sources/IO/Core/DataAccessHelper/LiteHttpDataAccessHelper.js\"></script>\n    <script>\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n        const vtkVolume = vtk.Rendering.Core.vtkVolume;\n        const vtkVolumeMapper = vtk.Rendering.Core.vtkVolumeMapper;\n        const vtkITKHelper = vtk.Common.DataModel.vtkITKHelper;\n        // const vtkLiteHttpDataAccessHelper = vtk.IO.Core.DataAccessHelper.vtkLiteHttpDataAccessHelper;\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n示例 'Rendering-ItkWasmVolume' (code):\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script src=\"https://unpkg.com/vtk.js/Sources/IO/Core/DataAccessHelper/LiteHttpDataAccessHelper.js\"></script>\n    <script>\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n        const vtkVolume = vtk.Rendering.Core.vtkVolume;\n        const vtkVolumeMapper = vtk.Rendering.Core.vtkVolumeMapper;\n        const vtkITKHelper = vtk.Common.DataModel.vtkITKHelper;\n        // const vtkLiteHttpDataAccessHelper = vtk.IO.Core.DataAccessHelper.vtkLiteHttpDataAccessHelper;\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n示例 'Rendering-Image' (code):\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    </style>\n</head>\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkSphereSource = vtk.Filters.Sources.vtkSphereSource;\n        const vtkSphereMapper = vtk.Rendering.Core.vtkSphereMapper;\n        //if we just use the vtkMapper, the results are volume rendering results\n        \n        //creating rendering window\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n        const mapper = vtkSphereMapper.newInstance();\n        const actor = vtkActor.newInstance();\n        \n        //creating sphereSource properties\n\n示例 'Filter-VolumeClip' (code):\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n</head>\n\n<body>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        //using volume actor and mapper for rendering\n        const vtkVolumeActor = vtk.Rendering.Core.vtkVolume;\n        const vtkVolumeMapper = vtk.Rendering.Core.vtkVolumeMapper;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n        const vtkPlane = vtk.Common.DataModel.vtkPlane;\n\n        //init the render window\n        const fullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n        //create clip plan\n        const clipPlane = vtkPlane.newInstance();\n        const clipPlaneNormal = [0, 0, 1]\n\n        User question: Generate HTML with vtk.js to visualize volume rendering\n\nLoad from http://127.0.0.1:5000/dataset/airfoil_oneslice.vtp\nScalar Mapping:\nActivates the p scalar array for color encoding\nVisualization:\nRenders the colors and representation\npositions the camera to focus on the dataset bounds\n        Please provide a detailed answer based on the above analysis and example information. Highlight how to meet the user's specific needs in the comments.\n        ",
        "evaluator_prompt": "# Role: An expert for vtk.js and web-based scientific visualization\n# Ground truth: [GROUND_TRUTH]\n# Generated code: [GENERATED_CODE]\nThe ground truth code is provided by [Ground truth], please give a score for [Generated code] according to its readability and correctness. The score is between 0 to 1, and explain reasons for giving this score.\n### Response Format\n```\n<Score>[SCORE]</Score>\n<Explanation>[EXPLANATION]</Explanation>\n### Response Example\n<Score>0.8</Score>\n<Explanation>The generated code is readable and correct.</Explanation> ",
        "generator": "chatGPT-4o",
        "evaluator": "qwen3-turbo",
        "score": "0.1",
        "workflow": {
            "inquiryExpansion": true,
            "rag": true,
            "iterativeLoop": false
        },
        "eval_id": "1748782264",
        "eval_user": "test",
        "export_time": "2025-06-01T12:54:52.407Z",
        "console_output": [],
        "eval_time": "2025-06-01 20:51:04",
        "evaluator_evaluation": "<Score>0.1</Score>\n<Explanation>The generated code is completely unrelated to the ground truth. The ground truth is a VTK.js visualization application for rendering an airfoil with surface data, while the generated code is a simple HTML error page with no connection to scientific visualization or vtk.js. The code is not readable in the context of the task and contains no functional or structural similarity to the correct implementation.</Explanation>",
        "options": null
    },
    {
        "path": "IO-Rendering\\colors_and_representation\\airfoil_oneslice\\description.txt",
        "name": "description.txt",
        "prompt": "Generate HTML with vtk.js to visualize volume rendering\n\nLoad from http://127.0.0.1:5000/dataset/airfoil_oneslice.vtp\nScalar Mapping:\nActivates the p scalar array for color encoding\nVisualization:\nRenders the colors and representation\npositions the camera to focus on the dataset bounds",
        "ground_truth": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>VTK.js Airfoil Rendering with Surface LIC</title>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <style>\n        body,\n        html {\n            margin: 0;\n            padding: 0;\n            width: 100%;\n            height: 100%;\n            overflow: hidden;\n        }\n\n        #renderer {\n            width: 100%;\n            height: 100%;\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script>\n        // Import required VTK.js classes\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkXMLPolyDataReader = vtk.IO.XML.vtkXMLPolyDataReader;\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkLookupTable = vtk.Common.Core.vtkLookupTable;\n        // Removed non-existent SurfaceLICMapper reference\n        // const vtkSurfaceLICMapper = vtk.Rendering.Core.vtkSurfaceLICMapper;\n\n        // Initialize rendering window\n        const fullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0.1, 0.1, 0.1],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n        // Create PolyData reader\n        const reader = vtkXMLPolyDataReader.newInstance();\n\n        // Set URL and load data\n        reader.setUrl('http://127.0.0.1:5000/dataset/airfoil_oneslice.vtp').then(() => {\n            reader.loadData().then(() => {\n                // Get loaded polygon data\n                const polyData = reader.getOutputData(0);\n\n                // Get scalar arrays from data\n                const pointData = polyData.getPointData();\n                const arrays = pointData.getArrays();\n                const scalarNames = [];\n                arrays.forEach((array, name) => {\n                    scalarNames.push(name);\n                });\n                console.log('Available scalars:', scalarNames);\n\n                // Select p as color scalar\n                polyData.getPointData().setActiveScalars('p');\n                // Get scalar range\n                const dataRange = polyData.getPointData().getScalars().getRange();\n                console.log('Data range:', dataRange);\n\n                const mapper = vtkMapper.newInstance();\n                mapper.setInputData(polyData);\n\n                // Create actor\n                const actor = vtkActor.newInstance();\n                actor.setMapper(mapper);\n                // Add actor to renderer\n                renderer.addActor(actor);\n\n                // Calculate data bounds and center point\n                const bounds = polyData.getBounds();\n                const center = [\n                    (bounds[0] + bounds[1]) / 2, // X center\n                    (bounds[2] + bounds[3]) / 2, // Y center\n                    (bounds[4] + bounds[5]) / 2, // Z center\n                ];\n\n                // Configure camera view - adjusted based on image\n                const camera = renderer.getActiveCamera();\n                camera.setFocalPoint(...center);\n                camera.setPosition(center[0], center[1], center[2] + 5);\n                camera.setViewUp(0, 1, 0);\n\n                // Reset camera and clipping range\n                renderer.resetCamera();\n                renderer.resetCameraClippingRange();\n\n                // Render scene\n                renderWindow.render();\n\n                // Add axis indicator\n                const axes = vtk.Rendering.Core.vtkAxesActor.newInstance();\n                const widget = vtk.Interaction.Widgets.vtkOrientationMarkerWidget.newInstance({\n                    actor: axes,\n                    interactor: renderWindow.getInteractor(),\n                });\n                widget.setEnabled(true);\n                widget.setViewportCorner(\n                    vtk.Interaction.Widgets.vtkOrientationMarkerWidget.Corners.BOTTOM_RIGHT\n                );\n                widget.setViewportSize(0.15);\n                widget.setMinPixelSize(100);\n                widget.setMaxPixelSize(300);\n            });\n        }).catch(error => {\n            console.error('Error loading dataset:', error);\n        });\n    </script>\n</body>\n\n</html>",
        "generated_code": "\n        <!DOCTYPE html>\n<html lang=\"zh-CN\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <title>error page</title>\n</head>\n\n<body>\n    <h1>error</h1>\n\n    <div class=\"error-box\">\n        <h2>error_message</h2>\n        <pre><code>Error code: 401 - {'error': {'message': '无效的令牌 (request id: 202506012056594345816272LZGr6fa)', 'type': 'new_api_error'}}</code></pre>\n    </div>\n</body>\n\n</html>\n        ",
        "generator_prompt": "Please use vtkjs to generate visualization code. The code should be in the form of a complete code wrapped only in HTML tags. Please add your thinking process as comments in the code to make it easier to understand the code logic.\n\nIn the code, use `<script src=\"https://unpkg.com/vtk.js\"></script>` as the library for visualization to implement the visualization function.\nPlease follow the following rules:\n1. The content of the answer is HTML code with vtkjs script(start from <!DOCTYPE html>), and if there is any explanation, it should be given in the form of comments.\n2. If the sample code is relevant to the user's requirements, implement the user's requirements based on the sample code.\n3. The answer should be based on the provided sample information, and do not fabricate functions that do not exist. \nPlease implement the code strictly according to the specific requirements of the user in the `<QUESTION></QUESTION>` tag. Ensure that the code logic is clear and straightforward, and generate the visualization-related code completely in accordance with the syntax specifications of vtkjs. \n<QUESTION>__QUESTION__</QUESTION>\n\n",
        "final_prompt": "\n    用户需求分析：\n    1. 主要目标：Generate HTML with vtk.js to visualize volume rendering\n\nLoad from http://127.0.0.1:5000/dataset/airfoil_oneslice.vtp\nScalar Mapping:\nActivates the p scalar array for color encoding\nVisualization:\nRenders the colors and representation\npositions the camera to focus on the dataset bounds\n    2. 数据来源：\n    3. 关键API：待确定\n    \n    \n        The relevant VTK.js example information is as follows: 示例 'Rendering-VolumeMapper' (code):\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n</head>\n\n<body>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        //using volume actor and mapper for rendering\n        const vtkVolumeActor = vtk.Rendering.Core.vtkVolume;\n        const vtkVolumeMapper = vtk.Rendering.Core.vtkVolumeMapper;\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n\n        //init the render window\n        const fullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n示例 'ItkWasmVolume' (code):\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script src=\"https://unpkg.com/vtk.js/Sources/IO/Core/DataAccessHelper/LiteHttpDataAccessHelper.js\"></script>\n    <script>\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n        const vtkVolume = vtk.Rendering.Core.vtkVolume;\n        const vtkVolumeMapper = vtk.Rendering.Core.vtkVolumeMapper;\n        const vtkITKHelper = vtk.Common.DataModel.vtkITKHelper;\n        // const vtkLiteHttpDataAccessHelper = vtk.IO.Core.DataAccessHelper.vtkLiteHttpDataAccessHelper;\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n示例 'Rendering-ItkWasmVolume' (code):\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script src=\"https://unpkg.com/vtk.js/Sources/IO/Core/DataAccessHelper/LiteHttpDataAccessHelper.js\"></script>\n    <script>\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n        const vtkVolume = vtk.Rendering.Core.vtkVolume;\n        const vtkVolumeMapper = vtk.Rendering.Core.vtkVolumeMapper;\n        const vtkITKHelper = vtk.Common.DataModel.vtkITKHelper;\n        // const vtkLiteHttpDataAccessHelper = vtk.IO.Core.DataAccessHelper.vtkLiteHttpDataAccessHelper;\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n示例 'Rendering-Image' (code):\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    </style>\n</head>\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkSphereSource = vtk.Filters.Sources.vtkSphereSource;\n        const vtkSphereMapper = vtk.Rendering.Core.vtkSphereMapper;\n        //if we just use the vtkMapper, the results are volume rendering results\n        \n        //creating rendering window\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n        const mapper = vtkSphereMapper.newInstance();\n        const actor = vtkActor.newInstance();\n        \n        //creating sphereSource properties\n\n示例 'Filter-VolumeClip' (code):\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n</head>\n\n<body>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        //using volume actor and mapper for rendering\n        const vtkVolumeActor = vtk.Rendering.Core.vtkVolume;\n        const vtkVolumeMapper = vtk.Rendering.Core.vtkVolumeMapper;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n        const vtkPlane = vtk.Common.DataModel.vtkPlane;\n\n        //init the render window\n        const fullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n        //create clip plan\n        const clipPlane = vtkPlane.newInstance();\n        const clipPlaneNormal = [0, 0, 1]\n\n        User question: Generate HTML with vtk.js to visualize volume rendering\n\nLoad from http://127.0.0.1:5000/dataset/airfoil_oneslice.vtp\nScalar Mapping:\nActivates the p scalar array for color encoding\nVisualization:\nRenders the colors and representation\npositions the camera to focus on the dataset bounds\n        Please provide a detailed answer based on the above analysis and example information. Highlight how to meet the user's specific needs in the comments.\n        ",
        "evaluator_prompt": "# Role: An expert for vtk.js and web-based scientific visualization\n# Ground truth: [GROUND_TRUTH]\n# Generated code: [GENERATED_CODE]\nThe ground truth code is provided by [Ground truth], please give a score for [Generated code] according to its readability and correctness. The score is between 0 to 1, and explain reasons for giving this score.\n### Response Format\n```\n<Score>[SCORE]</Score>\n<Explanation>[EXPLANATION]</Explanation>\n### Response Example\n<Score>0.8</Score>\n<Explanation>The generated code is readable and correct.</Explanation> ",
        "generator": "chatGPT-4o",
        "evaluator": "qwen3-turbo",
        "score": "0.0",
        "workflow": {
            "inquiryExpansion": true,
            "rag": true,
            "iterativeLoop": false
        },
        "eval_id": "1748782503",
        "eval_user": "test",
        "export_time": "2025-06-01T13:06:09.467Z",
        "console_output": [],
        "eval_time": "2025-06-01 20:55:03",
        "evaluator_evaluation": "<Score>0.0</Score>\n<Explanation>The generated code is completely unrelated to the ground truth code. The ground truth is a VTK.js web application for rendering an airfoil with scientific visualization, while the generated code is a simple HTML error page with no connection to VTK.js or 3D rendering. The generated code does not demonstrate any understanding of the task and is not readable or correct in the context of the provided ground truth.</Explanation>",
        "options": null
    },
    {
        "path": "IO-Rendering\\colors_and_representation\\airfoil_oneslice\\description.txt",
        "name": "description.txt",
        "prompt": "Generate HTML with vtk.js to visualize volume rendering\n\nLoad from http://127.0.0.1:5000/dataset/airfoil_oneslice.vtp\nScalar Mapping:\nActivates the p scalar array for color encoding\nVisualization:\nRenders the colors and representation\npositions the camera to focus on the dataset bounds",
        "ground_truth": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>VTK.js Airfoil Rendering with Surface LIC</title>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <style>\n        body,\n        html {\n            margin: 0;\n            padding: 0;\n            width: 100%;\n            height: 100%;\n            overflow: hidden;\n        }\n\n        #renderer {\n            width: 100%;\n            height: 100%;\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script>\n        // Import required VTK.js classes\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkXMLPolyDataReader = vtk.IO.XML.vtkXMLPolyDataReader;\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkLookupTable = vtk.Common.Core.vtkLookupTable;\n        // Removed non-existent SurfaceLICMapper reference\n        // const vtkSurfaceLICMapper = vtk.Rendering.Core.vtkSurfaceLICMapper;\n\n        // Initialize rendering window\n        const fullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0.1, 0.1, 0.1],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n        // Create PolyData reader\n        const reader = vtkXMLPolyDataReader.newInstance();\n\n        // Set URL and load data\n        reader.setUrl('http://127.0.0.1:5000/dataset/airfoil_oneslice.vtp').then(() => {\n            reader.loadData().then(() => {\n                // Get loaded polygon data\n                const polyData = reader.getOutputData(0);\n\n                // Get scalar arrays from data\n                const pointData = polyData.getPointData();\n                const arrays = pointData.getArrays();\n                const scalarNames = [];\n                arrays.forEach((array, name) => {\n                    scalarNames.push(name);\n                });\n                console.log('Available scalars:', scalarNames);\n\n                // Select p as color scalar\n                polyData.getPointData().setActiveScalars('p');\n                // Get scalar range\n                const dataRange = polyData.getPointData().getScalars().getRange();\n                console.log('Data range:', dataRange);\n\n                const mapper = vtkMapper.newInstance();\n                mapper.setInputData(polyData);\n\n                // Create actor\n                const actor = vtkActor.newInstance();\n                actor.setMapper(mapper);\n                // Add actor to renderer\n                renderer.addActor(actor);\n\n                // Calculate data bounds and center point\n                const bounds = polyData.getBounds();\n                const center = [\n                    (bounds[0] + bounds[1]) / 2, // X center\n                    (bounds[2] + bounds[3]) / 2, // Y center\n                    (bounds[4] + bounds[5]) / 2, // Z center\n                ];\n\n                // Configure camera view - adjusted based on image\n                const camera = renderer.getActiveCamera();\n                camera.setFocalPoint(...center);\n                camera.setPosition(center[0], center[1], center[2] + 5);\n                camera.setViewUp(0, 1, 0);\n\n                // Reset camera and clipping range\n                renderer.resetCamera();\n                renderer.resetCameraClippingRange();\n\n                // Render scene\n                renderWindow.render();\n\n                // Add axis indicator\n                const axes = vtk.Rendering.Core.vtkAxesActor.newInstance();\n                const widget = vtk.Interaction.Widgets.vtkOrientationMarkerWidget.newInstance({\n                    actor: axes,\n                    interactor: renderWindow.getInteractor(),\n                });\n                widget.setEnabled(true);\n                widget.setViewportCorner(\n                    vtk.Interaction.Widgets.vtkOrientationMarkerWidget.Corners.BOTTOM_RIGHT\n                );\n                widget.setViewportSize(0.15);\n                widget.setMinPixelSize(100);\n                widget.setMaxPixelSize(300);\n            });\n        }).catch(error => {\n            console.error('Error loading dataset:', error);\n        });\n    </script>\n</body>\n\n</html>",
        "generated_code": "\n        <!DOCTYPE html>\n<html lang=\"zh-CN\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <title>error page</title>\n</head>\n\n<body>\n    <h1>error</h1>\n\n    <div class=\"error-box\">\n        <h2>error_message</h2>\n        <pre><code>Error code: 401 - {'error': {'message': '无效的令牌 (request id: 20250601210645707517202RK882Jrh)', 'type': 'new_api_error'}}</code></pre>\n    </div>\n</body>\n\n</html>\n        ",
        "generator_prompt": "Please use vtkjs to generate visualization code. The code should be in the form of a complete code wrapped only in HTML tags. Please add your thinking process as comments in the code to make it easier to understand the code logic.\n\nIn the code, use `<script src=\"https://unpkg.com/vtk.js\"></script>` as the library for visualization to implement the visualization function.\nPlease follow the following rules:\n1. The content of the answer is HTML code with vtkjs script(start from <!DOCTYPE html>), and if there is any explanation, it should be given in the form of comments.\n2. If the sample code is relevant to the user's requirements, implement the user's requirements based on the sample code.\n3. The answer should be based on the provided sample information, and do not fabricate functions that do not exist. \nPlease implement the code strictly according to the specific requirements of the user in the `<QUESTION></QUESTION>` tag. Ensure that the code logic is clear and straightforward, and generate the visualization-related code completely in accordance with the syntax specifications of vtkjs. \n<QUESTION>__QUESTION__</QUESTION>\n\n",
        "final_prompt": "\n    用户需求分析：\n    1. 主要目标：Generate HTML with vtk.js to visualize volume rendering\n\nLoad from http://127.0.0.1:5000/dataset/airfoil_oneslice.vtp\nScalar Mapping:\nActivates the p scalar array for color encoding\nVisualization:\nRenders the colors and representation\npositions the camera to focus on the dataset bounds\n    2. 数据来源：\n    3. 关键API：待确定\n    \n    \n        The relevant VTK.js example information is as follows: 示例 'Rendering-VolumeMapper' (code):\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n</head>\n\n<body>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        //using volume actor and mapper for rendering\n        const vtkVolumeActor = vtk.Rendering.Core.vtkVolume;\n        const vtkVolumeMapper = vtk.Rendering.Core.vtkVolumeMapper;\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n\n        //init the render window\n        const fullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n示例 'ItkWasmVolume' (code):\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script src=\"https://unpkg.com/vtk.js/Sources/IO/Core/DataAccessHelper/LiteHttpDataAccessHelper.js\"></script>\n    <script>\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n        const vtkVolume = vtk.Rendering.Core.vtkVolume;\n        const vtkVolumeMapper = vtk.Rendering.Core.vtkVolumeMapper;\n        const vtkITKHelper = vtk.Common.DataModel.vtkITKHelper;\n        // const vtkLiteHttpDataAccessHelper = vtk.IO.Core.DataAccessHelper.vtkLiteHttpDataAccessHelper;\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n示例 'Rendering-ItkWasmVolume' (code):\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script src=\"https://unpkg.com/vtk.js/Sources/IO/Core/DataAccessHelper/LiteHttpDataAccessHelper.js\"></script>\n    <script>\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n        const vtkVolume = vtk.Rendering.Core.vtkVolume;\n        const vtkVolumeMapper = vtk.Rendering.Core.vtkVolumeMapper;\n        const vtkITKHelper = vtk.Common.DataModel.vtkITKHelper;\n        // const vtkLiteHttpDataAccessHelper = vtk.IO.Core.DataAccessHelper.vtkLiteHttpDataAccessHelper;\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n示例 'Rendering-Image' (code):\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    </style>\n</head>\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkSphereSource = vtk.Filters.Sources.vtkSphereSource;\n        const vtkSphereMapper = vtk.Rendering.Core.vtkSphereMapper;\n        //if we just use the vtkMapper, the results are volume rendering results\n        \n        //creating rendering window\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n        const mapper = vtkSphereMapper.newInstance();\n        const actor = vtkActor.newInstance();\n        \n        //creating sphereSource properties\n\n示例 'Filter-VolumeClip' (code):\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n</head>\n\n<body>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        //using volume actor and mapper for rendering\n        const vtkVolumeActor = vtk.Rendering.Core.vtkVolume;\n        const vtkVolumeMapper = vtk.Rendering.Core.vtkVolumeMapper;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n        const vtkPlane = vtk.Common.DataModel.vtkPlane;\n\n        //init the render window\n        const fullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n        //create clip plan\n        const clipPlane = vtkPlane.newInstance();\n        const clipPlaneNormal = [0, 0, 1]\n\n        User question: Generate HTML with vtk.js to visualize volume rendering\n\nLoad from http://127.0.0.1:5000/dataset/airfoil_oneslice.vtp\nScalar Mapping:\nActivates the p scalar array for color encoding\nVisualization:\nRenders the colors and representation\npositions the camera to focus on the dataset bounds\n        Please provide a detailed answer based on the above analysis and example information. Highlight how to meet the user's specific needs in the comments.\n        ",
        "evaluator_prompt": "# Role: An expert for vtk.js and web-based scientific visualization\n# Ground truth: [GROUND_TRUTH]\n# Generated code: [GENERATED_CODE]\nThe ground truth code is provided by [Ground truth], please give a score for [Generated code] according to its readability and correctness. The score is between 0 to 1, and explain reasons for giving this score.\n### Response Format\n```\n<Score>[SCORE]</Score>\n<Explanation>[EXPLANATION]</Explanation>\n### Response Example\n<Score>0.8</Score>\n<Explanation>The generated code is readable and correct.</Explanation> ",
        "generator": "chatGPT-4o",
        "evaluator": "qwen3-turbo",
        "score": "0.1",
        "workflow": {
            "inquiryExpansion": true,
            "rag": true,
            "iterativeLoop": false
        },
        "eval_id": "1748783181",
        "eval_user": "test",
        "export_time": "2025-06-01T13:21:10.768Z",
        "console_output": [],
        "eval_time": "2025-06-01 21:06:21",
        "evaluator_evaluation": "<Score>0.1</Score>\n<Explanation>The generated code is completely unrelated to the ground truth. The ground truth is a VTK.js visualization page for rendering an airfoil with surface LIC, while the generated code is a simple error page with a 401 error message. The generated code does not include any VTK.js-related code, does not attempt to render any 3D data, and is not structured as a scientific visualization application. It fails to meet both readability and correctness requirements for the given task.</Explanation>",
        "options": null
    },
    {
        "path": "IO-Filter-Rendering\\cutter\\rotor\\description.txt",
        "name": "description.txt",
        "prompt": "Generate HTML with vtk.js to visualize sliced rotor data\n\nLoad from http://127.0.0.1:5000/dataset/rotor.vti\n\nProcessing:\n- Slice ：Set as active scalar \"Pressure\"\n- Applies a Y-axis slice at 80% depth (setSlice, setSlicingMode).\nVisualization:\n- Maps pressure values to colors (blue→white→red gradient) and opacity (full opacity).\n- UI: Adds an orientation marker (XYZ axes) for spatial reference.\n6. No GUI controls required",
        "ground_truth": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Rotor Dataset Cutting Rendering</title>\n    <style>\n        body,\n        html {\n            margin: 0;\n            padding: 0;\n            width: 100%;\n            height: 100%;\n            overflow: hidden;\n        }\n\n        #renderer {\n            width: 100%;\n            height: 100%;\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkXMLImageDataReader = vtk.IO.XML.vtkXMLImageDataReader;\n        const vtkPlane = vtk.Common.DataModel.vtkPlane;\n        const vtkCutter = vtk.Filters.Core.vtkCutter;\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n\n        const fullScreenRenderWindow = vtkFullScreenRenderWindow.newInstance({\n            background: [0.1, 0.1, 0.1],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n        const reader = vtkXMLImageDataReader.newInstance();\n        reader.setUrl('http://127.0.0.1:5000/dataset/rotor_simplified.vti').then(() => {\n            reader.loadData().then(() => {\n                const imageData = reader.getOutputData(0);\n                imageData.getPointData().setActiveScalars('Pressure');\n\n                const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n                const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n\n                const imageMapper = vtkImageMapper.newInstance();\n                imageMapper.setInputData(imageData);\n                const dims = imageData.getDimensions();\n                imageMapper.setSlice(dims[1] * 0.8);\n                imageMapper.setSlicingMode(1); //(0:X, 1:Y, 2:Z)\n\n                const pressureArray = imageData.getPointData().getArrayByName('Pressure');\n                const [pMin, pMax] = pressureArray.getRange();\n                const colorTransferFunction = vtkColorTransferFunction.newInstance();\n                colorTransferFunction.addRGBPoint(pMin, 0.0, 0.0, 0.8);\n                colorTransferFunction.addRGBPoint((pMin + pMax) / 2, 1.0, 1.0, 1.0);\n                colorTransferFunction.addRGBPoint(pMax, 0.8, 0.0, 0.0);\n\n                // Add opacity transfer function\n                const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n                const opacityFunction = vtkPiecewiseFunction.newInstance();\n                opacityFunction.addPoint(pMin, 1.0);\n                opacityFunction.addPoint(pMax, 1.0);\n\n                const imageSlice = vtkImageSlice.newInstance();\n                imageSlice.setMapper(imageMapper);\n                imageSlice.getProperty().setRGBTransferFunction(0, colorTransferFunction);\n                imageSlice.getProperty().setPiecewiseFunction(0, opacityFunction);  // Set opacity function\n                imageSlice.getProperty().setScalarOpacity(0, opacityFunction);      // Set scalar opacity\n                imageSlice.getProperty().setUseLookupTableScalarRange(true);\n\n                renderer.addActor(imageSlice);\n\n                const axes = vtk.Rendering.Core.vtkAxesActor.newInstance();\n                const widget = vtk.Interaction.Widgets.vtkOrientationMarkerWidget.newInstance({\n                    actor: axes,\n                    interactor: renderWindow.getInteractor(),\n                });\n                widget.setEnabled(true);\n                widget.setViewportCorner(\n                    vtk.Interaction.Widgets.vtkOrientationMarkerWidget.Corners.BOTTOM_RIGHT\n                );\n                widget.setViewportSize(0.15);\n\n                renderer.resetCamera();\n                renderer.resetCameraClippingRange();\n                renderWindow.render();\n            });\n        });\n    </script>\n</body>\n\n</html>",
        "generated_code": "\n        <!DOCTYPE html>\n<html lang=\"zh-CN\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <title>error page</title>\n</head>\n\n<body>\n    <h1>error</h1>\n\n    <div class=\"error-box\">\n        <h2>error_message</h2>\n        <pre><code>Error code: 401 - {'error': {'message': '无效的令牌 (request id: 202506021347258730244931NA8P4mh)', 'type': 'new_api_error'}}</code></pre>\n    </div>\n</body>\n\n</html>\n        ",
        "generator_prompt": "Please use vtkjs to generate visualization code. The code should be in the form of a complete code wrapped only in HTML tags. Please add your thinking process as comments in the code to make it easier to understand the code logic.\n\nIn the code, use `<script src=\"https://unpkg.com/vtk.js\"></script>` as the library for visualization to implement the visualization function.\nPlease follow the following rules:\n1. The content of the answer is HTML code with vtkjs script(start from <!DOCTYPE html>), and if there is any explanation, it should be given in the form of comments.\n2. If the sample code is relevant to the user's requirements, implement the user's requirements based on the sample code.\n3. The answer should be based on the provided sample information, and do not fabricate functions that do not exist. \nPlease implement the code strictly according to the specific requirements of the user in the `<QUESTION></QUESTION>` tag. Ensure that the code logic is clear and straightforward, and generate the visualization-related code completely in accordance with the syntax specifications of vtkjs. \n<QUESTION>__QUESTION__</QUESTION>\n\n",
        "final_prompt": "\n    用户需求分析：\n    1. 主要目标：三维切片可视化 - 使用VTK.js在HTML中渲染切片的转子数据，并根据压力值映射颜色和不透明度，同时添加方向标记\n    2. 数据来源：http://127.0.0.1:5000/dataset/rotor.vti (VTI文件)\n    3. 关键API：vtkHttpDataSetReader, vtkImageSliceMapper, vtkImageSlice, vtkColorTransferFunction, vtkPiecewiseFunction, vtkOrientationMarkerWidget, vtkRenderer, vtkRenderWindow\n    \n    \n        The relevant VTK.js example information is as follows: 示例 'ManyRenderers' (code):\n<script src=\"https://unpkg.com/vtk.js\"></script>\n\n    <script>\n        // 假设vtk.js已经通过某种方式被加载到全局变量vtk中\n        // 例如，通过<script>标签在HTML中引入vtk.js，或者通过模块加载器\n\n        // 使用vtk命名空间来引用各个类\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkConeSource = vtk.Filters.Sources.vtkConeSource;\n        const vtkSphereSource = vtk.Filters.Sources.vtkSphereSource;\n        const vtkCubeSource = vtk.Filters.Sources.vtkCubeSource;\n        const vtkCylinderSource = vtk.Filters.Sources.vtkCylinderSource;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkRenderWindow = vtk.Rendering.Core.vtkRenderWindow;\n        const vtkRenderWindowInteractor = vtk.Rendering.Core.vtkRenderWindowInteractor;\n        const vtkRenderer = vtk.Rendering.Core.vtkRenderer;\n        const vtkInteractorStyleTrackballCamera = vtk.Interaction.Style.vtkInteractorStyleTrackballCamera;\n\n        // ----------------------------------------------------------------------------\n        // Meshes\n\n示例 'Rendering-ManyRenderers' (code):\n<script src=\"https://unpkg.com/vtk.js\"></script>\n\n    <script>\n        // 假设vtk.js已经通过某种方式被加载到全局变量vtk中\n        // 例如，通过<script>标签在HTML中引入vtk.js，或者通过模块加载器\n\n        // 使用vtk命名空间来引用各个类\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkConeSource = vtk.Filters.Sources.vtkConeSource;\n        const vtkSphereSource = vtk.Filters.Sources.vtkSphereSource;\n        const vtkCubeSource = vtk.Filters.Sources.vtkCubeSource;\n        const vtkCylinderSource = vtk.Filters.Sources.vtkCylinderSource;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkRenderWindow = vtk.Rendering.Core.vtkRenderWindow;\n        const vtkRenderWindowInteractor = vtk.Rendering.Core.vtkRenderWindowInteractor;\n        const vtkRenderer = vtk.Rendering.Core.vtkRenderer;\n        const vtkInteractorStyleTrackballCamera = vtk.Interaction.Style.vtkInteractorStyleTrackballCamera;\n\n        // ----------------------------------------------------------------------------\n        // Meshes\n\n示例 'IO-StickMapper' (code):\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n\n    <script>\n        // 使用vtk命名空间来引用各个类\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPlaneSource = vtk.Filters.Sources.vtkPlaneSource;\n        const vtkStickMapper = vtk.Rendering.Core.vtkStickMapper;\n\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldAssociations;\n\n示例 'ImageLabelOutline' (code):\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        // 使用vtk命名空间来引用各个类\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n        const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n        const vtkImageData = vtk.Common.DataModel.vtkImageData;\n        const vtkDataArray = vtk.Common.Core.vtkDataArray;\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n\n        // 使用vtk命名空间来引用常量\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldAssociations;\n\n示例 'Filter-Calculator' (code):\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        // using vtk namespace\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPlaneSource = vtk.Filters.Sources.vtkPlaneSource;\n        const vtkPolyData = vtk.Common.DataModel.vtkPolyData;\n        const vtkPoints = vtk.Common.Core.vtkPoints;\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldDataTypes;\n\n        User question: Generate HTML with vtk.js to visualize sliced rotor data\n\nLoad from http://127.0.0.1:5000/dataset/rotor.vti\n\nProcessing:\n- Slice ：Set as active scalar \"Pressure\"\n- Applies a Y-axis slice at 80% depth (setSlice, setSlicingMode).\nVisualization:\n- Maps pressure values to colors (blue→white→red gradient) and opacity (full opacity).\n- UI: Adds an orientation marker (XYZ axes) for spatial reference.\n6. No GUI controls required\n        Please provide a detailed answer based on the above analysis and example information. Highlight how to meet the user's specific needs in the comments.\n        ",
        "evaluator_prompt": "# Role: An expert for vtk.js and web-based scientific visualization\n# Ground truth: [GROUND_TRUTH]\n# Generated code: [GENERATED_CODE]\nThe ground truth code is provided by [Ground truth], please give a score for [Generated code] according to its readability and correctness. The score is between 0 to 1, and explain reasons for giving this score.\n### Response Format\n```\n<Score>[SCORE]</Score>\n<Explanation>[EXPLANATION]</Explanation>\n### Response Example\n<Score>0.8</Score>\n<Explanation>The generated code is readable and correct.</Explanation> ",
        "generator": "chatGPT-4o",
        "evaluator": "qwen3-turbo",
        "score": "0.0",
        "workflow": {
            "inquiryExpansion": true,
            "rag": true,
            "iterativeLoop": false
        },
        "eval_id": "1748843108",
        "eval_user": "test",
        "export_time": "2025-06-02T05:47:37.299Z",
        "console_output": [],
        "eval_time": "2025-06-02 13:45:08",
        "evaluator_evaluation": "<Score>0.0</Score>\n<Explanation>The generated code is completely unrelated to the ground truth. The ground truth is a vtk.js-based visualization application for rendering a rotor dataset, while the generated code is an HTML error page with no connection to scientific visualization or vtk.js. The code does not implement any of the required functionality and is not readable in the context of the task.</Explanation>",
        "options": null
    },
    {
        "path": "IO-Rendering\\colors_and_representation\\airfoil_oneslice\\description.txt",
        "name": "description.txt",
        "prompt": "Generate HTML with vtk.js to visualize volume rendering\n\nLoad from http://127.0.0.1:5000/dataset/airfoil_oneslice.vtp\nScalar Mapping:\nActivates the p scalar array for color encoding\nVisualization:\nRenders the colors and representation\npositions the camera to focus on the dataset bounds",
        "ground_truth": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>VTK.js Airfoil Rendering with Surface LIC</title>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <style>\n        body,\n        html {\n            margin: 0;\n            padding: 0;\n            width: 100%;\n            height: 100%;\n            overflow: hidden;\n        }\n\n        #renderer {\n            width: 100%;\n            height: 100%;\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script>\n        // Import required VTK.js classes\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkXMLPolyDataReader = vtk.IO.XML.vtkXMLPolyDataReader;\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkLookupTable = vtk.Common.Core.vtkLookupTable;\n        // Removed non-existent SurfaceLICMapper reference\n        // const vtkSurfaceLICMapper = vtk.Rendering.Core.vtkSurfaceLICMapper;\n\n        // Initialize rendering window\n        const fullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0.1, 0.1, 0.1],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n        // Create PolyData reader\n        const reader = vtkXMLPolyDataReader.newInstance();\n\n        // Set URL and load data\n        reader.setUrl('http://127.0.0.1:5000/dataset/airfoil_oneslice.vtp').then(() => {\n            reader.loadData().then(() => {\n                // Get loaded polygon data\n                const polyData = reader.getOutputData(0);\n\n                // Get scalar arrays from data\n                const pointData = polyData.getPointData();\n                const arrays = pointData.getArrays();\n                const scalarNames = [];\n                arrays.forEach((array, name) => {\n                    scalarNames.push(name);\n                });\n                console.log('Available scalars:', scalarNames);\n\n                // Select p as color scalar\n                polyData.getPointData().setActiveScalars('p');\n                // Get scalar range\n                const dataRange = polyData.getPointData().getScalars().getRange();\n                console.log('Data range:', dataRange);\n\n                const mapper = vtkMapper.newInstance();\n                mapper.setInputData(polyData);\n\n                // Create actor\n                const actor = vtkActor.newInstance();\n                actor.setMapper(mapper);\n                // Add actor to renderer\n                renderer.addActor(actor);\n\n                // Calculate data bounds and center point\n                const bounds = polyData.getBounds();\n                const center = [\n                    (bounds[0] + bounds[1]) / 2, // X center\n                    (bounds[2] + bounds[3]) / 2, // Y center\n                    (bounds[4] + bounds[5]) / 2, // Z center\n                ];\n\n                // Configure camera view - adjusted based on image\n                const camera = renderer.getActiveCamera();\n                camera.setFocalPoint(...center);\n                camera.setPosition(center[0], center[1], center[2] + 5);\n                camera.setViewUp(0, 1, 0);\n\n                // Reset camera and clipping range\n                renderer.resetCamera();\n                renderer.resetCameraClippingRange();\n\n                // Render scene\n                renderWindow.render();\n\n                // Add axis indicator\n                const axes = vtk.Rendering.Core.vtkAxesActor.newInstance();\n                const widget = vtk.Interaction.Widgets.vtkOrientationMarkerWidget.newInstance({\n                    actor: axes,\n                    interactor: renderWindow.getInteractor(),\n                });\n                widget.setEnabled(true);\n                widget.setViewportCorner(\n                    vtk.Interaction.Widgets.vtkOrientationMarkerWidget.Corners.BOTTOM_RIGHT\n                );\n                widget.setViewportSize(0.15);\n                widget.setMinPixelSize(100);\n                widget.setMaxPixelSize(300);\n            });\n        }).catch(error => {\n            console.error('Error loading dataset:', error);\n        });\n    </script>\n</body>\n\n</html>",
        "generated_code": "\n        <!DOCTYPE html>\n<html lang=\"zh-CN\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <title>error page</title>\n</head>\n\n<body>\n    <h1>error</h1>\n\n    <div class=\"error-box\">\n        <h2>error_message</h2>\n        <pre><code>Error code: 401 - {'error': {'message': '无效的令牌 (request id: 20250602135414739756092wVq53TKD)', 'type': 'new_api_error'}}</code></pre>\n    </div>\n</body>\n\n</html>\n        ",
        "generator_prompt": "Please use vtkjs to generate visualization code. The code should be in the form of a complete code wrapped only in HTML tags. Please add your thinking process as comments in the code to make it easier to understand the code logic.\n\nIn the code, use `<script src=\"https://unpkg.com/vtk.js\"></script>` as the library for visualization to implement the visualization function.\nPlease follow the following rules:\n1. The content of the answer is HTML code with vtkjs script(start from <!DOCTYPE html>), and if there is any explanation, it should be given in the form of comments.\n2. If the sample code is relevant to the user's requirements, implement the user's requirements based on the sample code.\n3. The answer should be based on the provided sample information, and do not fabricate functions that do not exist. \nPlease implement the code strictly according to the specific requirements of the user in the `<QUESTION></QUESTION>` tag. Ensure that the code logic is clear and straightforward, and generate the visualization-related code completely in accordance with the syntax specifications of vtkjs. \n<QUESTION>__QUESTION__</QUESTION>\n\n",
        "final_prompt": "\n    用户需求分析：\n    1. 主要目标：体积渲染可视化 - 使用VTK.js在HTML中生成体积渲染可视化，加载指定数据并应用标量映射以显示颜色和表示\n    2. 数据来源：http://127.0.0.1:5000/dataset/airfoil_oneslice.vtp (VTP文件)\n    3. 关键API：vtkVolumeMapper, vtkVolumeProperty, vtkVolume, vtkRenderer, vtkRenderWindow, vtkHttpDataSetReader\n    \n    \n        The relevant VTK.js example information is as follows: 示例 'ManyRenderers' (code):\n<script src=\"https://unpkg.com/vtk.js\"></script>\n\n    <script>\n        // 假设vtk.js已经通过某种方式被加载到全局变量vtk中\n        // 例如，通过<script>标签在HTML中引入vtk.js，或者通过模块加载器\n\n        // 使用vtk命名空间来引用各个类\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkConeSource = vtk.Filters.Sources.vtkConeSource;\n        const vtkSphereSource = vtk.Filters.Sources.vtkSphereSource;\n        const vtkCubeSource = vtk.Filters.Sources.vtkCubeSource;\n        const vtkCylinderSource = vtk.Filters.Sources.vtkCylinderSource;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkRenderWindow = vtk.Rendering.Core.vtkRenderWindow;\n        const vtkRenderWindowInteractor = vtk.Rendering.Core.vtkRenderWindowInteractor;\n        const vtkRenderer = vtk.Rendering.Core.vtkRenderer;\n        const vtkInteractorStyleTrackballCamera = vtk.Interaction.Style.vtkInteractorStyleTrackballCamera;\n\n        // ----------------------------------------------------------------------------\n        // Meshes\n\n示例 'Rendering-ManyRenderers' (code):\n<script src=\"https://unpkg.com/vtk.js\"></script>\n\n    <script>\n        // 假设vtk.js已经通过某种方式被加载到全局变量vtk中\n        // 例如，通过<script>标签在HTML中引入vtk.js，或者通过模块加载器\n\n        // 使用vtk命名空间来引用各个类\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkConeSource = vtk.Filters.Sources.vtkConeSource;\n        const vtkSphereSource = vtk.Filters.Sources.vtkSphereSource;\n        const vtkCubeSource = vtk.Filters.Sources.vtkCubeSource;\n        const vtkCylinderSource = vtk.Filters.Sources.vtkCylinderSource;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkRenderWindow = vtk.Rendering.Core.vtkRenderWindow;\n        const vtkRenderWindowInteractor = vtk.Rendering.Core.vtkRenderWindowInteractor;\n        const vtkRenderer = vtk.Rendering.Core.vtkRenderer;\n        const vtkInteractorStyleTrackballCamera = vtk.Interaction.Style.vtkInteractorStyleTrackballCamera;\n\n        // ----------------------------------------------------------------------------\n        // Meshes\n\n示例 'ImageLabelOutline' (code):\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        // 使用vtk命名空间来引用各个类\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n        const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n        const vtkImageData = vtk.Common.DataModel.vtkImageData;\n        const vtkDataArray = vtk.Common.Core.vtkDataArray;\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n\n        // 使用vtk命名空间来引用常量\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldAssociations;\n\n示例 'IO-StickMapper' (code):\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n\n    <script>\n        // 使用vtk命名空间来引用各个类\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPlaneSource = vtk.Filters.Sources.vtkPlaneSource;\n        const vtkStickMapper = vtk.Rendering.Core.vtkStickMapper;\n\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldAssociations;\n\n示例 'Filter-Calculator' (code):\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        // using vtk namespace\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPlaneSource = vtk.Filters.Sources.vtkPlaneSource;\n        const vtkPolyData = vtk.Common.DataModel.vtkPolyData;\n        const vtkPoints = vtk.Common.Core.vtkPoints;\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldDataTypes;\n\n        User question: Generate HTML with vtk.js to visualize volume rendering\n\nLoad from http://127.0.0.1:5000/dataset/airfoil_oneslice.vtp\nScalar Mapping:\nActivates the p scalar array for color encoding\nVisualization:\nRenders the colors and representation\npositions the camera to focus on the dataset bounds\n        Please provide a detailed answer based on the above analysis and example information. Highlight how to meet the user's specific needs in the comments.\n        ",
        "evaluator_prompt": "# Role: An expert for vtk.js and web-based scientific visualization\n# Ground truth: [GROUND_TRUTH]\n# Generated code: [GENERATED_CODE]\nThe ground truth code is provided by [Ground truth], please give a score for [Generated code] according to its readability and correctness. The score is between 0 to 1, and explain reasons for giving this score.\n### Response Format\n```\n<Score>[SCORE]</Score>\n<Explanation>[EXPLANATION]</Explanation>\n### Response Example\n<Score>0.8</Score>\n<Explanation>The generated code is readable and correct.</Explanation> ",
        "generator": "chatGPT-4o",
        "evaluator": "qwen3-turbo",
        "score": "0.1",
        "workflow": {
            "inquiryExpansion": true,
            "rag": true,
            "iterativeLoop": false
        },
        "eval_id": "1748843531",
        "eval_user": "test",
        "export_time": "2025-06-02T05:56:53.062Z",
        "console_output": [],
        "eval_time": "2025-06-02 13:52:11",
        "evaluator_evaluation": "<Score>0.1</Score>\n<Explanation>The generated code is completely unrelated to the ground truth. The ground truth is a VTK.js visualization page for rendering an airfoil with surface LIC, while the generated code is a simple HTML error page with no connection to scientific visualization or vtk.js. The code is not readable in the context of the task and contains no relevant functionality.</Explanation>",
        "options": null
    },
    {
        "path": "IO-Filter-Panel-Rendering\\cutter\\rotor\\description.txt",
        "name": "description.txt",
        "prompt": "Rotor Visualization Requirements:\n- Data: Load from http://127.0.0.1:5000/dataset/rotor_simplified.vti\n- Process: Calculate velocity magnitude (√(vx²+vy²+vz²))\n- Features: X/Y/Z slice control with position slider, color schemes (blue-red/rainbow/grayscale)\n- Implementation: vtk.js framework with responsive UI and async loading",
        "ground_truth": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Rotor数据集切割渲染</title>\n    <style>\n        body,\n        html {\n            margin: 0;\n            padding: 0;\n            width: 100%;\n            height: 100%;\n            overflow: hidden;\n        }\n\n        #renderer {\n            width: 100%;\n            height: 100%;\n        }\n        \n        /* 控制面板样式 */\n        .control-panel {\n            position: absolute;\n            top: 10px;\n            left: 10px;\n            background: rgba(255, 255, 255, 0.85);\n            padding: 12px;\n            border-radius: 6px;\n            z-index: 1000;\n            width: 260px;\n            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);\n        }\n        \n        .control-group {\n            margin-bottom: 10px;\n        }\n        \n        .control-group label {\n            display: block;\n            margin-bottom: 5px;\n            font-weight: bold;\n        }\n        \n        .slider-container {\n            display: flex;\n            align-items: center;\n        }\n        \n        .slider-container input[type=\"range\"] {\n            flex: 1;\n            margin-right: 10px;\n        }\n        \n        select {\n            width: 100%;\n        }\n        \n        button {\n            width: 100%;\n            background: #4CAF50;\n            color: #fff;\n            border: none;\n            padding: 8px 0;\n            border-radius: 4px;\n            font-size: 16px;\n            cursor: pointer;\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    \n    <!-- 控制面板 -->\n    <div class=\"control-panel\">\n        <h3 style=\"margin-top:0;\">Rotor数据切片控制</h3>\n        \n        <div class=\"control-group\">\n            <label>切片方向:</label>\n            <select id=\"sliceDirection\" style=\"width:100%;\">\n                <option value=\"0\">X轴</option>\n                <option value=\"1\">Y轴</option>\n                <option value=\"2\" selected>Z轴</option>\n            </select>\n        </div>\n        \n        <div class=\"control-group\">\n            <label>切片位置:</label>\n            <div class=\"slider-container\">\n                <input type=\"range\" id=\"slicePosition\" min=\"0\" max=\"100\" value=\"50\">\n                <span id=\"sliceValue\">50</span>\n            </div>\n        </div>\n        \n        <div class=\"control-group\">\n            <label>颜色映射:</label>\n            <select id=\"colorMap\" style=\"width:100%;\">\n                <option value=\"blue-red\" selected>蓝-红</option>\n                <option value=\"rainbow\">彩虹</option>\n                <option value=\"grayscale\">灰度</option>\n            </select>\n        </div>\n        \n        <button id=\"applyChanges\">应用更改</button>\n    </div>\n    \n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkXMLImageDataReader = vtk.IO.XML.vtkXMLImageDataReader;\n        const vtkPlane = vtk.Common.DataModel.vtkPlane;\n        const vtkCutter = vtk.Filters.Core.vtkCutter;\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n\n        // 声明全局变量以便于交互控制\n        let imageData, imageMapper, imageSlice, renderWindow, colorTransferFunction;\n        let dataRange = [0, 1]; // 默认数据范围\n\n        const fullScreenRenderWindow = vtkFullScreenRenderWindow.newInstance({\n            background: [0.1, 0.1, 0.1],\n        });\n        renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n        const reader = vtkXMLImageDataReader.newInstance();\n        reader.setUrl('../../../vtkjs-benchmark-datasets/rotor_simplified.vti').then(() => {\n            reader.loadData().then(() => {\n                imageData = reader.getOutputData(0);\n\n                // 获取速度矢量场\n                const velocityArray = imageData.getPointData().getArrayByName('Velocity');\n                const numPoints = imageData.getNumberOfPoints();\n                const magnitudeData = new Float64Array(numPoints);\n\n                // 计算速度大小（模）\n                for (let i = 0; i < numPoints; i++) {\n                    const vx = velocityArray.getData()[3 * i + 0];\n                    const vy = velocityArray.getData()[3 * i + 1];\n                    const vz = velocityArray.getData()[3 * i + 2];\n                    magnitudeData[i] = Math.sqrt(vx * vx + vy * vy + vz * vz);\n                }\n\n                // 创建标量字段\n                const vtkDataArray = vtk.Common.Core.vtkDataArray;\n                const magnitudeVtkArray = vtkDataArray.newInstance({\n                    numberOfComponents: 1,\n                    values: magnitudeData,\n                    name: 'velocityMagnitude',\n                });\n                imageData.getPointData().addArray(magnitudeVtkArray);\n                imageData.getPointData().setActiveScalars('velocityMagnitude');\n                \n                // 获取数据范围\n                dataRange = magnitudeVtkArray.getRange();\n\n                // 计算数据集边界的中心\n                const bounds = imageData.getBounds();\n                const center = [\n                    (bounds[0] + bounds[1]) / 2,\n                    (bounds[2] + bounds[3]) / 2,\n                    (bounds[4] + bounds[5]) / 2,\n                ];\n                \n                // 获取数据维度并更新控制面板\n                const dimensions = imageData.getDimensions();\n                updateSliceControls(2, dimensions); // 默认Z轴\n\n                const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n                const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n\n                imageMapper = vtkImageMapper.newInstance();\n                imageMapper.setInputData(imageData);\n                imageMapper.setSlice(Math.floor((dimensions[2]) / 2));\n                imageMapper.setSlicingMode(2); // 2表示Z轴切片 (0:X, 1:Y, 2:Z)\n\n                colorTransferFunction = vtkColorTransferFunction.newInstance();\n                updateColorMap('blue-red');\n\n                // 添加不透明度传输函数\n                const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n                const opacityFunction = vtkPiecewiseFunction.newInstance();\n                opacityFunction.addPoint(dataRange[0], 1.0);\n                opacityFunction.addPoint(dataRange[1], 1.0);\n\n                imageSlice = vtkImageSlice.newInstance();\n                imageSlice.setMapper(imageMapper);\n                imageSlice.getProperty().setRGBTransferFunction(0, colorTransferFunction);\n                imageSlice.getProperty().setPiecewiseFunction(0, opacityFunction);  // 设置不透明度函数\n                imageSlice.getProperty().setScalarOpacity(0, opacityFunction);      // 设置标量不透明度\n                imageSlice.getProperty().setInterpolationTypeToLinear();\n\n                renderer.addActor(imageSlice);\n\n                const camera = renderer.getActiveCamera();\n                camera.setFocalPoint(...center);\n                camera.setPosition(center[0] + 300, center[1] + 200, center[2] + 200);\n                camera.setViewUp(0, 0, 1);\n                renderer.resetCameraClippingRange();\n                renderWindow.render();\n                renderer.resetCamera();\n                renderWindow.render();\n\n                const axes = vtk.Rendering.Core.vtkAxesActor.newInstance();\n                const widget = vtk.Interaction.Widgets.vtkOrientationMarkerWidget.newInstance({\n                    actor: axes,\n                    interactor: renderWindow.getInteractor(),\n                });\n                widget.setEnabled(true);\n                widget.setViewportCorner(\n                    vtk.Interaction.Widgets.vtkOrientationMarkerWidget.Corners.BOTTOM_RIGHT\n                );\n                widget.setViewportSize(0.15);\n                widget.setMinPixelSize(100);\n                widget.setMaxPixelSize(300);\n\n                const interactor = renderWindow.getInteractor();\n                interactor.start();\n            });\n        });\n        \n        // 更新切片控制器\n        function updateSliceControls(slicingMode, dimensions) {\n            const slider = document.getElementById('slicePosition');\n            const sliceValue = document.getElementById('sliceValue');\n            const maxSlice = dimensions[slicingMode] - 1;\n            const midSlice = Math.floor(maxSlice / 2);\n            \n            slider.min = 0;\n            slider.max = maxSlice;\n            slider.value = midSlice;\n            sliceValue.textContent = midSlice;\n        }\n        \n        // 更新颜色映射\n        function updateColorMap(mapType) {\n            colorTransferFunction.removeAllPoints();\n            \n            switch(mapType) {\n                case 'blue-red':\n                    colorTransferFunction.addRGBPoint(dataRange[0], 0.0, 0.0, 0.5);\n                    colorTransferFunction.addRGBPoint(dataRange[0] + (dataRange[1] - dataRange[0]) * 0.5, 0.0, 0.5, 1.0);\n                    colorTransferFunction.addRGBPoint(dataRange[1], 1.0, 0.0, 0.0);\n                    break;\n                case 'rainbow':\n                    colorTransferFunction.addRGBPoint(dataRange[0], 0.0, 0.0, 1.0);\n                    colorTransferFunction.addRGBPoint(dataRange[0] + (dataRange[1] - dataRange[0]) * 0.25, 0.0, 1.0, 1.0);\n                    colorTransferFunction.addRGBPoint(dataRange[0] + (dataRange[1] - dataRange[0]) * 0.5, 0.0, 1.0, 0.0);\n                    colorTransferFunction.addRGBPoint(dataRange[0] + (dataRange[1] - dataRange[0]) * 0.75, 1.0, 1.0, 0.0);\n                    colorTransferFunction.addRGBPoint(dataRange[1], 1.0, 0.0, 0.0);\n                    break;\n                case 'grayscale':\n                    colorTransferFunction.addRGBPoint(dataRange[0], 0.0, 0.0, 0.0);\n                    colorTransferFunction.addRGBPoint(dataRange[1], 1.0, 1.0, 1.0);\n                    break;\n            }\n            \n            if (imageSlice) {\n                imageSlice.getProperty().setRGBTransferFunction(0, colorTransferFunction);\n                renderWindow.render();\n            }\n        }\n        \n        // 事件监听器\n        document.getElementById('sliceDirection').addEventListener('change', function() {\n            if (!imageData || !imageMapper) return;\n            \n            const slicingMode = parseInt(this.value);\n            const dimensions = imageData.getDimensions();\n            \n            updateSliceControls(slicingMode, dimensions);\n            imageMapper.setSlicingMode(slicingMode);\n            imageMapper.setSlice(Math.floor(dimensions[slicingMode] / 2));\n            \n            renderWindow.render();\n        });\n        \n        document.getElementById('slicePosition').addEventListener('input', function() {\n            document.getElementById('sliceValue').textContent = this.value;\n        });\n        \n        document.getElementById('colorMap').addEventListener('change', function() {\n            updateColorMap(this.value);\n        });\n        \n        document.getElementById('applyChanges').addEventListener('click', function() {\n            if (!imageMapper) return;\n            \n            const slicePos = parseInt(document.getElementById('slicePosition').value);\n            imageMapper.setSlice(slicePos);\n            \n            renderWindow.render();\n        });\n    </script>\n</body>\n\n</html>",
        "generated_code": "```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\" />\n  <title>VTI Rotor Visualization with vtk.js</title>\n  <style>\n    body, html {\n      margin: 0;\n      padding: 0;\n      height: 100%;\n      overflow: hidden;\n    }\n    #renderArea {\n      display: flex;\n      flex-direction: row;\n      height: 100%;\n    }\n    #view {\n      flex: 1;\n      position: relative;\n    }\n    .slider-container {\n      width: 200px;\n      margin: 10px;\n      font-family: sans-serif;\n    }\n    .slider-label {\n      font-weight: bold;\n    }\n    input[type=range] {\n      width: 100%;\n    }\n  </style>\n</head>\n<body>\n\n<!-- Container for visualization and UI controls -->\n<div id=\"renderArea\">\n  <div id=\"view\"></div>\n  <div class=\"slider-container\">\n    <div>\n      <label class=\"slider-label\">X Slice Position</label>\n      <input type=\"range\" id=\"xSlider\" min=\"0\" max=\"100\" value=\"50\" />\n    </div>\n    <div>\n      <label class=\"slider-label\">Y Slice Position</label>\n      <input type=\"range\" id=\"ySlider\" min=\"0\" max=\"100\" value=\"50\" />\n    </div>\n    <div>\n      <label class=\"slider-label\">Z Slice Position</label>\n      <input type=\"range\" id=\"zSlider\" min=\"0\" max=\"100\" value=\"50\" />\n    </div>\n    <div>\n      <label class=\"slider-label\">Color Scheme</label>\n      <select id=\"colorScheme\">\n        <option value=\"blue-red\">Blue-Red</option>\n        <option value=\"rainbow\">Rainbow</option>\n        <option value=\"grayscale\">Grayscale</option>\n      </select>\n    </div>\n  </div>\n</div>\n\n<!-- Load vtk.js from CDN -->\n<script src=\"https://unpkg.com/vtk.js\"></script>\n<script>\n  // 引入所需的 VTK 类\n  const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n  const vtkHttpDataSetReader = vtk.IO.Core.vtkHttpDataSetReader;\n  const vtkImageShiftScale = vtk.Filters.General.vtkImageShiftScale;\n  const vtkImageSliceMapper = vtk.Rendering.Core.vtkImageSliceMapper;\n  const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n  const vtkRenderer = vtk.Rendering.Core.vtkRenderer;\n  const vtkRenderWindow = vtk.Rendering.Core.vtkRenderWindow;\n  const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n  const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n\n  const vtkCalculator = vtk.Filters.General.vtkCalculator;\n\n  // 初始化渲染器和交互器\n  const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({\n    rootContainer: document.body,\n    renderWindowParent: document.getElementById('view'),\n  });\n\n  const renderer = vtkRenderer.newInstance();\n  const renderWindow = fullScreenRenderer.getRenderWindow();\n\n  renderWindow.addRenderer(renderer);\n  fullScreenRenderer.setResizeCallback(() => {}); // 自适应窗口大小\n\n  // 加载 VTI 数据（异步）\n  const reader = vtkHttpDataSetReader.newInstance({ fetchGzip: true });\n  reader.setUrl('http://127.0.0.1:5000/dataset/rotor_simplified.vti').then(() => {\n    reader.update();\n\n    const imageData = reader.getOutputData();\n\n    // 计算速度大小：sqrt(vx^2 + vy^2 + vz^2)\n    const calculator = vtkCalculator.newInstance();\n    calculator.setInputData(imageData);\n    calculator.setFormula({\n      // 假设速度场的向量数据名称为 \"velocity\"\n      getArrays: (inDatasets) => ({\n        input: [{ location: 'PointData', name: 'velocity' }],\n        output: [{ location: 'PointData', name: 'velocityMagnitude', dataType: 'Float32Array', numberOfComponents: 1 }],\n      }),\n      evaluate: (arraysIn, arraysOut) => {\n        const velocity = arraysIn[0].getData();\n        const magnitude = new Float32Array(arraysIn[0].getNumberOfValues() / 3);\n        for (let i = 0; i < magnitude.length; i++) {\n          const x = velocity[i * 3];\n          const y = velocity[i * 3 + 1];\n          const z = velocity[i * 3 + 2];\n          magnitude[i] = Math.sqrt(x * x + y * y + z * z);\n        }\n        arraysOut[0].getData().set(magnitude);\n      },\n    });\n    calculator.update();\n    const magImageData = calculator.getOutputData();\n\n    // 创建三个切片分别对应 X/Y/Z 方向\n    const slices = ['x', 'y', 'z'].map((axis) => {\n      const mapper = vtkImageSliceMapper.newInstance();\n      mapper.setInputData(magImageData);\n      mapper.setSliceAtFocalPoint(true);\n      mapper.setOrientationToAxis(['x','y','z'].indexOf(axis));\n\n      const slice = vtkImageSlice.newInstance();\n      slice.setMapper(mapper);\n\n      return { mapper, slice };\n    });\n\n    // 添加所有切片到场景中\n    slices.forEach(({ slice }) => renderer.addActor(slice));\n\n    // 设置颜色映射函数\n    const ctfun = vtkColorTransferFunction.newInstance();\n    const setCTF = (scheme) => {\n      ctfun.removeAllPoints();\n      if (scheme === 'blue-red') {\n        ctfun.addRGBPoint(0, 0, 0, 1);\n        ctfun.addRGBPoint(1, 1, 0, 0);\n      } else if (scheme === 'rainbow') {\n        ctfun.addRGBPoint(0, 0, 0, 1);\n        ctfun.addRGBPoint(0.3, 0, 1, 1);\n        ctfun.addRGBPoint(0.6, 1, 1, 0);\n        ctfun.addRGBPoint(1, 1, 0, 0);\n      } else if (scheme === 'grayscale') {\n        ctfun.addRGBPoint(0, 0, 0, 0);\n        ctfun.addRGBPoint(1, 1, 1, 1);\n      }\n      slices.forEach(({ slice }) => slice.getProperty().setColorTransferFunction(ctfun));\n      renderWindow.render();\n    };\n\n    // 初始颜色方案\n    setCTF('blue-red');\n\n    // 同步切片位置与滑块\n    const updateSlices = () => {\n      const dims = magImageData.getDimensions();\n      const x = Math.floor(dims[0] * (document.getElementById('xSlider').value / 100));\n      const y = Math.floor(dims[1] * (document.getElementById('ySlider').value / 100));\n      const z = Math.floor(dims[2] * (document.getElementById('zSlider').value / 100));\n      slices[0].mapper.setSliceNumber(x);\n      slices[1].mapper.setSliceNumber(y);\n      slices[2].mapper.setSliceNumber(z);\n      renderWindow.render();\n    };\n\n    // 绑定事件监听器\n    ['xSlider', 'ySlider', 'zSlider'].forEach(id =>\n      document.getElementById(id).addEventListener('input', updateSlices)\n    );\n\n    document.getElementById('colorScheme').addEventListener('change', (e) => {\n      setCTF(e.target.value);\n    });\n\n    // 初始渲染\n    renderer.resetCamera();\n    renderWindow.render();\n  }).catch((err) => {\n    console.error('Failed to load dataset:', err);\n  });\n</script>\n</body>\n</html>\n```\n\n---\n\n### 🔍 注释说明（代码逻辑解释）：\n\n#### ✅ 数据加载：\n- 使用 `vtkHttpDataSetReader` 异步加载本地服务器上的 `rotor_simplified.vti` 文件。\n- 使用 `.setUrl(...)` 并调用 `.update()` 来获取数据。\n\n#### ✅ 速度大小计算：\n- 使用 `vtkCalculator` 滤波器对每个点的速度向量 `(vx, vy, vz)` 进行平方和开根号运算，生成新的标量字段 `velocityMagnitude`。\n\n#### ✅ 多切片显示：\n- 分别创建了 X/Y/Z 三个方向的切片 (`vtkImageSlice`)，并使用 `vtkImageSliceMapper` 控制其显示。\n- 每个切片通过设置不同的 `orientation` 来表示不同轴向。\n\n#### ✅ 颜色映射控制：\n- 使用 `vtkColorTransferFunction` 实现三种配色方案（蓝红、彩虹、灰度），根据用户选择动态更新切片颜色。\n\n#### ✅ 滑动条控制切片位置：\n- 每个滑块绑定 `input` 事件，实时调整对应轴的切片位置，并重新渲染视图。\n\n#### ✅ 渲染初始化：\n- 使用 `vtkFullScreenRenderWindow` 构建一个全屏渲染环境，适配响应式布局。\n- 调用 `resetCamera()` 确保初始视角正确。\n\n---\n\n该实现严格基于用户需求和提供的示例信息，完整支持以下功能：\n- ✅ 异步加载 `.vti` 数据；\n- ✅ 动态计算速度大小；\n- ✅ 支持 X/Y/Z 三轴切片；\n- ✅ 提供颜色方案切换；\n- ✅ 响应式 UI 和交互设计。",
        "generator_prompt": "Please use vtkjs to generate visualization code. The code should be in the form of a complete code wrapped only in HTML tags. Please add your thinking process as comments in the code to make it easier to understand the code logic.\n\nIn the code, use `<script src=\"https://unpkg.com/vtk.js\"></script>` as the library for visualization to implement the visualization function.\nPlease follow the following rules:\n1. The content of the answer is HTML code with vtkjs script(start from <!DOCTYPE html>), and if there is any explanation, it should be given in the form of comments.\n2. If the sample code is relevant to the user's requirements, implement the user's requirements based on the sample code.\n3. The answer should be based on the provided sample information, and do not fabricate functions that do not exist. \nPlease implement the code strictly according to the specific requirements of the user in the `<QUESTION></QUESTION>` tag. Ensure that the code logic is clear and straightforward, and generate the visualization-related code completely in accordance with the syntax specifications of vtkjs. \n<QUESTION>__QUESTION__</QUESTION>\n\n",
        "final_prompt": "\n    用户需求分析：\n    1. 主要目标：旋转体可视化 - 使用VTK.js加载旋转体数据并计算速度大小，提供X/Y/Z切片控制和颜色方案选择\n    2. 数据来源：rotor_simplified.vti (VTI文件)\n    3. 关键API：vtkHttpDataSource, vtkImageShiftScale, vtkImageSliceMapper, vtkImageSlice, vtkSliderWidget, vtkColorTransferFunction, vtkRenderWindow, vtkRenderer\n    \n    \n        The relevant VTK.js example information is as follows: 示例 'ManyRenderers' (code):\n<script src=\"https://unpkg.com/vtk.js\"></script>\n\n    <script>\n        // 假设vtk.js已经通过某种方式被加载到全局变量vtk中\n        // 例如，通过<script>标签在HTML中引入vtk.js，或者通过模块加载器\n\n        // 使用vtk命名空间来引用各个类\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkConeSource = vtk.Filters.Sources.vtkConeSource;\n        const vtkSphereSource = vtk.Filters.Sources.vtkSphereSource;\n        const vtkCubeSource = vtk.Filters.Sources.vtkCubeSource;\n        const vtkCylinderSource = vtk.Filters.Sources.vtkCylinderSource;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkRenderWindow = vtk.Rendering.Core.vtkRenderWindow;\n        const vtkRenderWindowInteractor = vtk.Rendering.Core.vtkRenderWindowInteractor;\n        const vtkRenderer = vtk.Rendering.Core.vtkRenderer;\n        const vtkInteractorStyleTrackballCamera = vtk.Interaction.Style.vtkInteractorStyleTrackballCamera;\n\n        // ----------------------------------------------------------------------------\n        // Meshes\n\n示例 'Rendering-ManyRenderers' (code):\n<script src=\"https://unpkg.com/vtk.js\"></script>\n\n    <script>\n        // 假设vtk.js已经通过某种方式被加载到全局变量vtk中\n        // 例如，通过<script>标签在HTML中引入vtk.js，或者通过模块加载器\n\n        // 使用vtk命名空间来引用各个类\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkConeSource = vtk.Filters.Sources.vtkConeSource;\n        const vtkSphereSource = vtk.Filters.Sources.vtkSphereSource;\n        const vtkCubeSource = vtk.Filters.Sources.vtkCubeSource;\n        const vtkCylinderSource = vtk.Filters.Sources.vtkCylinderSource;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkRenderWindow = vtk.Rendering.Core.vtkRenderWindow;\n        const vtkRenderWindowInteractor = vtk.Rendering.Core.vtkRenderWindowInteractor;\n        const vtkRenderer = vtk.Rendering.Core.vtkRenderer;\n        const vtkInteractorStyleTrackballCamera = vtk.Interaction.Style.vtkInteractorStyleTrackballCamera;\n\n        // ----------------------------------------------------------------------------\n        // Meshes\n\n示例 'IO-StickMapper' (code):\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n\n    <script>\n        // 使用vtk命名空间来引用各个类\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPlaneSource = vtk.Filters.Sources.vtkPlaneSource;\n        const vtkStickMapper = vtk.Rendering.Core.vtkStickMapper;\n\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldAssociations;\n\n示例 'ImageLabelOutline' (code):\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        // 使用vtk命名空间来引用各个类\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n        const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n        const vtkImageData = vtk.Common.DataModel.vtkImageData;\n        const vtkDataArray = vtk.Common.Core.vtkDataArray;\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n\n        // 使用vtk命名空间来引用常量\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldAssociations;\n\n示例 'Filter-Calculator' (code):\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        // using vtk namespace\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPlaneSource = vtk.Filters.Sources.vtkPlaneSource;\n        const vtkPolyData = vtk.Common.DataModel.vtkPolyData;\n        const vtkPoints = vtk.Common.Core.vtkPoints;\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldDataTypes;\n\n        User question: Rotor Visualization Requirements:\n- Data: Load from http://127.0.0.1:5000/dataset/rotor_simplified.vti\n- Process: Calculate velocity magnitude (√(vx²+vy²+vz²))\n- Features: X/Y/Z slice control with position slider, color schemes (blue-red/rainbow/grayscale)\n- Implementation: vtk.js framework with responsive UI and async loading\n        Please provide a detailed answer based on the above analysis and example information. Highlight how to meet the user's specific needs in the comments.\n        ",
        "evaluator_prompt": "# Role: An expert for vtk.js and web-based scientific visualization\n# Ground truth: [GROUND_TRUTH]\n# Generated code: [GENERATED_CODE]\nThe ground truth code is provided by [Ground truth], please give a score for [Generated code] according to its readability and correctness. The score is between 0 to 1, and explain reasons for giving this score.\n### Response Format\n```\n<Score>[SCORE]</Score>\n<Explanation>[EXPLANATION]</Explanation>\n### Response Example\n<Score>0.8</Score>\n<Explanation>The generated code is readable and correct.</Explanation> ",
        "generator": "qwen3-plus",
        "evaluator": "qwen3-turbo",
        "score": "0.7",
        "workflow": {
            "inquiryExpansion": true,
            "rag": true,
            "iterativeLoop": false
        },
        "eval_id": "1748949844",
        "eval_user": "test",
        "export_time": null,
        "console_output": null,
        "eval_time": "2025-06-03 19:24:04",
        "evaluator_evaluation": "<Score>0.7</Score>\n<Explanation>The generated code is mostly correct and readable, but it has some issues compared to the ground truth. It lacks proper control panel styling and structure, and the slicing functionality is simplified by using three separate sliders for X/Y/Z axes instead of a single direction selector. Additionally, the color mapping logic is less detailed and doesn't fully replicate the original's dynamic range handling. However, it correctly uses vtk.js and implements the core visualization features.</Explanation>",
        "options": null
    },
    {
        "path": "IO-Filter-Rendering\\cutter\\rotor\\description.txt",
        "name": "description.txt",
        "prompt": "Generate HTML with vtk.js to visualize sliced rotor data\n\nLoad from http://127.0.0.1:5000/dataset/rotor.vti\n\nProcessing:\n- Slice ：Set as active scalar \"Pressure\"\n- Applies a Y-axis slice at 80% depth (setSlice, setSlicingMode).\nVisualization:\n- Maps pressure values to colors (blue→white→red gradient) and opacity (full opacity).\n- UI: Adds an orientation marker (XYZ axes) for spatial reference.\n6. No GUI controls required",
        "ground_truth": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Rotor Dataset Cutting Rendering</title>\n    <style>\n        body,\n        html {\n            margin: 0;\n            padding: 0;\n            width: 100%;\n            height: 100%;\n            overflow: hidden;\n        }\n\n        #renderer {\n            width: 100%;\n            height: 100%;\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkXMLImageDataReader = vtk.IO.XML.vtkXMLImageDataReader;\n        const vtkPlane = vtk.Common.DataModel.vtkPlane;\n        const vtkCutter = vtk.Filters.Core.vtkCutter;\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n\n        const fullScreenRenderWindow = vtkFullScreenRenderWindow.newInstance({\n            background: [0.1, 0.1, 0.1],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n        const reader = vtkXMLImageDataReader.newInstance();\n        reader.setUrl('http://127.0.0.1:5000/dataset/rotor_simplified.vti').then(() => {\n            reader.loadData().then(() => {\n                const imageData = reader.getOutputData(0);\n                imageData.getPointData().setActiveScalars('Pressure');\n\n                const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n                const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n\n                const imageMapper = vtkImageMapper.newInstance();\n                imageMapper.setInputData(imageData);\n                const dims = imageData.getDimensions();\n                imageMapper.setSlice(dims[1] * 0.8);\n                imageMapper.setSlicingMode(1); //(0:X, 1:Y, 2:Z)\n\n                const pressureArray = imageData.getPointData().getArrayByName('Pressure');\n                const [pMin, pMax] = pressureArray.getRange();\n                const colorTransferFunction = vtkColorTransferFunction.newInstance();\n                colorTransferFunction.addRGBPoint(pMin, 0.0, 0.0, 0.8);\n                colorTransferFunction.addRGBPoint((pMin + pMax) / 2, 1.0, 1.0, 1.0);\n                colorTransferFunction.addRGBPoint(pMax, 0.8, 0.0, 0.0);\n\n                // Add opacity transfer function\n                const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n                const opacityFunction = vtkPiecewiseFunction.newInstance();\n                opacityFunction.addPoint(pMin, 1.0);\n                opacityFunction.addPoint(pMax, 1.0);\n\n                const imageSlice = vtkImageSlice.newInstance();\n                imageSlice.setMapper(imageMapper);\n                imageSlice.getProperty().setRGBTransferFunction(0, colorTransferFunction);\n                imageSlice.getProperty().setPiecewiseFunction(0, opacityFunction);  // Set opacity function\n                imageSlice.getProperty().setScalarOpacity(0, opacityFunction);      // Set scalar opacity\n                imageSlice.getProperty().setUseLookupTableScalarRange(true);\n\n                renderer.addActor(imageSlice);\n\n                const axes = vtk.Rendering.Core.vtkAxesActor.newInstance();\n                const widget = vtk.Interaction.Widgets.vtkOrientationMarkerWidget.newInstance({\n                    actor: axes,\n                    interactor: renderWindow.getInteractor(),\n                });\n                widget.setEnabled(true);\n                widget.setViewportCorner(\n                    vtk.Interaction.Widgets.vtkOrientationMarkerWidget.Corners.BOTTOM_RIGHT\n                );\n                widget.setViewportSize(0.15);\n\n                renderer.resetCamera();\n                renderer.resetCameraClippingRange();\n                renderWindow.render();\n            });\n        });\n    </script>\n</body>\n\n</html>",
        "generated_code": "```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\" />\n  <title>VTK.js Rotor Visualization</title>\n  <style>\n    body {\n      margin: 0;\n      padding: 0;\n    }\n    #rendererContainer {\n      width: 100%;\n      height: 100vh;\n    }\n  </style>\n</head>\n<body>\n  <!-- Container for the VTK renderer -->\n  <div id=\"rendererContainer\"></div>\n\n  <!-- Load vtk.js from CDN -->\n  <script src=\"https://unpkg.com/vtk.js\"></script>\n\n  <script>\n    // Import necessary modules from vtk.js namespace\n    const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n    const vtkHttpDataSetReader = vtk.IO.Core.vtkHttpDataSetReader;\n    const vtkImageResliceMapper = vtk.Rendering.Core.vtkImageSliceMapper;\n    const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n    const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n    const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n    const vtkAxesActor = vtk.Rendering.Core.vtkAxesActor;\n    const vtkRenderer = vtk.Rendering.Core.vtkRenderer;\n\n    // Create a full-screen render window and attach it to the DOM container\n    const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({\n      background: [0, 0, 0],\n      rootContainer: document.body,\n      containerStyle: { height: '100%' },\n      renderWindowSize: { width: window.innerWidth, height: window.innerHeight },\n      listenWindowResize: true,\n    });\n\n    // Get the renderer and render window\n    const renderer = fullScreenRenderer.getRenderer();\n    const renderWindow = fullScreenRenderer.getRenderWindow();\n\n    // Create mapper and slice actor\n    const mapper = vtkImageResliceMapper.newInstance();\n    const slice = vtkImageSlice.newInstance();\n    slice.setMapper(mapper);\n\n    // Set up color transfer function for pressure (blue -> white -> red)\n    const cfun = vtkColorTransferFunction.newInstance();\n    cfun.addRGBPoint(0.0, 0.0, 0.0, 1.0);   // Blue\n    cfun.addRGBPoint(0.5, 1.0, 1.0, 1.0);   // White\n    cfun.addRGBPoint(1.0, 1.0, 0.0, 0.0);   // Red\n\n    // Set up opacity transfer function (full opacity everywhere)\n    const ofun = vtkPiecewiseFunction.newInstance();\n    ofun.addPoint(0.0, 1.0);\n    ofun.addPoint(1.0, 1.0);\n\n    // Apply color and opacity mappings to the slice property\n    const prop = slice.getProperty();\n    prop.setRGBTransferFunction(0, cfun);\n    prop.setScalarOpacity(0, ofun);\n    prop.setInterpolationTypeToNearest(); // Nearest neighbor interpolation for clean slicing\n\n    // Set active scalar to \"Pressure\"\n    mapper.setInputArrayToProcess(0, 'Pressure');\n\n    // Set slicing mode to Y-axis and position at 80% depth\n    mapper.setSlicingMode(vtkImageResliceMapper.SlicingMode.Y_AXIS);\n    mapper.setSlice(0.8 * 255); // Assuming normalized slice index; adjust based on actual dataset dimensions if needed\n\n    // Add slice to the scene\n    renderer.addActor(slice);\n\n    // Load the dataset using vtkHttpDataSetReader\n    const reader = vtkHttpDataSetReader.newInstance({ fetchGzip: true });\n    reader.setUrl('http://127.0.0.1:5000/dataset/rotor.vti').then(() => {\n      reader.loadData().then(() => {\n        const imageData = reader.getOutputData();\n        mapper.setInputData(imageData);\n        renderWindow.render();\n      });\n    });\n\n    // Add orientation marker (XYZ axes) to help user understand spatial orientation\n    const axesActor = vtkAxesActor.newInstance();\n    const axesWidget = vtk.Interaction.Widgets.vtkOrientationMarkerWidget.newInstance({\n      actor: axesActor,\n      interactor: renderWindow.getInteractor(),\n    });\n    axesWidget.setViewportCorner(VtkInteractions.Enums.ViewportCorner.BOTTOM_LEFT);\n    axesWidget.setInteractor(renderWindow.getInteractor());\n    axesWidget.setEnabled(true);\n\n    // Initial render\n    renderWindow.render();\n  </script>\n</body>\n</html>\n```\n\n---\n\n### 📌 **Explanation of How This Meets User Requirements**\n\n#### ✅ **1.三维切片可视化**\n- 使用 `vtkImageResliceMapper` 和 `vtkImageSlice` 实现图像数据的切片显示。\n- 设置 `setSlicingMode(vtkImageResliceMapper.SlicingMode.Y_AXIS)` 来沿 Y 轴切割。\n- 切片位置设置为 `80%` 深度：`mapper.setSlice(0.8 * 255)`（根据数据集范围可能需要调整）。\n\n#### ✅ **2. 数据来源**\n- 使用 `vtkHttpDataSetReader` 从指定 URL 加载 `.vti` 文件：\n  ```js\n  reader.setUrl('http://127.0.0.1:5000/dataset/rotor.vti');\n  ```\n\n#### ✅ **3. 压力值映射颜色与透明度**\n- 使用 `vtkColorTransferFunction` 创建从蓝色到白色再到红色的渐变色，对应压力分布。\n- 使用 `vtkPiecewiseFunction` 将所有值设置为完全不透明（opacity = 1）。\n\n#### ✅ **4. 添加方向标记**\n- 使用 `vtkAxesActor` 创建 XYZ 坐标轴。\n- 使用 `vtkOrientationMarkerWidget` 将其嵌入到渲染窗口中，帮助用户理解空间方向。\n\n#### ✅ **5. 不使用 GUI 控件**\n- 页面无额外控件，仅展示静态三维切片视图。\n\n#### ✅ **6. 使用关键 API**\n- `vtkHttpDataSetReader`：用于加载远程 `.vti` 数据。\n- `vtkImageResliceMapper`, `vtkImageSlice`：实现切片可视化。\n- `vtkColorTransferFunction`, `vtkPiecewiseFunction`：用于映射标量值到颜色和透明度。\n- `vtkAxesActor`：用于添加方向参考。\n- `vtkRenderer`, `vtkRenderWindow`：负责渲染管理。\n\n---\n\n> 💡 **注意**：如果实际数据的 Y 轴范围不是 `[0, 255]`，请根据数据集的实际维度调整 `setSlice()` 的参数。可通过 `imageData.getDimensions()` 获取图像尺寸，并基于该值计算正确的切片索引。",
        "generator_prompt": "Please use vtkjs to generate visualization code. The code should be in the form of a complete code wrapped only in HTML tags. Please add your thinking process as comments in the code to make it easier to understand the code logic.\n\nIn the code, use `<script src=\"https://unpkg.com/vtk.js\"></script>` as the library for visualization to implement the visualization function.\nPlease follow the following rules:\n1. The content of the answer is HTML code with vtkjs script(start from <!DOCTYPE html>), and if there is any explanation, it should be given in the form of comments.\n2. If the sample code is relevant to the user's requirements, implement the user's requirements based on the sample code.\n3. The answer should be based on the provided sample information, and do not fabricate functions that do not exist. \nPlease implement the code strictly according to the specific requirements of the user in the `<QUESTION></QUESTION>` tag. Ensure that the code logic is clear and straightforward, and generate the visualization-related code completely in accordance with the syntax specifications of vtkjs. \n<QUESTION>__QUESTION__</QUESTION>\n\n",
        "final_prompt": "\n    用户需求分析：\n    1. 主要目标：三维切片可视化 - 使用VTK.js在HTML中可视化切割的转子数据，并根据压力值映射颜色和不透明度，同时添加方向标记。\n    2. 数据来源：rotor.vti (图像数据)\n    3. 关键API：vtkHttpDataSetReader, vtkImageResample, vtkImageSliceMapper, vtkImageSlice, vtkColorTransferFunction, vtkPiecewiseFunction, vtkAxesActor, vtkRenderer, vtkRenderWindow\n    \n    \n        The relevant VTK.js example information is as follows: 示例 'ManyRenderers' (code):\n<script src=\"https://unpkg.com/vtk.js\"></script>\n\n    <script>\n        // 假设vtk.js已经通过某种方式被加载到全局变量vtk中\n        // 例如，通过<script>标签在HTML中引入vtk.js，或者通过模块加载器\n\n        // 使用vtk命名空间来引用各个类\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkConeSource = vtk.Filters.Sources.vtkConeSource;\n        const vtkSphereSource = vtk.Filters.Sources.vtkSphereSource;\n        const vtkCubeSource = vtk.Filters.Sources.vtkCubeSource;\n        const vtkCylinderSource = vtk.Filters.Sources.vtkCylinderSource;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkRenderWindow = vtk.Rendering.Core.vtkRenderWindow;\n        const vtkRenderWindowInteractor = vtk.Rendering.Core.vtkRenderWindowInteractor;\n        const vtkRenderer = vtk.Rendering.Core.vtkRenderer;\n        const vtkInteractorStyleTrackballCamera = vtk.Interaction.Style.vtkInteractorStyleTrackballCamera;\n\n        // ----------------------------------------------------------------------------\n        // Meshes\n\n示例 'Rendering-ManyRenderers' (code):\n<script src=\"https://unpkg.com/vtk.js\"></script>\n\n    <script>\n        // 假设vtk.js已经通过某种方式被加载到全局变量vtk中\n        // 例如，通过<script>标签在HTML中引入vtk.js，或者通过模块加载器\n\n        // 使用vtk命名空间来引用各个类\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkConeSource = vtk.Filters.Sources.vtkConeSource;\n        const vtkSphereSource = vtk.Filters.Sources.vtkSphereSource;\n        const vtkCubeSource = vtk.Filters.Sources.vtkCubeSource;\n        const vtkCylinderSource = vtk.Filters.Sources.vtkCylinderSource;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkRenderWindow = vtk.Rendering.Core.vtkRenderWindow;\n        const vtkRenderWindowInteractor = vtk.Rendering.Core.vtkRenderWindowInteractor;\n        const vtkRenderer = vtk.Rendering.Core.vtkRenderer;\n        const vtkInteractorStyleTrackballCamera = vtk.Interaction.Style.vtkInteractorStyleTrackballCamera;\n\n        // ----------------------------------------------------------------------------\n        // Meshes\n\n示例 'IO-StickMapper' (code):\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n\n    <script>\n        // 使用vtk命名空间来引用各个类\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPlaneSource = vtk.Filters.Sources.vtkPlaneSource;\n        const vtkStickMapper = vtk.Rendering.Core.vtkStickMapper;\n\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldAssociations;\n\n示例 'ImageLabelOutline' (code):\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        // 使用vtk命名空间来引用各个类\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n        const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n        const vtkImageData = vtk.Common.DataModel.vtkImageData;\n        const vtkDataArray = vtk.Common.Core.vtkDataArray;\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n\n        // 使用vtk命名空间来引用常量\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldAssociations;\n\n示例 'Filter-Calculator' (code):\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        // using vtk namespace\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkCalculator = vtk.Filters.General.vtkCalculator;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkPlaneSource = vtk.Filters.Sources.vtkPlaneSource;\n        const vtkPolyData = vtk.Common.DataModel.vtkPolyData;\n        const vtkPoints = vtk.Common.Core.vtkPoints;\n        const AttributeTypes = vtk.Common.DataModel.vtkDataSetAttributes.AttributeTypes;\n        const FieldDataTypes = vtk.Common.DataModel.vtkDataSet.FieldDataTypes;\n\n        User question: Generate HTML with vtk.js to visualize sliced rotor data\n\nLoad from http://127.0.0.1:5000/dataset/rotor.vti\n\nProcessing:\n- Slice ：Set as active scalar \"Pressure\"\n- Applies a Y-axis slice at 80% depth (setSlice, setSlicingMode).\nVisualization:\n- Maps pressure values to colors (blue→white→red gradient) and opacity (full opacity).\n- UI: Adds an orientation marker (XYZ axes) for spatial reference.\n6. No GUI controls required\n        Please provide a detailed answer based on the above analysis and example information. Highlight how to meet the user's specific needs in the comments.\n        ",
        "evaluator_prompt": "# Role: An expert for vtk.js and web-based scientific visualization\n# Ground truth: [GROUND_TRUTH]\n# Generated code: [GENERATED_CODE]\nThe ground truth code is provided by [Ground truth], please give a score for [Generated code] according to its readability and correctness. The score is between 0 to 1, and explain reasons for giving this score.\n### Response Format\n```\n<Score>[SCORE]</Score>\n<Explanation>[EXPLANATION]</Explanation>\n### Response Example\n<Score>0.8</Score>\n<Explanation>The generated code is readable and correct.</Explanation> ",
        "generator": "qwen3-plus",
        "evaluator": "qwen3-turbo",
        "score": "0.7",
        "workflow": {
            "inquiryExpansion": true,
            "rag": true,
            "iterativeLoop": false
        },
        "eval_id": "1748950775",
        "eval_user": "test",
        "export_time": "2025-06-03T11:45:55.720Z",
        "console_output": [
            {
                "type": "error",
                "message": "Error: Uncaught TypeError: Cannot read properties of undefined (reading 'newInstance') (at http://localhost:5174/:26:42)",
                "timestamp": "2025-06-03T11:40:37.245Z"
            }
        ],
        "eval_time": "2025-06-03 19:39:35",
        "evaluator_evaluation": "<Score>0.7</Score>\n<Explanation>The generated code is mostly readable and follows a logical structure, but it contains several issues that affect correctness. The dataset loading uses vtkHttpDataSetReader instead of vtkXMLImageDataReader, which may not be compatible with the .vti file format. The slice position uses a hardcoded value (0.8 * 255) without considering actual dimensions, which could lead to incorrect slicing. Additionally, the code lacks proper handling of scalar arrays and does not set active scalars explicitly, which might result in incorrect visualization. The orientation widget setup is incomplete and may not function as intended.</Explanation>",
        "options": null
    },
    {
        "path": "IO-Rendering\\volume_rendering\\rotor\\description.txt",
        "name": "description.txt",
        "prompt": "Generate HTML with vtk.js to visualize volume rendering\n\nLoad from http://127.0.0.1:5000/dataset/rotor.vti\nCompute and render velocity magnitude\n\nUse vtkFullScreenRenderWindow\nLoad vtk.js from CDN",
        "ground_truth": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>VTK.js Cutter Example</title>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <!-- <script src=\"https://unpkg.com/vtk.js\"></script> -->\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkVolume = vtk.Rendering.Core.vtkVolume;\n        const vtkVolumeMapper = vtk.Rendering.Core.vtkVolumeMapper;\n\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n        const vtkXMLImageDataReader = vtk.IO.XML.vtkXMLImageDataReader;\n\n        //init the render window\n        const fullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n\n        // Load dataset\n        const reader = vtkXMLImageDataReader.newInstance();\n\n\n        // set url and load the data\n        reader.setUrl('http://127.0.0.1:5000/dataset/rotor_simplified.vti').then(() => {\n            reader.loadData().then(() => {\n                //prepare dataset\n                const imageData = reader.getOutputData(0);\n                //set active scalar\n                const numPoints = imageData.getNumberOfPoints();\n\n                console.log(imageData.toJSON())\n\n                variable = 'Pressure'\n\n                scalarArray = imageData.getPointData().getArray(variable)\n\n                imageData.getPointData().setActiveScalars(variable);\n                imageData.setSpacing(0.05, 0.05, 0.05);\n\n                console.log('New bounds:', imageData.getBounds());\n                console.log('Dimensions:', imageData.getDimensions());\n                console.log('Spacing:', imageData.getSpacing());\n                const newRange = scalarArray.getRange();\n                console.log('scalarArray range:', newRange);\n                const [minV, maxV] = newRange;\n\n                console.log(imageData.getPointData().getScalars().getName());\n\n                //create the mapper and set its property\n                const mapper = vtkVolumeMapper.newInstance();\n                //console.log(data.toJSON())\n                mapper.setMaximumSamplesPerRay(4000);  // or even higher, up to your hardware limits\n                mapper.setInputData(imageData);\n                mapper.setSampleDistance(0.1);\n                // mapper.setLocalAmbientOcclusion(0);\n                // mapper.setLAOKernelSize(10);\n                // mapper.setLAOKernelRadius(5);\n                // mapper.setComputeNormalFromOpacity(true);\n\n                //create actor and set its properties, including gradient opacity, scalar opacity, shade, ambient, diffuse, specular etc.\n                const actor = vtkVolume.newInstance();\n                actor.getProperty().setLocalAmbientOcclusion(0)\n                actor.getProperty().setLAOKernelSize(10)\n                actor.getProperty().setLAOKernelRadius(5)\n                const cfun = vtkColorTransferFunction.newInstance();\n                cfun.addRGBPoint(minV, 0.0, 0.0, 1.0);\n                cfun.addRGBPoint((minV + maxV) * 0.5, 1.0, 1.0, 1.0);\n                cfun.addRGBPoint(maxV, 1.0, 0.0, 0.0);\n                actor.getProperty().setRGBTransferFunction(0, cfun);\n\n                const ofun = vtkPiecewiseFunction.newInstance();\n\n                ofun.addPoint(minV, 0.0);\n                ofun.addPoint(minV + 0.1 * (maxV - minV), 0.05);\n                ofun.addPoint(minV + 0.5 * (maxV - minV), 0.2);\n                ofun.addPoint(maxV, 1.0);\n\n                actor.getProperty().setScalarOpacity(0, ofun);\n                actor.getProperty().setInterpolationTypeToLinear();\n                // this variable makes results lighter\n                actor.getProperty().setScalarOpacityUnitDistance(0, 0.1);\n                actor.getProperty().setShade(false);\n                actor.getProperty().setAmbient(0.3);\n                actor.getProperty().setDiffuse(1);\n                actor.getProperty().setSpecular(1);\n\n                //assign mapper to actor and assign mapper to render\n                actor.setMapper(mapper);\n                renderer.addVolume(actor);\n\n                const bounds = imageData.getBounds();\n                const center = [\n                    (bounds[0] + bounds[1]) / 2,\n                    (bounds[2] + bounds[3]) / 2,\n                    (bounds[4] + bounds[5]) / 2,\n                ];\n\n                const camera = renderer.getActiveCamera();\n                camera.setFocalPoint(...center);\n                camera.setPosition(center[0], center[1], center[2] + 10); // Look along +Z\n                camera.setViewUp(0, 1, 0);\n                renderer.resetCameraClippingRange();\n                renderWindow.render();\n                renderer.resetCamera();\n                renderWindow.render();\n            });\n        });\n\n    </script>\n</body>\n\n</html>",
        "generated_code": "<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>error page</title>\n</head>\n<body>\n    <h1>error</h1>\n    <div class=\"error-box\">\n        <h2>未找到对应的模型: deepseek-v3:671b</h2>\n    </div>\n</body>\n</html>",
        "generator_prompt": "Please use vtkjs to generate visualization code. The code should be in the form of a complete code wrapped only in HTML tags. Please add your thinking process as comments in the code to make it easier to understand the code logic.\n\nIn the code, use `<script src=\"https://unpkg.com/vtk.js\"></script>` as the library for visualization to implement the visualization function.\nPlease follow the following rules:\n1. The content of the answer is HTML code with vtkjs script(start from <!DOCTYPE html>), and if there is any explanation, it should be given in the form of comments.\n2. If the sample code is relevant to the user's requirements, implement the user's requirements based on the sample code.\n3. The answer should be based on the provided sample information, and do not fabricate functions that do not exist. \nPlease implement the code strictly according to the specific requirements of the user in the `<QUESTION></QUESTION>` tag. Ensure that the code logic is clear and straightforward, and generate the visualization-related code completely in accordance with the syntax specifications of vtkjs. \n<QUESTION>__QUESTION__</QUESTION>\n\n",
        "final_prompt": "\n    Generate only the HTML code without any additional text or markdown formatting.\n    User Requirements:\n    Generate HTML with vtk.js to visualize volume rendering\n\nLoad from http://127.0.0.1:5000/dataset/rotor.vti\nCompute and render velocity magnitude\n\nUse vtkFullScreenRenderWindow\nLoad vtk.js from CDN\n\n    Relevant VTK.js Examples:\n    示例 1:\n描述: Displays a synthetic 2D image generated by `vtkRTAnalyticSource` using `vtkImageMapper` and `vtkImageSlice`.\nVTK.js 模块: ['vtk.Common.DataModel.vtkImageData', 'vtk.Filters.Sources.vtkRTAnalyticSource', 'vtk.Rendering.Core.vtkImageMapper', 'vtk.Rendering.Core.vtkImageSlice', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n        const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n        const vtkImageData = vtk.Common.DataModel.vtkImageData;\n\n        // create render window\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        const vtkImgSource = vtk.Filters.Sources.vtkRTAnalyticSource;\n        const imgSource = vtkImgSource.newInstance();\n        imgSource.update();\n        const img = imgSource.getOutputData();\n\n        // set mapper and actor\n        const mapper = vtkImageMapper.newInstance();\n        mapper.setInputData(img);\n\n        const actor = vtkImageSlice.newInstance();\n        actor.setMapper(mapper);\n\n        // adding actor to render\n        renderer.addActor(actor);\n        renderer.resetCamera();\n        renderWindow.render();\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 2:\n描述: Loads and visualizes a 3D model (VTP format) from a remote URL using `vtkHttpDataSetReader` with gzip support.\n\nVTK.js 模块: ['vtk.IO.Core.DataAccessHelper.HttpDataAccessHelper', 'vtk.IO.Core.vtkHttpDataSetReader', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow', 'vtk.Rendering.OpenGL.Profiles.Geometry']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js IO-HttpDataSetReader</title>\n</head>\n\n<body>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const data_path = 'http://kitware.github.io/vtk-js/data/cow.vtp'\n        const vtkHttpDataSetReader = vtk.IO.Core.vtkHttpDataSetReader;\n        // const vtkGeometry = vtk.Rendering.OpenGL.Profiles.Geometry\n\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkActor = vtk.Rendering.Core.vtkActor\n        const vtkMapper = vtk.Rendering.Core.vtkMapper\n\n        // Force the loading of HttpDataAccessHelper to support gzip decompression\n        const vtkHttpDataAccessHelper = vtk.IO.Core.DataAccessHelper.HttpDataAccessHelper\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance();\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // ----------------------------------------------------------------------------\n        // Example code\n        // ----------------------------------------------------------------------------\n        // Server is not sending the .gz and with the compress header\n        // Need to fetch the true file name and uncompress it locally\n        // ----------------------------------------------------------------------------\n\n        const reader = vtkHttpDataSetReader.newInstance({ fetchGzip: true });\n        reader.setUrl(data_path).then(() => {\n            reader.loadData().then(() => {\n                renderer.resetCamera();\n                renderWindow.render();\n            });\n        });\n\n        const mapper = vtkMapper.newInstance();\n        mapper.setInputConnection(reader.getOutputPort());\n\n        const actor = vtkActor.newInstance();\n        actor.setMapper(mapper);\n\n        renderer.addActor(actor);\n\n        // -----------------------------------------------------------\n        // Make some variables global so that you can inspect and\n        // modify objects in your browser's developer console:\n        // -----------------------------------------------------------\n\n        // global.source = reader;\n        // global.mapper = mapper;\n        // global.actor = actor;\n        // global.renderer = renderer;\n        // global.renderWindow = renderWindow;\n\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 3:\n描述: Loads and visualizes a 3D polygonal data file (`test_cone.vtp`) using `vtkXMLPolyDataReader` and `vtkMapper`.\n\nVTK.js 模块: ['vtk.IO.XML.vtkXMLPolyDataReader', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js loading poly data, need to start by live server</title>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkXMLPolyDataReader = vtk.IO.XML.vtkXMLPolyDataReader;\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n\n        // crete the render window\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // load the vtp data locally\n        const reader = vtkXMLPolyDataReader.newInstance();\n        // set url and load the data\n        reader.setUrl('../datasets/test_cone.vtp').then(() => {\n            reader.loadData().then(() => {\n                // assign data to actor\n                const mapper = vtkMapper.newInstance();\n                console.log(reader.getOutputData(0))\n                mapper.setInputData(reader.getOutputData(0));\n                const actor = vtkActor.newInstance();\n                actor.setMapper(mapper);\n\n                //  adding actor to render and render the data\n                renderer.addActor(actor);\n                renderer.resetCamera();\n                renderWindow.render();\n            });\n        });\n    </script>\n</body>\n\n</html>\n\n\n--------------------------------------------------------------------------------------------------------------\n示例 4:\n描述: Generates and displays a 2D random image (100x100) using `vtkImageSlice` and `vtkImageMapper`.\n\nVTK.js 模块: ['vtk.Common.Core.vtkDataArray.newInstance', 'vtk.Common.DataModel.vtkImageData', 'vtk.Rendering.Core.vtkImageMapper', 'vtk.Rendering.Core.vtkImageSlice', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;// Actor for rendering 2D image slices\n        const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n        const vtkImageData = vtk.Common.DataModel.vtkImageData;\n\n        // Create render window\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // Create image data\n        const imageData = vtkImageData.newInstance();\n        imageData.setDimensions(100, 100, 1);\n        imageData.setSpacing(1.0, 1.0, 1.0);\n        imageData.setOrigin(0.0, 0.0, 0.0);\n\n        // Set pixel values for image data\n        const scalars = new Uint8Array(100 * 100);\n        for (let i = 0; i < 100 * 100; i++) {\n            scalars[i] = Math.random() * 255;\n        }\n        imageData.getPointData().setScalars(vtk.Common.Core.vtkDataArray.newInstance({ values: scalars, numberOfComponents: 1 }));\n\n        // Create mapper and actor\n        const mapper = vtkImageMapper.newInstance();\n        mapper.setInputData(imageData);\n\n        const actor = vtkImageSlice.newInstance();\n        actor.setMapper(mapper);\n\n        // Add actor to renderer\n        renderer.addActor(actor);\n        renderer.resetCamera();\n        renderWindow.render();\n    </script>\n</body>\n\n</html>\n\n\n            ",
        "evaluator_prompt": "# Role: An expert for vtk.js and web-based scientific visualization\n# Ground truth: [GROUND_TRUTH]\n# Generated code: [GENERATED_CODE]\nThe ground truth code is provided by [Ground truth], please give a score for [Generated code] according to its readability and correctness. The score is between 0 to 1, and explain reasons for giving this score.\n### Response Format\n```\n<Score>[SCORE]</Score>\n<Explanation>[EXPLANATION]</Explanation>\n### Response Example\n<Score>0.8</Score>\n<Explanation>The generated code is readable and correct.</Explanation> ",
        "generator": "deepseek-v3:671b",
        "evaluator": "deepseek-v3:671b",
        "score": null,
        "workflow": {
            "inquiryExpansion": true,
            "rag": true
        },
        "eval_id": "1764055998",
        "eval_user": "test",
        "export_time": null,
        "console_output": null,
        "eval_time": "2025-11-25 15:33:18",
        "evaluator_evaluation": "<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>error page</title>\n</head>\n<body>\n    <h1>error</h1>\n    <div class=\"error-box\">\n        <h2>未找到对应的模型: deepseek-v3:671b</h2>\n    </div>\n</body>\n</html>",
        "options": null
    },
    {
        "path": "IO-Rendering\\volume_rendering\\rotor\\description.txt",
        "name": "description.txt",
        "prompt": "Generate HTML with vtk.js to visualize volume rendering\n\nLoad from http://127.0.0.1:5000/dataset/rotor.vti\nCompute and render velocity magnitude\n\nUse vtkFullScreenRenderWindow\nLoad vtk.js from CDN",
        "ground_truth": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>VTK.js Cutter Example</title>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <!-- <script src=\"https://unpkg.com/vtk.js\"></script> -->\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkVolume = vtk.Rendering.Core.vtkVolume;\n        const vtkVolumeMapper = vtk.Rendering.Core.vtkVolumeMapper;\n\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n        const vtkXMLImageDataReader = vtk.IO.XML.vtkXMLImageDataReader;\n\n        //init the render window\n        const fullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n\n        // Load dataset\n        const reader = vtkXMLImageDataReader.newInstance();\n\n\n        // set url and load the data\n        reader.setUrl('http://127.0.0.1:5000/dataset/rotor_simplified.vti').then(() => {\n            reader.loadData().then(() => {\n                //prepare dataset\n                const imageData = reader.getOutputData(0);\n                //set active scalar\n                const numPoints = imageData.getNumberOfPoints();\n\n                console.log(imageData.toJSON())\n\n                variable = 'Pressure'\n\n                scalarArray = imageData.getPointData().getArray(variable)\n\n                imageData.getPointData().setActiveScalars(variable);\n                imageData.setSpacing(0.05, 0.05, 0.05);\n\n                console.log('New bounds:', imageData.getBounds());\n                console.log('Dimensions:', imageData.getDimensions());\n                console.log('Spacing:', imageData.getSpacing());\n                const newRange = scalarArray.getRange();\n                console.log('scalarArray range:', newRange);\n                const [minV, maxV] = newRange;\n\n                console.log(imageData.getPointData().getScalars().getName());\n\n                //create the mapper and set its property\n                const mapper = vtkVolumeMapper.newInstance();\n                //console.log(data.toJSON())\n                mapper.setMaximumSamplesPerRay(4000);  // or even higher, up to your hardware limits\n                mapper.setInputData(imageData);\n                mapper.setSampleDistance(0.1);\n                // mapper.setLocalAmbientOcclusion(0);\n                // mapper.setLAOKernelSize(10);\n                // mapper.setLAOKernelRadius(5);\n                // mapper.setComputeNormalFromOpacity(true);\n\n                //create actor and set its properties, including gradient opacity, scalar opacity, shade, ambient, diffuse, specular etc.\n                const actor = vtkVolume.newInstance();\n                actor.getProperty().setLocalAmbientOcclusion(0)\n                actor.getProperty().setLAOKernelSize(10)\n                actor.getProperty().setLAOKernelRadius(5)\n                const cfun = vtkColorTransferFunction.newInstance();\n                cfun.addRGBPoint(minV, 0.0, 0.0, 1.0);\n                cfun.addRGBPoint((minV + maxV) * 0.5, 1.0, 1.0, 1.0);\n                cfun.addRGBPoint(maxV, 1.0, 0.0, 0.0);\n                actor.getProperty().setRGBTransferFunction(0, cfun);\n\n                const ofun = vtkPiecewiseFunction.newInstance();\n\n                ofun.addPoint(minV, 0.0);\n                ofun.addPoint(minV + 0.1 * (maxV - minV), 0.05);\n                ofun.addPoint(minV + 0.5 * (maxV - minV), 0.2);\n                ofun.addPoint(maxV, 1.0);\n\n                actor.getProperty().setScalarOpacity(0, ofun);\n                actor.getProperty().setInterpolationTypeToLinear();\n                // this variable makes results lighter\n                actor.getProperty().setScalarOpacityUnitDistance(0, 0.1);\n                actor.getProperty().setShade(false);\n                actor.getProperty().setAmbient(0.3);\n                actor.getProperty().setDiffuse(1);\n                actor.getProperty().setSpecular(1);\n\n                //assign mapper to actor and assign mapper to render\n                actor.setMapper(mapper);\n                renderer.addVolume(actor);\n\n                const bounds = imageData.getBounds();\n                const center = [\n                    (bounds[0] + bounds[1]) / 2,\n                    (bounds[2] + bounds[3]) / 2,\n                    (bounds[4] + bounds[5]) / 2,\n                ];\n\n                const camera = renderer.getActiveCamera();\n                camera.setFocalPoint(...center);\n                camera.setPosition(center[0], center[1], center[2] + 10); // Look along +Z\n                camera.setViewUp(0, 1, 0);\n                renderer.resetCameraClippingRange();\n                renderWindow.render();\n                renderer.resetCamera();\n                renderWindow.render();\n            });\n        });\n\n    </script>\n</body>\n\n</html>",
        "generated_code": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n</head>\n<body>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        // Required VTK modules for volume rendering\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkHttpDataSetReader = vtk.IO.Core.vtkHttpDataSetReader;\n        const vtkVolume = vtk.Rendering.Core.vtkVolume;\n        const vtkVolumeMapper = vtk.Rendering.Core.vtkVolumeMapper;\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n\n        // Create full screen render window\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // Load dataset from URL\n        const reader = vtkHttpDataSetReader.newInstance({ fetchGzip: true });\n        reader.setUrl('http://127.0.0.1:5000/dataset/rotor.vti').then(() => {\n            reader.loadData().then(() => {\n                // Get the output data which is the volume data\n                const volumeData = reader.getOutputData();\n\n                // Create volume mapper\n                const volumeMapper = vtkVolumeMapper.newInstance();\n                volumeMapper.setInputData(volumeData);\n\n                // Create color and opacity transfer functions for volume rendering\n                const ctfun = vtkColorTransferFunction.newInstance();\n                ctfun.addRGBPoint(0.0, 0.0, 0.0, 0.0);\n                ctfun.addRGBPoint(64.0, 1.0, 0.0, 0.0);\n                ctfun.addRGBPoint(128.0, 0.0, 0.0, 1.0);\n                ctfun.addRGBPoint(192.0, 0.0, 1.0, 0.0);\n                ctfun.addRGBPoint(255.0, 1.0, 1.0, 1.0);\n\n                const ofun = vtkPiecewiseFunction.newInstance();\n                ofun.addPoint(0.0, 0.0);\n                ofun.addPoint(64.0, 0.0);\n                ofun.addPoint(128.0, 0.3);\n                ofun.addPoint(192.0, 0.6);\n                ofun.addPoint(255.0, 0.8);\n\n                // Create volume actor and set properties\n                const volume = vtkVolume.newInstance();\n                volume.setMapper(volumeMapper);\n                volume.getProperty().setRGBTransferFunction(ctfun);\n                volume.getProperty().setScalarOpacity(ofun);\n                volume.getProperty().setInterpolationTypeToLinear();\n\n                // Add volume to renderer and render\n                renderer.addVolume(volume);\n                renderer.resetCamera();\n                renderWindow.render();\n            });\n        });\n    </script>\n</body>\n</html>",
        "generator_prompt": "Please use vtkjs to generate visualization code. The code should be in the form of a complete code wrapped only in HTML tags. Please add your thinking process as comments in the code to make it easier to understand the code logic.\n\nIn the code, use `<script src=\"https://unpkg.com/vtk.js\"></script>` as the library for visualization to implement the visualization function.\nPlease follow the following rules:\n1. The content of the answer is HTML code with vtkjs script(start from <!DOCTYPE html>), and if there is any explanation, it should be given in the form of comments.\n2. If the sample code is relevant to the user's requirements, implement the user's requirements based on the sample code.\n3. The answer should be based on the provided sample information, and do not fabricate functions that do not exist. \nPlease implement the code strictly according to the specific requirements of the user in the `<QUESTION></QUESTION>` tag. Ensure that the code logic is clear and straightforward, and generate the visualization-related code completely in accordance with the syntax specifications of vtkjs. \n<QUESTION>__QUESTION__</QUESTION>\n\n",
        "final_prompt": "\n    Generate only the HTML code without any additional text or markdown formatting.\n    User Requirements:\n    Generate HTML with vtk.js to visualize volume rendering\n\nLoad from http://127.0.0.1:5000/dataset/rotor.vti\nCompute and render velocity magnitude\n\nUse vtkFullScreenRenderWindow\nLoad vtk.js from CDN\n\n    Relevant VTK.js Examples:\n    示例 1:\n描述: Displays a synthetic 2D image generated by `vtkRTAnalyticSource` using `vtkImageMapper` and `vtkImageSlice`.\nVTK.js 模块: ['vtk.Common.DataModel.vtkImageData', 'vtk.Filters.Sources.vtkRTAnalyticSource', 'vtk.Rendering.Core.vtkImageMapper', 'vtk.Rendering.Core.vtkImageSlice', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n        const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n        const vtkImageData = vtk.Common.DataModel.vtkImageData;\n\n        // create render window\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        const vtkImgSource = vtk.Filters.Sources.vtkRTAnalyticSource;\n        const imgSource = vtkImgSource.newInstance();\n        imgSource.update();\n        const img = imgSource.getOutputData();\n\n        // set mapper and actor\n        const mapper = vtkImageMapper.newInstance();\n        mapper.setInputData(img);\n\n        const actor = vtkImageSlice.newInstance();\n        actor.setMapper(mapper);\n\n        // adding actor to render\n        renderer.addActor(actor);\n        renderer.resetCamera();\n        renderWindow.render();\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 2:\n描述: Loads and visualizes a 3D model (VTP format) from a remote URL using `vtkHttpDataSetReader` with gzip support.\n\nVTK.js 模块: ['vtk.IO.Core.DataAccessHelper.HttpDataAccessHelper', 'vtk.IO.Core.vtkHttpDataSetReader', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow', 'vtk.Rendering.OpenGL.Profiles.Geometry']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js IO-HttpDataSetReader</title>\n</head>\n\n<body>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const data_path = 'http://kitware.github.io/vtk-js/data/cow.vtp'\n        const vtkHttpDataSetReader = vtk.IO.Core.vtkHttpDataSetReader;\n        // const vtkGeometry = vtk.Rendering.OpenGL.Profiles.Geometry\n\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkActor = vtk.Rendering.Core.vtkActor\n        const vtkMapper = vtk.Rendering.Core.vtkMapper\n\n        // Force the loading of HttpDataAccessHelper to support gzip decompression\n        const vtkHttpDataAccessHelper = vtk.IO.Core.DataAccessHelper.HttpDataAccessHelper\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance();\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // ----------------------------------------------------------------------------\n        // Example code\n        // ----------------------------------------------------------------------------\n        // Server is not sending the .gz and with the compress header\n        // Need to fetch the true file name and uncompress it locally\n        // ----------------------------------------------------------------------------\n\n        const reader = vtkHttpDataSetReader.newInstance({ fetchGzip: true });\n        reader.setUrl(data_path).then(() => {\n            reader.loadData().then(() => {\n                renderer.resetCamera();\n                renderWindow.render();\n            });\n        });\n\n        const mapper = vtkMapper.newInstance();\n        mapper.setInputConnection(reader.getOutputPort());\n\n        const actor = vtkActor.newInstance();\n        actor.setMapper(mapper);\n\n        renderer.addActor(actor);\n\n        // -----------------------------------------------------------\n        // Make some variables global so that you can inspect and\n        // modify objects in your browser's developer console:\n        // -----------------------------------------------------------\n\n        // global.source = reader;\n        // global.mapper = mapper;\n        // global.actor = actor;\n        // global.renderer = renderer;\n        // global.renderWindow = renderWindow;\n\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 3:\n描述: Loads and visualizes a 3D polygonal data file (`test_cone.vtp`) using `vtkXMLPolyDataReader` and `vtkMapper`.\n\nVTK.js 模块: ['vtk.IO.XML.vtkXMLPolyDataReader', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js loading poly data, need to start by live server</title>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkXMLPolyDataReader = vtk.IO.XML.vtkXMLPolyDataReader;\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n\n        // crete the render window\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // load the vtp data locally\n        const reader = vtkXMLPolyDataReader.newInstance();\n        // set url and load the data\n        reader.setUrl('../datasets/test_cone.vtp').then(() => {\n            reader.loadData().then(() => {\n                // assign data to actor\n                const mapper = vtkMapper.newInstance();\n                console.log(reader.getOutputData(0))\n                mapper.setInputData(reader.getOutputData(0));\n                const actor = vtkActor.newInstance();\n                actor.setMapper(mapper);\n\n                //  adding actor to render and render the data\n                renderer.addActor(actor);\n                renderer.resetCamera();\n                renderWindow.render();\n            });\n        });\n    </script>\n</body>\n\n</html>\n\n\n--------------------------------------------------------------------------------------------------------------\n示例 4:\n描述: Generates and displays a 2D random image (100x100) using `vtkImageSlice` and `vtkImageMapper`.\n\nVTK.js 模块: ['vtk.Common.Core.vtkDataArray.newInstance', 'vtk.Common.DataModel.vtkImageData', 'vtk.Rendering.Core.vtkImageMapper', 'vtk.Rendering.Core.vtkImageSlice', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;// Actor for rendering 2D image slices\n        const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n        const vtkImageData = vtk.Common.DataModel.vtkImageData;\n\n        // Create render window\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // Create image data\n        const imageData = vtkImageData.newInstance();\n        imageData.setDimensions(100, 100, 1);\n        imageData.setSpacing(1.0, 1.0, 1.0);\n        imageData.setOrigin(0.0, 0.0, 0.0);\n\n        // Set pixel values for image data\n        const scalars = new Uint8Array(100 * 100);\n        for (let i = 0; i < 100 * 100; i++) {\n            scalars[i] = Math.random() * 255;\n        }\n        imageData.getPointData().setScalars(vtk.Common.Core.vtkDataArray.newInstance({ values: scalars, numberOfComponents: 1 }));\n\n        // Create mapper and actor\n        const mapper = vtkImageMapper.newInstance();\n        mapper.setInputData(imageData);\n\n        const actor = vtkImageSlice.newInstance();\n        actor.setMapper(mapper);\n\n        // Add actor to renderer\n        renderer.addActor(actor);\n        renderer.resetCamera();\n        renderWindow.render();\n    </script>\n</body>\n\n</html>\n\n\n            ",
        "evaluator_prompt": "# Role: An expert for vtk.js and web-based scientific visualization\n# Ground truth: [GROUND_TRUTH]\n# Generated code: [GENERATED_CODE]\nThe ground truth code is provided by [Ground truth], please give a score for [Generated code] according to its readability and correctness. The score is between 0 to 1, and explain reasons for giving this score.\n### Response Format\n```\n<Score>[SCORE]</Score>\n<Explanation>[EXPLANATION]</Explanation>\n### Response Example\n<Score>0.8</Score>\n<Explanation>The generated code is readable and correct.</Explanation> ",
        "generator": "deepseek-v3:671b",
        "evaluator": "deepseek-v3:671b",
        "score": "0.6",
        "workflow": {
            "inquiryExpansion": true,
            "rag": true
        },
        "eval_id": "1764056434",
        "eval_user": "test",
        "export_time": null,
        "console_output": null,
        "eval_time": "2025-11-25 15:40:34",
        "evaluator_evaluation": "<Score>0.6</Score>\n<Explanation>The generated code is readable but lacks some correctness compared to the ground truth. The generated code uses 'vtkHttpDataSetReader' instead of 'vtkXMLImageDataReader', and the dataset URL points to 'rotor.vti' instead of 'rotor_simplified.vti'. Additionally, the generated code does not include some important settings like camera setup, gradient opacity, scalar opacity, shade, ambient, diffuse, and specular properties. The color and opacity transfer functions are also simplified and do not match the ground truth. The overall structure is similar, but the generated code misses several key details that affect the visualization quality.</Explanation>",
        "options": null
    },
    {
        "path": "IO-Filter-Rendering\\cutter\\rotor\\description.txt",
        "name": "description.txt",
        "prompt": "Generate an HTML page using vtk.js to visualize the rotor dataset.\n\n- Load the dataset from: http://127.0.0.1:5000/dataset/rotor.vti\n- Set the active scalar array to \"Pressure\".\n- Apply a slice along the Y axis at 95% depth of the dataset (convert percentage to slice index).\n- Use a blue → white → red color map for pressure values, spanning from the minimum to maximum scalar range.\n- Set opacity to fully opaque (no transparency variation).\n- Add an orientation marker with XYZ axes in the bottom-right corner.\n- No interactive GUI controls are required.\n",
        "ground_truth": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Rotor Dataset Cutting Rendering</title>\n    <style>\n        body,\n        html {\n            margin: 0;\n            padding: 0;\n            width: 100%;\n            height: 100%;\n            overflow: hidden;\n        }\n\n        #renderer {\n            width: 100%;\n            height: 100%;\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js@34.10.0/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkXMLImageDataReader = vtk.IO.XML.vtkXMLImageDataReader;\n        const vtkPlane = vtk.Common.DataModel.vtkPlane;\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n\n        const fullScreenRenderWindow = vtkFullScreenRenderWindow.newInstance({\n            background: [1, 1, 1],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n        const reader = vtkXMLImageDataReader.newInstance();\n        reader.setUrl('http://127.0.0.1:5000/dataset/rotor_simplified.vti').then(() => {\n            reader.loadData().then(() => {\n                const imageData = reader.getOutputData(0);\n                imageData.getPointData().setActiveScalars('Pressure');\n\n                const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n                const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n\n                const imageMapper = vtkImageMapper.newInstance();\n                imageMapper.setInputData(imageData);\n                const dims = imageData.getDimensions();\n                imageMapper.setSlice(dims[1] * 0.95);\n                imageMapper.setSlicingMode(1); //(0:X, 1:Y, 2:Z)\n\n                const pressureArray = imageData.getPointData().getArrayByName('Pressure');\n                const [pMin, pMax] = pressureArray.getRange();\n                const colorTransferFunction = vtkColorTransferFunction.newInstance();\n                colorTransferFunction.addRGBPoint(pMin, 0.0, 0.0, 0.8);\n                colorTransferFunction.addRGBPoint((pMin + pMax) / 2, 1.0, 1.0, 1.0);\n                colorTransferFunction.addRGBPoint(pMax, 0.8, 0.0, 0.0);\n\n                // Add opacity transfer function\n                const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n                const opacityFunction = vtkPiecewiseFunction.newInstance();\n                opacityFunction.addPoint(pMin, 1.0);\n                opacityFunction.addPoint(pMax, 1.0);\n\n                const imageSlice = vtkImageSlice.newInstance();\n                imageSlice.setMapper(imageMapper);\n                imageSlice.getProperty().setRGBTransferFunction(0, colorTransferFunction);\n                imageSlice.getProperty().setPiecewiseFunction(0, opacityFunction);  // Set opacity function\n                imageSlice.getProperty().setScalarOpacity(0, opacityFunction);      // Set scalar opacity\n                imageSlice.getProperty().setUseLookupTableScalarRange(true);\n\n                renderer.addActor(imageSlice);\n\n                const axes = vtk.Rendering.Core.vtkAxesActor.newInstance();\n                const widget = vtk.Interaction.Widgets.vtkOrientationMarkerWidget.newInstance({\n                    actor: axes,\n                    interactor: renderWindow.getInteractor(),\n                });\n                widget.setEnabled(true);\n                widget.setViewportCorner(\n                    vtk.Interaction.Widgets.vtkOrientationMarkerWidget.Corners.BOTTOM_RIGHT\n                );\n                widget.setViewportSize(0.15);\n\n                renderer.resetCamera();\n                renderer.resetCameraClippingRange();\n                renderWindow.render();\n            });\n        });\n    </script>\n</body>\n\n</html>",
        "generated_code": "```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>VTK.js Rotor Visualization</title>\n</head>\n<body>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        // Main VTK modules needed\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkHttpDataSetReader = vtk.IO.Core.vtkHttpDataSetReader;\n        const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n        const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n        const vtkOrientationMarkerWidget = vtk.Interaction.Widgets.vtkOrientationMarkerWidget;\n\n        // Create render window\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // Load rotor dataset from URL\n        const reader = vtkHttpDataSetReader.newInstance({ fetchGzip: true });\n        reader.setUrl('http://127.0.0.1:5000/dataset/rotor.vti').then(() => {\n            reader.loadData().then(() => {\n                const imageData = reader.getOutputData();\n                \n                // Set \"Pressure\" as active scalar array\n                const pointData = imageData.getPointData();\n                pointData.setActiveScalars('Pressure');\n                const range = pointData.getScalars().getRange();\n\n                // Create color transfer function (blue-white-red)\n                const lut = vtkColorTransferFunction.newInstance();\n                lut.addRGBPoint(range[0], 0, 0, 1);  // Blue at minimum\n                lut.addRGBPoint((range[0] + range[1])/2, 1, 1, 1); // White at middle\n                lut.addRGBPoint(range[1], 1, 0, 0);  // Red at maximum\n\n                // Create mapper and set input with color transfer function\n                const mapper = vtkImageMapper.newInstance();\n                mapper.setInputData(imageData);\n                mapper.setScalarRange(range[0], range[1]);\n                mapper.setColorLookupTable(lut);\n\n                // Create slice actor\n                const actor = vtkImageSlice.newInstance();\n                actor.setMapper(mapper);\n                \n                // Calculate slice index at 95% Y depth\n                const dims = imageData.getDimensions();\n                const sliceIndex = Math.floor(dims[1] * 0.95);\n                mapper.setSlice(sliceIndex);\n                mapper.setSlabTypeToSingle();\n\n                // Add actor to renderer\n                renderer.addActor(actor);\n\n                // Add orientation marker\n                const axes = vtk.Rendering.Core.vtkAnnotatedCubeActor.newInstance();\n                axes.setXPlusFaceProperty({ text: '+X' });\n                axes.setXMinusFaceProperty({ text: '-X' });\n                axes.setYPlusFaceProperty({ text: '+Y' });\n                axes.setYMinusFaceProperty({ text: '-Y' });\n                axes.setZPlusFaceProperty({ text: '+Z' });\n                axes.setZMinusFaceProperty({ text: '-Z' });\n                \n                const widget = vtkOrientationMarkerWidget.newInstance({\n                    actor: axes,\n                    interactor: renderWindow.getInteractor()\n                });\n                widget.setEnabled(true);\n                widget.setViewportCorner(\n                    vtkOrientationMarkerWidget.Corners.BOTTOM_RIGHT\n                );\n\n                // Render\n                renderer.resetCamera();\n                renderWindow.render();\n            });\n        });\n    </script>\n</body>\n</html>\n```",
        "generator_prompt": "Please use vtkjs to generate visualization code. The code should be in the form of a complete code wrapped only in HTML tags. Please add your thinking process as comments in the code to make it easier to understand the code logic.\n\nIn the code, use `<script src=\"https://unpkg.com/vtk.js\"></script>` as the library for visualization to implement the visualization function.\nPlease follow the following rules:\n1. The content of the answer is HTML code with vtkjs script(start from <!DOCTYPE html>), and if there is any explanation, it should be given in the form of comments.\n2. If the sample code is relevant to the user's requirements, implement the user's requirements based on the sample code.\n3. The answer should be based on the provided sample information, and do not fabricate functions that do not exist. \nPlease implement the code strictly according to the specific requirements of the user in the `<QUESTION></QUESTION>` tag. Ensure that the code logic is clear and straightforward, and generate the visualization-related code completely in accordance with the syntax specifications of vtkjs. \n<QUESTION>__QUESTION__</QUESTION>\n\n",
        "final_prompt": "\n    Generate only the HTML code without any additional text or markdown formatting.\n    User Requirements:\n    Generate an HTML page using vtk.js to visualize the rotor dataset.\n\n- Load the dataset from: http://127.0.0.1:5000/dataset/rotor.vti\n- Set the active scalar array to \"Pressure\".\n- Apply a slice along the Y axis at 95% depth of the dataset (convert percentage to slice index).\n- Use a blue → white → red color map for pressure values, spanning from the minimum to maximum scalar range.\n- Set opacity to fully opaque (no transparency variation).\n- Add an orientation marker with XYZ axes in the bottom-right corner.\n- No interactive GUI controls are required.\n\n\n    Relevant VTK.js Examples:\n    示例 1:\n描述: Displays a synthetic 2D image generated by `vtkRTAnalyticSource` using `vtkImageMapper` and `vtkImageSlice`.\nVTK.js 模块: ['vtk.Common.DataModel.vtkImageData', 'vtk.Filters.Sources.vtkRTAnalyticSource', 'vtk.Rendering.Core.vtkImageMapper', 'vtk.Rendering.Core.vtkImageSlice', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n        const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n        const vtkImageData = vtk.Common.DataModel.vtkImageData;\n\n        // create render window\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        const vtkImgSource = vtk.Filters.Sources.vtkRTAnalyticSource;\n        const imgSource = vtkImgSource.newInstance();\n        imgSource.update();\n        const img = imgSource.getOutputData();\n\n        // set mapper and actor\n        const mapper = vtkImageMapper.newInstance();\n        mapper.setInputData(img);\n\n        const actor = vtkImageSlice.newInstance();\n        actor.setMapper(mapper);\n\n        // adding actor to render\n        renderer.addActor(actor);\n        renderer.resetCamera();\n        renderWindow.render();\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 2:\n描述: Loads and visualizes a 3D model (VTP format) from a remote URL using `vtkHttpDataSetReader` with gzip support.\n\nVTK.js 模块: ['vtk.IO.Core.DataAccessHelper.HttpDataAccessHelper', 'vtk.IO.Core.vtkHttpDataSetReader', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow', 'vtk.Rendering.OpenGL.Profiles.Geometry']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js IO-HttpDataSetReader</title>\n</head>\n\n<body>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const data_path = 'http://kitware.github.io/vtk-js/data/cow.vtp'\n        const vtkHttpDataSetReader = vtk.IO.Core.vtkHttpDataSetReader;\n        // const vtkGeometry = vtk.Rendering.OpenGL.Profiles.Geometry\n\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkActor = vtk.Rendering.Core.vtkActor\n        const vtkMapper = vtk.Rendering.Core.vtkMapper\n\n        // Force the loading of HttpDataAccessHelper to support gzip decompression\n        const vtkHttpDataAccessHelper = vtk.IO.Core.DataAccessHelper.HttpDataAccessHelper\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance();\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // ----------------------------------------------------------------------------\n        // Example code\n        // ----------------------------------------------------------------------------\n        // Server is not sending the .gz and with the compress header\n        // Need to fetch the true file name and uncompress it locally\n        // ----------------------------------------------------------------------------\n\n        const reader = vtkHttpDataSetReader.newInstance({ fetchGzip: true });\n        reader.setUrl(data_path).then(() => {\n            reader.loadData().then(() => {\n                renderer.resetCamera();\n                renderWindow.render();\n            });\n        });\n\n        const mapper = vtkMapper.newInstance();\n        mapper.setInputConnection(reader.getOutputPort());\n\n        const actor = vtkActor.newInstance();\n        actor.setMapper(mapper);\n\n        renderer.addActor(actor);\n\n        // -----------------------------------------------------------\n        // Make some variables global so that you can inspect and\n        // modify objects in your browser's developer console:\n        // -----------------------------------------------------------\n\n        // global.source = reader;\n        // global.mapper = mapper;\n        // global.actor = actor;\n        // global.renderer = renderer;\n        // global.renderWindow = renderWindow;\n\n    </script>\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 3:\n描述: Loads and visualizes a 3D polygonal data file (`test_cone.vtp`) using `vtkXMLPolyDataReader` and `vtkMapper`.\n\nVTK.js 模块: ['vtk.IO.XML.vtkXMLPolyDataReader', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js loading poly data, need to start by live server</title>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkXMLPolyDataReader = vtk.IO.XML.vtkXMLPolyDataReader;\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n\n        // crete the render window\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // load the vtp data locally\n        const reader = vtkXMLPolyDataReader.newInstance();\n        // set url and load the data\n        reader.setUrl('../datasets/test_cone.vtp').then(() => {\n            reader.loadData().then(() => {\n                // assign data to actor\n                const mapper = vtkMapper.newInstance();\n                console.log(reader.getOutputData(0))\n                mapper.setInputData(reader.getOutputData(0));\n                const actor = vtkActor.newInstance();\n                actor.setMapper(mapper);\n\n                //  adding actor to render and render the data\n                renderer.addActor(actor);\n                renderer.resetCamera();\n                renderWindow.render();\n            });\n        });\n    </script>\n</body>\n\n</html>\n\n\n--------------------------------------------------------------------------------------------------------------\n示例 4:\n描述: Generates and displays a 2D random image (100x100) using `vtkImageSlice` and `vtkImageMapper`.\n\nVTK.js 模块: ['vtk.Common.Core.vtkDataArray.newInstance', 'vtk.Common.DataModel.vtkImageData', 'vtk.Rendering.Core.vtkImageMapper', 'vtk.Rendering.Core.vtkImageSlice', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;// Actor for rendering 2D image slices\n        const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n        const vtkImageData = vtk.Common.DataModel.vtkImageData;\n\n        // Create render window\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // Create image data\n        const imageData = vtkImageData.newInstance();\n        imageData.setDimensions(100, 100, 1);\n        imageData.setSpacing(1.0, 1.0, 1.0);\n        imageData.setOrigin(0.0, 0.0, 0.0);\n\n        // Set pixel values for image data\n        const scalars = new Uint8Array(100 * 100);\n        for (let i = 0; i < 100 * 100; i++) {\n            scalars[i] = Math.random() * 255;\n        }\n        imageData.getPointData().setScalars(vtk.Common.Core.vtkDataArray.newInstance({ values: scalars, numberOfComponents: 1 }));\n\n        // Create mapper and actor\n        const mapper = vtkImageMapper.newInstance();\n        mapper.setInputData(imageData);\n\n        const actor = vtkImageSlice.newInstance();\n        actor.setMapper(mapper);\n\n        // Add actor to renderer\n        renderer.addActor(actor);\n        renderer.resetCamera();\n        renderWindow.render();\n    </script>\n</body>\n\n</html>\n\n\n            ",
        "evaluator_prompt": "# Role: An expert for vtk.js and web-based scientific visualization\n# Ground truth: [GROUND_TRUTH]\n# Generated code: [GENERATED_CODE]\nThe ground truth code is provided by [Ground truth], please give a score for [Generated code] according to its readability and correctness. The score is between 0 to 1, and explain reasons for giving this score.\n### Response Format\n```\n<Score>[SCORE]</Score>\n<Explanation>[EXPLANATION]</Explanation>\n### Response Example\n<Score>0.8</Score>\n<Explanation>The generated code is readable and correct.</Explanation> ",
        "generator": "deepseek-v3:671b",
        "evaluator": "deepseek-v3:671b",
        "score": null,
        "workflow": {
            "inquiryExpansion": true,
            "rag": true
        },
        "eval_id": "1764057276",
        "eval_user": "test",
        "export_time": null,
        "console_output": null,
        "eval_time": "2025-11-25 15:54:36",
        "evaluator_evaluation": null,
        "options": null
    }
]