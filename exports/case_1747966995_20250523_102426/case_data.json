{
  "evalId": "1747966995",
  "prompt": "Generate HTML with vtk.js to visualize airfoil cross-section  Load from http://127.0.0.1:5000/dataset/airfoil_oneslice.vtp  Visualization: - Blue to red color mapping - Phong shading (Ambient 0.3, Diffuse 0.7, Specular 0.4) - XYZ axes widget - Line width: 2.0",
  "groundTruth": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Airfoil Cross-Section Visualization</title>\n    <style>\n        body, html {\n            margin: 0;\n            padding: 0;\n            width: 100%;\n            height: 100%;\n            overflow: hidden;\n        }\n        #renderer {\n            width: 100%;\n            height: 100%;\n        }\n    </style>\n</head>\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        // 导入VTK.js类\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkXMLPolyDataReader = vtk.IO.XML.vtkXMLPolyDataReader;\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n\n        // 初始化渲染窗口\n        const fullScreenRenderWindow = vtkFullScreenRenderWindow.newInstance({\n            background: [0.1, 0.1, 0.1],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n        // 创建PolyData读取器\n        const reader = vtkXMLPolyDataReader.newInstance();\n        reader.setUrl('http://127.0.0.1:5000/dataset/airfoil_oneslice.vtp').then(() => {\n            reader.loadData().then(() => {\n                const polyData = reader.getOutputData(0);\n                \n                // 获取数据范围和边界\n                const bounds = polyData.getBounds();\n                const center = [\n                    (bounds[0] + bounds[1]) / 2,\n                    (bounds[2] + bounds[3]) / 2,\n                    (bounds[4] + bounds[5]) / 2\n                ];\n                \n                // 添加切割平面相关代码\n                const vtkPlane = vtk.Common.DataModel.vtkPlane;\n                const vtkCutter = vtk.Filters.Core.vtkCutter;\n                \n                // 创建切割平面\n                const plane = vtkPlane.newInstance();\n                plane.setOrigin(center[0], center[1], center[2]);\n                plane.setNormal(1, 0, 0); // 沿Z轴切割\n                \n                // 创建切割过滤器\n                const cutter = vtkCutter.newInstance();\n                cutter.setCutFunction(plane);\n                cutter.setInputData(polyData);\n                \n                // 修改映射器输入为切割过滤器输出\n                const mapper = vtkMapper.newInstance();\n                mapper.setInputConnection(cutter.getOutputPort());\n                mapper.setScalarVisibility(true);\n                mapper.setColorByArrayName('p');\n                mapper.setScalarModeToUsePointData();\n                \n                // 创建颜色传输函数\n                const colorTransferFunction = vtkColorTransferFunction.newInstance();\n                const pRange = polyData.getPointData().getArrayByName('p').getRange();\n                colorTransferFunction.addRGBPoint(pRange[0], 0.0, 0.0, 0.5);\n                colorTransferFunction.addRGBPoint((pRange[0]+pRange[1])/2, 0.0, 0.5, 1.0);\n                colorTransferFunction.addRGBPoint(pRange[1], 1.0, 0.0, 0.0);\n                \n                mapper.setLookupTable(colorTransferFunction);\n                mapper.setScalarRange(pRange[0], pRange[1]);\n                \n                const actor = vtkActor.newInstance();\n                actor.setMapper(mapper);\n                actor.getProperty().setRepresentationToSurface();\n                actor.getProperty().setEdgeVisibility(false);\n                actor.getProperty().setLineWidth(2.0);\n                actor.getProperty().setAmbient(0.3);\n                actor.getProperty().setDiffuse(0.7);\n                actor.getProperty().setSpecular(0.4);\n                \n                renderer.addActor(actor);\n                \n                // 设置相机\n                const camera = renderer.getActiveCamera();\n                camera.setFocalPoint(...center);\n                camera.setPosition(center[0], center[1] - 2, center[2] + 1);\n                camera.setViewUp(0, 0, 1);\n                \n                // 添加方向指示器\n                const axes = vtk.Rendering.Core.vtkAxesActor.newInstance();\n                const widget = vtk.Interaction.Widgets.vtkOrientationMarkerWidget.newInstance({\n                    actor: axes,\n                    interactor: renderWindow.getInteractor(),\n                });\n                widget.setEnabled(true);\n                widget.setViewportCorner(\n                    vtk.Interaction.Widgets.vtkOrientationMarkerWidget.Corners.BOTTOM_RIGHT\n                );\n                widget.setViewportSize(0.15);\n                \n                renderer.resetCamera();\n                renderWindow.render();\n            });\n        });\n    </script>\n</body>\n</html>",
  "generatedCode": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\" />\n  <title>Airfoil Cross-Section Visualization</title>\n\n  <!-- Include vtk.js library -->\n  <script src=\"https://unpkg.com/vtk.js\"></script>\n\n  <!-- CSS for layout -->\n  <style>\n    body {\n      margin: 0;\n      overflow: hidden;\n    }\n    #container {\n      width: 100vw;\n      height: 100vh;\n    }\n  </style>\n</head>\n<body>\n  <div id=\"container\"></div>\n\n  <script type=\"module\">\n    import vtkFullScreenRenderWindow from 'vtk.js/Sources/Rendering/Misc/FullScreenRenderWindow';\n    import vtkXMLPolyDataReader from 'vtk.js/Sources/IO/XML/XMLPolyDataReader';\n    import vtkMapper from 'vtk.js/Sources/Rendering/Core/Mapper';\n    import vtkActor from 'vtk.js/Sources/Rendering/Core/Actor';\n    import vtkColorTransferFunction from 'vtk.js/Sources/Rendering/Core/ColorTransferFunction';\n    import vtkProperty from 'vtk.js/Sources/Rendering/Core/Property';\n    import vtkAxesWidget from 'vtk.js/Sources/Interaction/Widgets/AxesWidget';\n\n    // Create a full-screen render window\n    const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({\n      background: [0.2, 0.2, 0.2],\n    });\n    const renderer = fullScreenRenderer.getRenderer();\n    const renderWindow = fullScreenRenderer.getRenderWindow();\n\n    // Load the VTP file using XMLPolyDataReader\n    const reader = vtkXMLPolyDataReader.newInstance();\n    reader.setUrl('http://127.0.0.1:5000/dataset/airfoil_oneslice.vtp');\n\n    // Set up mapper and actor for visualization\n    const mapper = vtkMapper.newInstance();\n    const actor = vtkActor.newInstance();\n\n    // Set up color mapping (blue to red)\n    const ctf = vtkColorTransferFunction.newInstance();\n    ctf.addRGBPoint(0.0, 0.0, 0.0, 1.0); // Blue\n    ctf.addRGBPoint(1.0, 1.0, 0.0, 0.0); // Red\n\n    // Connect the pipeline: reader -> mapper -> actor -> renderer\n    reader.onOutputData(() => {\n      mapper.setInputData(reader.getOutputData());\n      actor.setMapper(mapper);\n\n      // Configure Phong shading with Ambient, Diffuse, Specular values\n      const property = actor.getProperty();\n      property.setAmbient(0.3);\n      property.setDiffuse(0.7);\n      property.setSpecular(0.4);\n      property.setEdgeVisibility(true); // Enable edge visibility\n      property.setLineWidth(2.0); // Set line width to 2.0\n\n      // Apply color transfer function to the mapper\n      mapper.setColorByArrayName(\"YourScalarArrayName\"); // Replace with actual scalar array name in dataset\n      mapper.setScalarModeToUsePointFieldData();\n      mapper.setLookupTable(ctf);\n\n      // Add actor to the renderer\n      renderer.addActor(actor);\n      renderer.resetCamera();\n      renderWindow.render();\n    });\n\n    // Add XYZ axes widget\n    const axesWidget = vtkAxesWidget.newInstance();\n    axesWidget.setInteractor(renderWindow.getInteractor());\n    axesWidget.setEnabled(1);\n\n    // Start interaction\n    fullScreenRenderer.getInteractor().start();\n  </script>\n</body>\n</html>",
  "evaluatorEvaluation": null,
  "score": null,
  "consoleOutput": [
    {
      "type": "error",
      "message": "Error: Uncaught TypeError: Failed to resolve module specifier \"vtk.js/Sources/Rendering/Misc/FullScreenRenderWindow\". Relative references must start with either \"/\", \"./\", or \"../\". (at http://10.0.209.83:5174/:0:0)",
      "timestamp": "2025-05-23T02:23:40.169Z"
    }
  ],
  "exportTime": "2025-05-23T02:24:26.405Z"
}