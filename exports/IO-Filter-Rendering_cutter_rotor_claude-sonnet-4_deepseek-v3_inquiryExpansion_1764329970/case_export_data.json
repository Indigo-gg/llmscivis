{
  "path": "IO-Filter-Rendering\\cutter\\rotor\\description.txt",
  "name": "description.txt",
  "prompt": "Generate an HTML page using vtk.js to visualize the rotor dataset.\n\n- Load the dataset from: http://127.0.0.1:5000/dataset/rotor.vti\n- Set the active scalar array to \"Pressure\".\n- Apply a slice along the Y axis at 95% depth of the dataset (convert percentage to slice index).\n- Use a blue → white → red color map for pressure values, spanning from the minimum to maximum scalar range.\n- Set opacity to fully opaque (no transparency variation).\n- Add an orientation marker with XYZ axes in the bottom-right corner.\n- No interactive GUI controls are required.\n",
  "ground_truth": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Rotor Dataset Cutting Rendering</title>\n    <style>\n        body,\n        html {\n            margin: 0;\n            padding: 0;\n            width: 100%;\n            height: 100%;\n            overflow: hidden;\n        }\n\n        #renderer {\n            width: 100%;\n            height: 100%;\n        }\n    </style>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js@34.10.0/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n        const vtkXMLImageDataReader = vtk.IO.XML.vtkXMLImageDataReader;\n        const vtkPlane = vtk.Common.DataModel.vtkPlane;\n        const vtkColorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction;\n\n        const fullScreenRenderWindow = vtkFullScreenRenderWindow.newInstance({\n            background: [1, 1, 1],\n        });\n        const renderWindow = fullScreenRenderWindow.getRenderWindow();\n        const renderer = fullScreenRenderWindow.getRenderer();\n\n        const reader = vtkXMLImageDataReader.newInstance();\n        reader.setUrl('http://127.0.0.1:5000/dataset/rotor_simplified.vti').then(() => {\n            reader.loadData().then(() => {\n                const imageData = reader.getOutputData(0);\n                imageData.getPointData().setActiveScalars('Pressure');\n\n                const vtkImageSlice = vtk.Rendering.Core.vtkImageSlice;\n                const vtkImageMapper = vtk.Rendering.Core.vtkImageMapper;\n\n                const imageMapper = vtkImageMapper.newInstance();\n                imageMapper.setInputData(imageData);\n                const dims = imageData.getDimensions();\n                imageMapper.setSlice(dims[1] * 0.95);\n                imageMapper.setSlicingMode(1); //(0:X, 1:Y, 2:Z)\n\n                const pressureArray = imageData.getPointData().getArrayByName('Pressure');\n                const [pMin, pMax] = pressureArray.getRange();\n                const colorTransferFunction = vtkColorTransferFunction.newInstance();\n                colorTransferFunction.addRGBPoint(pMin, 0.0, 0.0, 0.8);\n                colorTransferFunction.addRGBPoint((pMin + pMax) / 2, 1.0, 1.0, 1.0);\n                colorTransferFunction.addRGBPoint(pMax, 0.8, 0.0, 0.0);\n\n                // Add opacity transfer function\n                const vtkPiecewiseFunction = vtk.Common.DataModel.vtkPiecewiseFunction;\n                const opacityFunction = vtkPiecewiseFunction.newInstance();\n                opacityFunction.addPoint(pMin, 1.0);\n                opacityFunction.addPoint(pMax, 1.0);\n\n                const imageSlice = vtkImageSlice.newInstance();\n                imageSlice.setMapper(imageMapper);\n                imageSlice.getProperty().setRGBTransferFunction(0, colorTransferFunction);\n                imageSlice.getProperty().setPiecewiseFunction(0, opacityFunction);  // Set opacity function\n                imageSlice.getProperty().setScalarOpacity(0, opacityFunction);      // Set scalar opacity\n                imageSlice.getProperty().setUseLookupTableScalarRange(true);\n\n                renderer.addActor(imageSlice);\n\n                const axes = vtk.Rendering.Core.vtkAxesActor.newInstance();\n                const widget = vtk.Interaction.Widgets.vtkOrientationMarkerWidget.newInstance({\n                    actor: axes,\n                    interactor: renderWindow.getInteractor(),\n                });\n                widget.setEnabled(true);\n                widget.setViewportCorner(\n                    vtk.Interaction.Widgets.vtkOrientationMarkerWidget.Corners.BOTTOM_RIGHT\n                );\n                widget.setViewportSize(0.15);\n\n                renderer.resetCamera();\n                renderer.resetCameraClippingRange();\n                renderWindow.render();\n            });\n        });\n    </script>\n</body>\n\n</html>",
  "generated_code": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Rotor Dataset Visualization with Pressure Slice</title>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n\n    <script type=\"text/javascript\" src=\"https://unpkg.com/@babel/polyfill@7.0.0/dist/polyfill.js\"></script>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const fullScreenRenderer = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0.1, 0.1, 0.1],\n        });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // Create HTTP data reader to load the rotor dataset\n        const reader = vtk.IO.Core.vtkHttpDataSetReader.newInstance({ fetchGzip: true });\n\n        // Load the rotor dataset from the specified URL\n        reader\n            .setUrl('http://127.0.0.1:5000/dataset/rotor.vti', { loadData: true })\n            .then(() => {\n                const imageData = reader.getOutputData();\n                \n                // Set the active scalar array to \"Pressure\"\n                const pointData = imageData.getPointData();\n                const pressureArray = pointData.getArrayByName('Pressure');\n                if (pressureArray) {\n                    pointData.setActiveScalars('Pressure');\n                }\n\n                // Get dataset dimensions to calculate 95% Y slice position\n                const dims = imageData.getDimensions();\n                const ySize = dims[1]; // Y dimension size\n                const sliceIndex = Math.floor(ySize * 0.95); // 95% depth along Y axis\n\n                // Create a plane to slice the dataset along Y axis\n                const plane = vtk.Common.DataModel.vtkPlane.newInstance();\n                plane.setOrigin(0, sliceIndex, 0);\n                plane.setNormal(0, 1, 0); // Normal pointing along Y axis\n\n                // Create cutter to slice the volume\n                const cutter = vtk.Filters.Core.vtkCutter.newInstance();\n                cutter.setInputData(imageData);\n                cutter.setCutFunction(plane);\n\n                // Create mapper for the slice\n                const mapper = vtk.Rendering.Core.vtkMapper.newInstance();\n                mapper.setInputConnection(cutter.getOutputPort());\n\n                // Get scalar range from pressure array for color mapping\n                const scalarRange = pressureArray.getRange();\n                mapper.setScalarRange(scalarRange);\n\n                // Create blue -> white -> red color map\n                const colorTransferFunction = vtk.Rendering.Core.vtkColorTransferFunction.newInstance();\n                colorTransferFunction.addRGBPoint(scalarRange[0], 0.0, 0.0, 1.0); // Blue at minimum\n                colorTransferFunction.addRGBPoint((scalarRange[0] + scalarRange[1]) / 2, 1.0, 1.0, 1.0); // White at middle\n                colorTransferFunction.addRGBPoint(scalarRange[1], 1.0, 0.0, 0.0); // Red at maximum\n\n                mapper.setLookupTable(colorTransferFunction);\n\n                // Create actor for the slice\n                const actor = vtk.Rendering.Core.vtkActor.newInstance();\n                actor.setMapper(mapper);\n                \n                // Set opacity to fully opaque\n                actor.getProperty().setOpacity(1.0);\n\n                // Add actor to renderer\n                renderer.addActor(actor);\n\n                // Add orientation marker (XYZ axes) in bottom-right corner\n                const orientationMarker = vtk.Interaction.Widgets.vtkOrientationMarkerWidget.newInstance({\n                    actor: vtk.Rendering.Core.vtkAxesActor.newInstance(),\n                });\n                orientationMarker.setEnabled(true);\n                orientationMarker.setViewport({ xmin: 0.8, xmax: 1.0, ymin: 0.0, ymax: 0.2 });\n                orientationMarker.setInteractor(renderWindow.getInteractor());\n\n                // Reset camera and render\n                renderer.resetCamera();\n                renderWindow.render();\n            })\n            .catch((error) => {\n                console.error('Error loading dataset:', error);\n            });\n\n        // Store references for debugging\n        window.reader = reader;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n\n    </script>\n\n</body>\n\n</html>",
  "generator_prompt": "Please use vtkjs to generate visualization code. The code should be in the form of a complete code wrapped only in HTML tags. Please add your thinking process as comments in the code to make it easier to understand the code logic.\n\nIn the code, use `<script src=\"https://unpkg.com/vtk.js\"></script>` as the library for visualization to implement the visualization function.\nPlease follow the following rules:\n1. The content of the answer is HTML code with vtkjs script(start from <!DOCTYPE html>), and if there is any explanation, it should be given in the form of comments.\n2. If the sample code is relevant to the user's requirements, implement the user's requirements based on the sample code.\n3. The answer should be based on the provided sample information, and do not fabricate functions that do not exist. \nPlease implement the code strictly according to the specific requirements of the user in the `<QUESTION></QUESTION>` tag. Ensure that the code logic is clear and straightforward, and generate the visualization-related code completely in accordance with the syntax specifications of vtkjs. \n<QUESTION>__QUESTION__</QUESTION>\n\n",
  "final_prompt": "\n    Generate only the HTML code without any additional text or markdown formatting.\n    User Requirements:\n    Generate an HTML page using vtk.js to visualize the rotor dataset.\n\n- Load the dataset from: http://127.0.0.1:5000/dataset/rotor.vti\n- Set the active scalar array to \"Pressure\".\n- Apply a slice along the Y axis at 95% depth of the dataset (convert percentage to slice index).\n- Use a blue → white → red color map for pressure values, spanning from the minimum to maximum scalar range.\n- Set opacity to fully opaque (no transparency variation).\n- Add an orientation marker with XYZ axes in the bottom-right corner.\n- No interactive GUI controls are required.\n\n\n    Relevant VTK.js Examples:\n    示例 1:\n描述: Loads 3D volume data, writes it to a binary XML format using `vtkXMLImageDataWriter`, reads it back with `vtkXMLImageDataReader`, and visualizes it\nVTK.js 模块: ['vtk.IO.XML.vtkXMLImageDataReader.newInstance', 'vtk.Common.DataModel.vtkPiecewiseFunction.newInstance', 'vtk.IO.Core.vtkHttpDataSetReader.newInstance', 'vtk.IO.XML.vtkXMLImageDataWriter.newInstance', 'vtk.IO.XML.vtkXMLWriter.FormatTypes.BINARY', 'vtk.Rendering.Core.vtkColorTransferFunction.newInstance', 'vtk.Rendering.Core.vtkVolume.newInstance', 'vtk.Rendering.Core.vtkVolumeMapper.newInstance', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js XMLImageDataWriter</title>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n\n    <script type=\"text/javascript\" src=\"https://unpkg.com/@babel/polyfill@7.0.0/dist/polyfill.js\"></script>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n\n        // ----------------------------------------------------------------------------\n        // Standard rendering code setup\n        // ----------------------------------------------------------------------------\n\n        const dataPath = 'http://kitware.github.io/vtk-js/data/volume/headsq.vti';\n        const fullScreenRenderer = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance();\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        const reader = vtk.IO.Core.vtkHttpDataSetReader.newInstance({ fetchGzip: true });\n\n        const writer = vtk.IO.XML.vtkXMLImageDataWriter.newInstance();\n        writer.setFormat(vtk.IO.XML.vtkXMLWriter.FormatTypes.BINARY);\n        writer.setInputConnection(reader.getOutputPort());\n\n        const writerReader = vtk.IO.XML.vtkXMLImageDataReader.newInstance();\n\n        reader\n            .setUrl(dataPath, { loadData: true })\n            .then(() => {\n                const fileContents = writer.write(reader.getOutputData());\n\n                // Try to read it back.\n                const textEncoder = new TextEncoder();\n                writerReader.parseAsArrayBuffer(textEncoder.encode(fileContents));\n                renderer.resetCamera();\n                renderWindow.render();\n\n                const blob = new Blob([fileContents], { type: 'text/plain' });\n                const a = window.document.createElement('a');\n                a.href = window.URL.createObjectURL(blob, { type: 'text/plain' });\n                a.download = 'headsq.vti';\n                a.text = 'Download';\n                a.style.position = 'absolute';\n                a.style.left = '50%';\n                a.style.bottom = '10px';\n                document.body.appendChild(a);\n                a.style.background = 'white';\n                a.style.padding = '5px';\n            });\n\n        const actor = vtk.Rendering.Core.vtkVolume.newInstance();\n        const mapper = vtk.Rendering.Core.vtkVolumeMapper.newInstance();\n        mapper.setSampleDistance(1.1);\n        actor.setMapper(mapper);\n\n        mapper.setInputConnection(writerReader.getOutputPort());\n\n        // create color and opacity transfer functions\n        const ctfun = vtk.Rendering.Core.vtkColorTransferFunction.newInstance();\n        ctfun.addRGBPoint(200.0, 1.0, 1.0, 1.0);\n        ctfun.addRGBPoint(2000.0, 0.0, 0.0, 0.0);\n        const ofun = vtk.Common.DataModel.vtkPiecewiseFunction.newInstance();\n        ofun.addPoint(200.0, 0.0);\n        ofun.addPoint(1200.0, 0.2);\n        ofun.addPoint(4000.0, 0.4);\n        actor.getProperty().setRGBTransferFunction(0, ctfun);\n        actor.getProperty().setScalarOpacity(0, ofun);\n        actor.getProperty().setScalarOpacityUnitDistance(0, 4.5);\n        // actor.getProperty().setInterpolationTypeToNearest();\n        // actor.getProperty().setInterpolationTypeToFastLinear();\n        actor.getProperty().setInterpolationTypeToLinear();\n\n        renderer.addActor(actor);\n\n        window.writer = writer;\n        window.writerReader = writerReader;\n        window.mapper = mapper;\n        window.actor = actor;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n\n    </script>\n\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 2:\n描述: Loads 3D polydata, writes it to a string using `vtkXMLPolyDataWriter`, reads it back with `vtkXMLPolyDataReader`, and renders it, allowing download of the generated VTP file.\nVTK.js 模块: ['vtk.IO.Core.vtkHttpDataSetReader', 'vtk.IO.XML.vtkXMLPolyDataReader', 'vtk.IO.XML.vtkXMLPolyDataWriter', 'vtk.IO.XML.vtkXMLWriter', 'vtk.Rendering.Core.vtkActor.newInstance', 'vtk.Rendering.Core.vtkMapper.newInstance', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js XMLImagePolyDataWriter</title>\n    <!-- <link rel=\"stylesheet\" href=\"https://kit.fontawesome.com/419a5ebb56.css\" crossorigin=\"anonymous\"> -->\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n\n    <script type=\"text/javascript\" src=\"https://unpkg.com/@babel/polyfill@7.0.0/dist/polyfill.js\"></script>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const mapper = vtk.Rendering.Core.vtkMapper.newInstance();\n        const actor = vtk.Rendering.Core.vtkActor.newInstance();\n        const fullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const httpDataSetReader = vtk.IO.Core.vtkHttpDataSetReader;\n        const xmlPolyDataWriter = vtk.IO.XML.vtkXMLPolyDataWriter;\n        const xmlPolyDataReader = vtk.IO.XML.vtkXMLPolyDataReader;\n        const xmlWriter = vtk.IO.XML.vtkXMLWriter;\n        // Create instances using namespace paths\n        const fullScreenRenderer = fullScreenRenderWindow.newInstance();\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n        const reader = httpDataSetReader.newInstance({ fetchGzip: true });\n\n        const writer = xmlPolyDataWriter.newInstance();\n        writer.setFormat(xmlWriter.FormatTypes.BINARY);\n        writer.setInputConnection(reader.getOutputPort());\n\n        const writerReader = xmlPolyDataReader.newInstance();\n\n        reader.setUrl(`http://kitware.github.io/vtk-js/data/cow.vtp`, { loadData: true }).then(() => {\n            const fileContents = writer.write(reader.getOutputData());\n\n            // Try to read it back.\n            const textEncoder = new TextEncoder();\n            writerReader.parseAsArrayBuffer(textEncoder.encode(fileContents));\n            renderer.resetCamera();\n            renderWindow.render();\n\n            const blob = new Blob([fileContents], { type: 'text/plain' });\n            const a = window.document.createElement('a');\n            a.href = window.URL.createObjectURL(blob, { type: 'text/plain' });\n            a.download = 'cow.vtp';\n            a.text = 'Download';\n            a.style.position = 'absolute';\n            a.style.left = '50%';\n            a.style.bottom = '10px';\n            document.body.appendChild(a);\n            a.style.background = 'white';\n            a.style.padding = '5px';\n        });\n\n        actor.setMapper(mapper);\n\n        mapper.setInputConnection(writerReader.getOutputPort());\n\n        renderer.addActor(actor);\n\n        window.writer = writer;\n        window.writerReader = writerReader;\n        window.mapper = mapper;\n        window.actor = actor;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n\n\n    </script>\n\n</body>\n\n</html>\n\n--------------------------------------------------------------------------------------------------------------\n示例 3:\n描述: Loads and visualizes a 3D polygonal data file (`test_cone.vtp`) using `vtkXMLPolyDataReader` and `vtkMapper`.\n\nVTK.js 模块: ['vtk.IO.XML.vtkXMLPolyDataReader', 'vtk.Rendering.Core.vtkActor', 'vtk.Rendering.Core.vtkMapper', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js loading poly data, need to start by live server</title>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n        const vtkFullScreenRenderWindow = vtk.Rendering.Misc.vtkFullScreenRenderWindow;\n        const vtkXMLPolyDataReader = vtk.IO.XML.vtkXMLPolyDataReader;\n        const vtkActor = vtk.Rendering.Core.vtkActor;\n        const vtkMapper = vtk.Rendering.Core.vtkMapper;\n\n        // crete the render window\n        const fullScreenRenderer = vtkFullScreenRenderWindow.newInstance({ background: [0, 0, 0] });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n\n        // load the vtp data locally\n        const reader = vtkXMLPolyDataReader.newInstance();\n        // set url and load the data\n        reader.setUrl('../datasets/test_cone.vtp').then(() => {\n            reader.loadData().then(() => {\n                // assign data to actor\n                const mapper = vtkMapper.newInstance();\n                console.log(reader.getOutputData(0))\n                mapper.setInputData(reader.getOutputData(0));\n                const actor = vtkActor.newInstance();\n                actor.setMapper(mapper);\n\n                //  adding actor to render and render the data\n                renderer.addActor(actor);\n                renderer.resetCamera();\n                renderWindow.render();\n            });\n        });\n    </script>\n</body>\n\n</html>\n\n\n--------------------------------------------------------------------------------------------------------------\n示例 4:\n描述: Loads and visualizes 3D elevation data from a CSV, applying a texture image, using `vtkElevationReader` and `vtkMapper`.\n\nVTK.js 模块: ['vtk.IO.Misc.vtkElevationReader.newInstance', 'vtk.Rendering.Core.vtkActor.newInstance', 'vtk.Rendering.Core.vtkMapper.newInstance', 'vtk.Rendering.Core.vtkTexture.newInstance', 'vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance']\n代码:\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>vtk.js ElevationReader</title>\n</head>\n\n<body>\n    <div id=\"renderer\"></div>\n\n    <script type=\"text/javascript\" src=\"https://unpkg.com/@babel/polyfill@7.0.0/dist/polyfill.js\"></script>\n    <script src=\"https://unpkg.com/vtk.js\"></script>\n    <script>\n\n\n        const imagePath = 'http://kitware.github.io/vtk-js/data/elevation/dem.jpg';\n        // const imagePath = './dem.jpg'\n        const dataPath = 'http://kitware.github.io/vtk-js/data/elevation/dem.csv';\n        const fullScreenRenderer = vtk.Rendering.Misc.vtkFullScreenRenderWindow.newInstance({\n            background: [0, 0, 0],\n        });\n        const renderer = fullScreenRenderer.getRenderer();\n        const renderWindow = fullScreenRenderer.getRenderWindow();\n        const reader = vtk.IO.Misc.vtkElevationReader.newInstance({\n            xSpacing: 0.01568,\n            ySpacing: 0.01568,\n            zScaling: 0.06666,\n        });\n        const mapper = vtk.Rendering.Core.vtkMapper.newInstance();\n        const actor = vtk.Rendering.Core.vtkActor.newInstance();\n\n        mapper.setInputConnection(reader.getOutputPort());\n        actor.setMapper(mapper);\n\n        renderer.addActor(actor);\n        renderer.resetCamera();\n        renderWindow.render();\n\n        // Download and apply Texture\n        const img = new Image();\n        img.src = imagePath;\n        //Add crossorigin=\"anonymous\" to avoid CORS errors\n        img.crossOrigin = \"anonymous\"\n        img.onload = function textureLoaded() {\n            const texture = vtk.Rendering.Core.vtkTexture.newInstance();\n            texture.setInterpolate(true);\n            texture.setImage(img);\n            actor.addTexture(texture);\n            renderWindow.render();\n        };\n\n        // Download elevation and render when ready\n        reader.setUrl(dataPath).then(() => {\n            renderer.resetCamera();\n            renderWindow.render();\n        });\n\n        window.reader = reader;\n        window.mapper = mapper;\n        window.actor = actor;\n        window.renderer = renderer;\n        window.renderWindow = renderWindow;\n\n    </script>\n\n</body>\n\n</html>\n\n            ",
  "evaluator_prompt": "# Role\n\nYou are an expert Evaluator for vtk.js and web-based scientific visualization. Your task is to compare the [GENERATED_CODE] against the [GROUND_TRUTH] and evaluate it based on specific dimensions.\n\n# Input Data\n\n## Ground Truth Code:\n\n[GROUND_TRUTH]\n\n## Generated Code:\n\n[GENERATED_CODE]\n\n# Evaluation Criteria & Rubric (0.0 to 1.0)\n\nPlease evaluate the generated code based on the following 3 dimensions. \n\n1. **Functionality & Completeness (Task Completion)**: \n   - Does the code implement the same visualization pipeline as the ground truth? (e.g., correct readers, mappers, filters).\n   - Are critical elements present (e.g., color transfer functions, full-screen rendering)?\n   - Score 1.0 if logic is identical; lower if steps are missing.\n\n2. **Visual Fidelity (Visual Quality)**:\n   - Based on the code logic, will the visual output look similar to the ground truth?\n   - Check camera parameters, background colors, and opacity transfer functions.\n   - Check if the correct data arrays (scalars/vectors) are selected for coloring.\n\n3. **Code Quality & Maintainability**:\n   - Is the code readable, well-structured, and using vtk.js best practices?\n   - Is the variable naming clear?\n\n# Response Format\n\nYou must output the evaluation in the following Strict XML format. Do not use Markdown block quotes.\n\n<Evaluation>\n    <Dimension name=\"Functionality\">\n        <Score>[SCORE_FLOAT]</Score>\n        <Reason>[BRIEF_REASONING]</Reason>\n    </Dimension>\n    <Dimension name=\"VisualQuality\">\n        <Score>[SCORE_FLOAT]</Score>\n        <Reason>[BRIEF_REASONING]</Reason>\n    </Dimension>\n    <Dimension name=\"CodeQuality\">\n        <Score>[SCORE_FLOAT]</Score>\n        <Reason>[BRIEF_REASONING]</Reason>\n    </Dimension>\n    <Summary>\n        <OverallScore>[AVERAGE_SCORE]</OverallScore>\n        <Critique>[ONE_SENTENCE_SUMMARY]</Critique>\n    </Summary>\n</Evaluation>",
  "generator": "claude-sonnet-4",
  "evaluator": "deepseek-v3",
  "score": "0.8",
  "workflow": {
    "inquiryExpansion": true,
    "rag": true
  },
  "eval_id": "1764329970",
  "eval_user": "test",
  "export_time": null,
  "console_output": null,
  "eval_time": "2025-11-28 19:39:30",
  "evaluator_evaluation": "<Evaluation>\n    <Dimension name=\"Functionality\">\n        <Score>0.8</Score>\n        <Reason>The generated code implements a similar visualization but uses a vtkCutter instead of vtkImageSlice which provides different functionality (volumetric slice vs image slice). The color transfer function and orientation marker are correctly implemented.</Reason>\n    </Dimension>\n    <Dimension name=\"VisualQuality\">\n        <Score>0.7</Score>\n        <Reason>The visual output is conceptually similar but different - the cutter shows a true volumetric slice while the ground truth shows an image slice. The color mapping is similar but background color differs from ground truth (white vs dark gray).</Reason>\n    </Dimension>\n    <Dimension name=\"CodeQuality\">\n        <Score>0.9</Score>\n        <Reason>The code is well-structured with good variable naming and follows vtk.js best practices. It includes error handling which the ground truth lacks. The only minor issue is the unused polyfill import.</Reason>\n    </Dimension>\n    <Summary>\n        <OverallScore>0.8</OverallScore>\n        <Critique>The generated code produces a similar but technically different visualization from the ground truth, with excellent code quality but some visual differences.</Critique>\n    </Summary>\n</Evaluation>",
  "options": null,
  "analysis": "Data Loading — Load the dataset from 'http://127.0.0.1:5000/dataset/rotor.vti' using vtkXMLImageDataReader.\nData Processing — Set the active scalar to 'Pressure' and apply a slice along the Y-axis at 95% depth by computing the slice index and using vtkImageSlice.\nVisualization Setup — Configure the color map to a Blue-White-Red gradient for the 'Pressure' field using vtkColorTransferFunction and vtkMapper, with full opacity via vtkOpacityTransferFunction.\nUI Components — Add an orientation marker (XYZ axes) to the scene in the bottom-right corner using vtkOrientationMarkerWidget.\nRendering — Specify the render window and interactors to display the visualization without interactive GUI controls.",
  "retrieval_results": [
    {
      "id": 299933080,
      "title": "Example 1",
      "description": "Loads 3D volume data, writes it to a binary XML format using `vtkXMLImageDataWriter`, reads it back with `vtkXMLImageDataReader`, and visualizes it",
      "relevance": 0.8208180665969849
    },
    {
      "id": 144437569,
      "title": "Example 2",
      "description": "Loads 3D polydata, writes it to a string using `vtkXMLPolyDataWriter`, reads it back with `vtkXMLPolyDataReader`, and renders it, allowing download of the generated VTP file.",
      "relevance": 0.5683945417404175
    },
    {
      "id": 777604084,
      "title": "Example 3",
      "description": "Loads and visualizes a 3D polygonal data file (`test_cone.vtp`) using `vtkXMLPolyDataReader` and `vtkMapper`.\n",
      "relevance": 0.550247073173523
    },
    {
      "id": 2054430029,
      "title": "Example 4",
      "description": "Loads and visualizes 3D elevation data from a CSV, applying a texture image, using `vtkElevationReader` and `vtkMapper`.\n",
      "relevance": 0.5276861190795898
    }
  ]
}